{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { h, defineComponent, Fragment, ref, computed, watch, toRef, nextTick, watchEffect, onMounted } from 'vue';\nimport { VOverflow } from 'vueuc';\nimport { NPopover } from \"../../../popover/index.mjs\";\nimport { NTag } from \"../../../tag/index.mjs\";\nimport { useThemeClass, useTheme, useRtl, useConfig } from \"../../../_mixins/index.mjs\";\nimport { createKey, getTitleAttribute, render, useOnResize, Wrapper } from \"../../../_utils/index.mjs\";\nimport Suffix from \"../../suffix/index.mjs\";\nimport { internalSelectionLight } from \"../styles/index.mjs\";\nimport style from \"./styles/index.cssr.mjs\";\nimport { getPadding } from 'seemly';\nexport default defineComponent({\n  name: 'InternalSelection',\n  props: Object.assign(Object.assign({}, useTheme.props), {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    bordered: {\n      type: Boolean,\n      default: undefined\n    },\n    active: Boolean,\n    pattern: {\n      type: String,\n      default: ''\n    },\n    placeholder: String,\n    selectedOption: {\n      type: Object,\n      default: null\n    },\n    selectedOptions: {\n      type: Array,\n      default: null\n    },\n    labelField: {\n      type: String,\n      default: 'label'\n    },\n    valueField: {\n      type: String,\n      default: 'value'\n    },\n    multiple: Boolean,\n    filterable: Boolean,\n    clearable: Boolean,\n    disabled: Boolean,\n    size: {\n      type: String,\n      default: 'medium'\n    },\n    loading: Boolean,\n    autofocus: Boolean,\n    showArrow: {\n      type: Boolean,\n      default: true\n    },\n    inputProps: Object,\n    focused: Boolean,\n    renderTag: Function,\n    onKeydown: Function,\n    onClick: Function,\n    onBlur: Function,\n    onFocus: Function,\n    onDeleteOption: Function,\n    maxTagCount: [String, Number],\n    ellipsisTagPopoverProps: Object,\n    onClear: Function,\n    onPatternInput: Function,\n    onPatternFocus: Function,\n    onPatternBlur: Function,\n    renderLabel: Function,\n    status: String,\n    inlineThemeDisabled: Boolean,\n    ignoreComposition: {\n      type: Boolean,\n      default: true\n    },\n    onResize: Function\n  }),\n  setup(props) {\n    const {\n      mergedClsPrefixRef,\n      mergedRtlRef\n    } = useConfig(props);\n    const rtlEnabledRef = useRtl('InternalSelection', mergedRtlRef, mergedClsPrefixRef);\n    const patternInputMirrorRef = ref(null);\n    const patternInputRef = ref(null);\n    const selfRef = ref(null);\n    const multipleElRef = ref(null);\n    const singleElRef = ref(null);\n    const patternInputWrapperRef = ref(null);\n    const counterRef = ref(null);\n    const counterWrapperRef = ref(null);\n    const overflowRef = ref(null);\n    const inputTagElRef = ref(null);\n    const showTagsPopoverRef = ref(false);\n    const patternInputFocusedRef = ref(false);\n    const hoverRef = ref(false);\n    const themeRef = useTheme('InternalSelection', '-internal-selection', style, internalSelectionLight, props, toRef(props, 'clsPrefix'));\n    const mergedClearableRef = computed(() => {\n      return props.clearable && !props.disabled && (hoverRef.value || props.active);\n    });\n    const filterablePlaceholderRef = computed(() => {\n      return props.selectedOption ? props.renderTag ? props.renderTag({\n        option: props.selectedOption,\n        handleClose: () => {}\n      }) : props.renderLabel ? props.renderLabel(props.selectedOption, true) : render(props.selectedOption[props.labelField], props.selectedOption, true) : props.placeholder;\n    });\n    const labelRef = computed(() => {\n      const option = props.selectedOption;\n      if (!option) return undefined;\n      return option[props.labelField];\n    });\n    const selectedRef = computed(() => {\n      if (props.multiple) {\n        return !!(Array.isArray(props.selectedOptions) && props.selectedOptions.length);\n      } else {\n        return props.selectedOption !== null;\n      }\n    });\n    function syncMirrorWidth() {\n      var _a;\n      const {\n        value: patternInputMirrorEl\n      } = patternInputMirrorRef;\n      if (patternInputMirrorEl) {\n        const {\n          value: patternInputEl\n        } = patternInputRef;\n        if (patternInputEl) {\n          patternInputEl.style.width = `${patternInputMirrorEl.offsetWidth}px`;\n          if (props.maxTagCount !== 'responsive') {\n            (_a = overflowRef.value) === null || _a === void 0 ? void 0 : _a.sync({\n              showAllItemsBeforeCalculate: false\n            });\n          }\n        }\n      }\n    }\n    function hideInputTag() {\n      const {\n        value: inputTagEl\n      } = inputTagElRef;\n      if (inputTagEl) inputTagEl.style.display = 'none';\n    }\n    function showInputTag() {\n      const {\n        value: inputTagEl\n      } = inputTagElRef;\n      if (inputTagEl) inputTagEl.style.display = 'inline-block';\n    }\n    watch(toRef(props, 'active'), value => {\n      if (!value) hideInputTag();\n    });\n    watch(toRef(props, 'pattern'), () => {\n      if (props.multiple) {\n        void nextTick(syncMirrorWidth);\n      }\n    });\n    function doFocus(e) {\n      const {\n        onFocus\n      } = props;\n      if (onFocus) onFocus(e);\n    }\n    function doBlur(e) {\n      const {\n        onBlur\n      } = props;\n      if (onBlur) onBlur(e);\n    }\n    function doDeleteOption(value) {\n      const {\n        onDeleteOption\n      } = props;\n      if (onDeleteOption) onDeleteOption(value);\n    }\n    function doClear(e) {\n      const {\n        onClear\n      } = props;\n      if (onClear) onClear(e);\n    }\n    function doPatternInput(value) {\n      const {\n        onPatternInput\n      } = props;\n      if (onPatternInput) onPatternInput(value);\n    }\n    function handleFocusin(e) {\n      var _a;\n      if (!e.relatedTarget || !((_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.contains(e.relatedTarget))) {\n        doFocus(e);\n      }\n    }\n    function handleFocusout(e) {\n      var _a;\n      if ((_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.contains(e.relatedTarget)) return;\n      doBlur(e);\n    }\n    function handleClear(e) {\n      doClear(e);\n    }\n    function handleMouseEnter() {\n      hoverRef.value = true;\n    }\n    function handleMouseLeave() {\n      hoverRef.value = false;\n    }\n    function handleMouseDown(e) {\n      if (!props.active || !props.filterable) return;\n      if (e.target === patternInputRef.value) return;\n      e.preventDefault();\n    }\n    function handleDeleteOption(option) {\n      doDeleteOption(option);\n    }\n    function handlePatternKeyDown(e) {\n      if (e.key === 'Backspace' && !isComposingRef.value) {\n        if (!props.pattern.length) {\n          const {\n            selectedOptions\n          } = props;\n          if (selectedOptions === null || selectedOptions === void 0 ? void 0 : selectedOptions.length) {\n            handleDeleteOption(selectedOptions[selectedOptions.length - 1]);\n          }\n        }\n      }\n    }\n    const isComposingRef = ref(false);\n    // the composition end is later than its input so we can cached the event\n    // and return the input event\n    let cachedInputEvent = null;\n    function handlePatternInputInput(e) {\n      // we should sync mirror width here\n      const {\n        value: patternInputMirrorEl\n      } = patternInputMirrorRef;\n      if (patternInputMirrorEl) {\n        const inputText = e.target.value;\n        patternInputMirrorEl.textContent = inputText;\n        syncMirrorWidth();\n      }\n      if (props.ignoreComposition) {\n        if (!isComposingRef.value) {\n          doPatternInput(e);\n        } else {\n          cachedInputEvent = e;\n        }\n      } else {\n        doPatternInput(e);\n      }\n    }\n    function handleCompositionStart() {\n      isComposingRef.value = true;\n    }\n    function handleCompositionEnd() {\n      isComposingRef.value = false;\n      if (props.ignoreComposition) {\n        doPatternInput(cachedInputEvent);\n      }\n      cachedInputEvent = null;\n    }\n    function handlePatternInputFocus(e) {\n      var _a;\n      patternInputFocusedRef.value = true;\n      (_a = props.onPatternFocus) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    }\n    function handlePatternInputBlur(e) {\n      var _a;\n      patternInputFocusedRef.value = false;\n      (_a = props.onPatternBlur) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    }\n    function blur() {\n      var _a, _b;\n      if (props.filterable) {\n        patternInputFocusedRef.value = false;\n        (_a = patternInputWrapperRef.value) === null || _a === void 0 ? void 0 : _a.blur();\n        (_b = patternInputRef.value) === null || _b === void 0 ? void 0 : _b.blur();\n      } else if (props.multiple) {\n        const {\n          value: multipleEl\n        } = multipleElRef;\n        multipleEl === null || multipleEl === void 0 ? void 0 : multipleEl.blur();\n      } else {\n        const {\n          value: singleEl\n        } = singleElRef;\n        singleEl === null || singleEl === void 0 ? void 0 : singleEl.blur();\n      }\n    }\n    function focus() {\n      var _a, _b, _c;\n      if (props.filterable) {\n        patternInputFocusedRef.value = false;\n        (_a = patternInputWrapperRef.value) === null || _a === void 0 ? void 0 : _a.focus();\n      } else if (props.multiple) {\n        (_b = multipleElRef.value) === null || _b === void 0 ? void 0 : _b.focus();\n      } else {\n        (_c = singleElRef.value) === null || _c === void 0 ? void 0 : _c.focus();\n      }\n    }\n    function focusInput() {\n      const {\n        value: patternInputEl\n      } = patternInputRef;\n      if (patternInputEl) {\n        showInputTag();\n        patternInputEl.focus();\n      }\n    }\n    function blurInput() {\n      const {\n        value: patternInputEl\n      } = patternInputRef;\n      if (patternInputEl) {\n        patternInputEl.blur();\n      }\n    }\n    function updateCounter(count) {\n      const {\n        value\n      } = counterRef;\n      if (value) {\n        value.setTextContent(`+${count}`);\n      }\n    }\n    function getCounter() {\n      const {\n        value\n      } = counterWrapperRef;\n      return value;\n    }\n    function getTail() {\n      return patternInputRef.value;\n    }\n    let enterTimerId = null;\n    function clearEnterTimer() {\n      if (enterTimerId !== null) window.clearTimeout(enterTimerId);\n    }\n    function handleMouseEnterCounter() {\n      if (props.active) return;\n      clearEnterTimer();\n      enterTimerId = window.setTimeout(() => {\n        if (selectedRef.value) {\n          showTagsPopoverRef.value = true;\n        }\n      }, 100);\n    }\n    function handleMouseLeaveCounter() {\n      clearEnterTimer();\n    }\n    function onPopoverUpdateShow(show) {\n      if (!show) {\n        clearEnterTimer();\n        showTagsPopoverRef.value = false;\n      }\n    }\n    watch(selectedRef, value => {\n      if (!value) {\n        showTagsPopoverRef.value = false;\n      }\n    });\n    onMounted(() => {\n      watchEffect(() => {\n        const patternInputWrapperEl = patternInputWrapperRef.value;\n        if (!patternInputWrapperEl) return;\n        if (props.disabled) {\n          patternInputWrapperEl.removeAttribute('tabindex');\n        } else {\n          patternInputWrapperEl.tabIndex = patternInputFocusedRef.value ? -1 : 0;\n        }\n      });\n    });\n    useOnResize(selfRef, props.onResize);\n    const {\n      inlineThemeDisabled\n    } = props;\n    const cssVarsRef = computed(() => {\n      const {\n        size\n      } = props;\n      const {\n        common: {\n          cubicBezierEaseInOut\n        },\n        self: {\n          borderRadius,\n          color,\n          placeholderColor,\n          textColor,\n          paddingSingle,\n          paddingMultiple,\n          caretColor,\n          colorDisabled,\n          textColorDisabled,\n          placeholderColorDisabled,\n          colorActive,\n          boxShadowFocus,\n          boxShadowActive,\n          boxShadowHover,\n          border,\n          borderFocus,\n          borderHover,\n          borderActive,\n          arrowColor,\n          arrowColorDisabled,\n          loadingColor,\n          // form warning\n          colorActiveWarning,\n          boxShadowFocusWarning,\n          boxShadowActiveWarning,\n          boxShadowHoverWarning,\n          borderWarning,\n          borderFocusWarning,\n          borderHoverWarning,\n          borderActiveWarning,\n          // form error\n          colorActiveError,\n          boxShadowFocusError,\n          boxShadowActiveError,\n          boxShadowHoverError,\n          borderError,\n          borderFocusError,\n          borderHoverError,\n          borderActiveError,\n          // clear\n          clearColor,\n          clearColorHover,\n          clearColorPressed,\n          clearSize,\n          // arrow\n          arrowSize,\n          [createKey('height', size)]: height,\n          [createKey('fontSize', size)]: fontSize\n        }\n      } = themeRef.value;\n      const paddingSingleDiscrete = getPadding(paddingSingle);\n      const paddingMultipleDiscrete = getPadding(paddingMultiple);\n      return {\n        '--n-bezier': cubicBezierEaseInOut,\n        '--n-border': border,\n        '--n-border-active': borderActive,\n        '--n-border-focus': borderFocus,\n        '--n-border-hover': borderHover,\n        '--n-border-radius': borderRadius,\n        '--n-box-shadow-active': boxShadowActive,\n        '--n-box-shadow-focus': boxShadowFocus,\n        '--n-box-shadow-hover': boxShadowHover,\n        '--n-caret-color': caretColor,\n        '--n-color': color,\n        '--n-color-active': colorActive,\n        '--n-color-disabled': colorDisabled,\n        '--n-font-size': fontSize,\n        '--n-height': height,\n        '--n-padding-single-top': paddingSingleDiscrete.top,\n        '--n-padding-multiple-top': paddingMultipleDiscrete.top,\n        '--n-padding-single-right': paddingSingleDiscrete.right,\n        '--n-padding-multiple-right': paddingMultipleDiscrete.right,\n        '--n-padding-single-left': paddingSingleDiscrete.left,\n        '--n-padding-multiple-left': paddingMultipleDiscrete.left,\n        '--n-padding-single-bottom': paddingSingleDiscrete.bottom,\n        '--n-padding-multiple-bottom': paddingMultipleDiscrete.bottom,\n        '--n-placeholder-color': placeholderColor,\n        '--n-placeholder-color-disabled': placeholderColorDisabled,\n        '--n-text-color': textColor,\n        '--n-text-color-disabled': textColorDisabled,\n        '--n-arrow-color': arrowColor,\n        '--n-arrow-color-disabled': arrowColorDisabled,\n        '--n-loading-color': loadingColor,\n        // form warning\n        '--n-color-active-warning': colorActiveWarning,\n        '--n-box-shadow-focus-warning': boxShadowFocusWarning,\n        '--n-box-shadow-active-warning': boxShadowActiveWarning,\n        '--n-box-shadow-hover-warning': boxShadowHoverWarning,\n        '--n-border-warning': borderWarning,\n        '--n-border-focus-warning': borderFocusWarning,\n        '--n-border-hover-warning': borderHoverWarning,\n        '--n-border-active-warning': borderActiveWarning,\n        // form error\n        '--n-color-active-error': colorActiveError,\n        '--n-box-shadow-focus-error': boxShadowFocusError,\n        '--n-box-shadow-active-error': boxShadowActiveError,\n        '--n-box-shadow-hover-error': boxShadowHoverError,\n        '--n-border-error': borderError,\n        '--n-border-focus-error': borderFocusError,\n        '--n-border-hover-error': borderHoverError,\n        '--n-border-active-error': borderActiveError,\n        // clear\n        '--n-clear-size': clearSize,\n        '--n-clear-color': clearColor,\n        '--n-clear-color-hover': clearColorHover,\n        '--n-clear-color-pressed': clearColorPressed,\n        // arrow-size\n        '--n-arrow-size': arrowSize\n      };\n    });\n    const themeClassHandle = inlineThemeDisabled ? useThemeClass('internal-selection', computed(() => {\n      return props.size[0];\n    }), cssVarsRef, props) : undefined;\n    return {\n      mergedTheme: themeRef,\n      mergedClearable: mergedClearableRef,\n      mergedClsPrefix: mergedClsPrefixRef,\n      rtlEnabled: rtlEnabledRef,\n      patternInputFocused: patternInputFocusedRef,\n      filterablePlaceholder: filterablePlaceholderRef,\n      label: labelRef,\n      selected: selectedRef,\n      showTagsPanel: showTagsPopoverRef,\n      isComposing: isComposingRef,\n      // dom ref\n      counterRef,\n      counterWrapperRef,\n      patternInputMirrorRef,\n      patternInputRef,\n      selfRef,\n      multipleElRef,\n      singleElRef,\n      patternInputWrapperRef,\n      overflowRef,\n      inputTagElRef,\n      handleMouseDown,\n      handleFocusin,\n      handleClear,\n      handleMouseEnter,\n      handleMouseLeave,\n      handleDeleteOption,\n      handlePatternKeyDown,\n      handlePatternInputInput,\n      handlePatternInputBlur,\n      handlePatternInputFocus,\n      handleMouseEnterCounter,\n      handleMouseLeaveCounter,\n      handleFocusout,\n      handleCompositionEnd,\n      handleCompositionStart,\n      onPopoverUpdateShow,\n      focus,\n      focusInput,\n      blur,\n      blurInput,\n      updateCounter,\n      getCounter,\n      getTail,\n      renderLabel: props.renderLabel,\n      cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n      themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n      onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender\n    };\n  },\n  render() {\n    const {\n      status,\n      multiple,\n      size,\n      disabled,\n      filterable,\n      maxTagCount,\n      bordered,\n      clsPrefix,\n      ellipsisTagPopoverProps,\n      onRender,\n      renderTag,\n      renderLabel\n    } = this;\n    onRender === null || onRender === void 0 ? void 0 : onRender();\n    const maxTagCountResponsive = maxTagCount === 'responsive';\n    const maxTagCountNumeric = typeof maxTagCount === 'number';\n    const useMaxTagCount = maxTagCountResponsive || maxTagCountNumeric;\n    const suffix = h(Wrapper, null, {\n      default: () => h(Suffix, {\n        clsPrefix: clsPrefix,\n        loading: this.loading,\n        showArrow: this.showArrow,\n        showClear: this.mergedClearable && this.selected,\n        onClear: this.handleClear\n      }, {\n        default: () => {\n          var _a, _b;\n          return (_b = (_a = this.$slots).arrow) === null || _b === void 0 ? void 0 : _b.call(_a);\n        }\n      })\n    });\n    let body;\n    if (multiple) {\n      const {\n        labelField\n      } = this;\n      const createTag = option => h(\"div\", {\n        class: `${clsPrefix}-base-selection-tag-wrapper`,\n        key: option.value\n      }, renderTag ? renderTag({\n        option,\n        handleClose: () => {\n          this.handleDeleteOption(option);\n        }\n      }) : h(NTag, {\n        size: size,\n        closable: !option.disabled,\n        disabled: disabled,\n        onClose: () => {\n          this.handleDeleteOption(option);\n        },\n        internalCloseIsButtonTag: false,\n        internalCloseFocusable: false\n      }, {\n        default: () => renderLabel ? renderLabel(option, true) : render(option[labelField], option, true)\n      }));\n      const createOriginalTagNodes = () => (maxTagCountNumeric ? this.selectedOptions.slice(0, maxTagCount) : this.selectedOptions).map(createTag);\n      const input = filterable ? h(\"div\", {\n        class: `${clsPrefix}-base-selection-input-tag`,\n        ref: \"inputTagElRef\",\n        key: \"__input-tag__\"\n      }, h(\"input\", Object.assign({}, this.inputProps, {\n        ref: \"patternInputRef\",\n        tabindex: -1,\n        disabled: disabled,\n        value: this.pattern,\n        autofocus: this.autofocus,\n        class: `${clsPrefix}-base-selection-input-tag__input`,\n        onBlur: this.handlePatternInputBlur,\n        onFocus: this.handlePatternInputFocus,\n        onKeydown: this.handlePatternKeyDown,\n        onInput: this.handlePatternInputInput,\n        onCompositionstart: this.handleCompositionStart,\n        onCompositionend: this.handleCompositionEnd\n      })), h(\"span\", {\n        ref: \"patternInputMirrorRef\",\n        class: `${clsPrefix}-base-selection-input-tag__mirror`\n      }, this.pattern)) : null;\n      // May Overflow\n      const renderCounter = maxTagCountResponsive ? () => h(\"div\", {\n        class: `${clsPrefix}-base-selection-tag-wrapper`,\n        ref: \"counterWrapperRef\"\n      }, h(NTag, {\n        size: size,\n        ref: \"counterRef\",\n        onMouseenter: this.handleMouseEnterCounter,\n        onMouseleave: this.handleMouseLeaveCounter,\n        disabled: disabled\n      })) : undefined;\n      let counter;\n      if (maxTagCountNumeric) {\n        const rest = this.selectedOptions.length - maxTagCount;\n        if (rest > 0) {\n          counter = h(\"div\", {\n            class: `${clsPrefix}-base-selection-tag-wrapper`,\n            key: \"__counter__\"\n          }, h(NTag, {\n            size: size,\n            ref: \"counterRef\",\n            onMouseenter: this.handleMouseEnterCounter,\n            disabled: disabled\n          }, {\n            default: () => `+${rest}`\n          }));\n        }\n      }\n      const tags = maxTagCountResponsive ? filterable ? h(VOverflow, {\n        ref: \"overflowRef\",\n        updateCounter: this.updateCounter,\n        getCounter: this.getCounter,\n        getTail: this.getTail,\n        style: {\n          width: '100%',\n          display: 'flex',\n          overflow: 'hidden'\n        }\n      }, {\n        default: createOriginalTagNodes,\n        counter: renderCounter,\n        tail: () => input\n      }) : h(VOverflow, {\n        ref: \"overflowRef\",\n        updateCounter: this.updateCounter,\n        getCounter: this.getCounter,\n        style: {\n          width: '100%',\n          display: 'flex',\n          overflow: 'hidden'\n        }\n      }, {\n        default: createOriginalTagNodes,\n        counter: renderCounter\n      }) : maxTagCountNumeric && counter ? createOriginalTagNodes().concat(counter) : createOriginalTagNodes();\n      const renderPopover = useMaxTagCount ? () => h(\"div\", {\n        class: `${clsPrefix}-base-selection-popover`\n      }, maxTagCountResponsive ? createOriginalTagNodes() : this.selectedOptions.map(createTag)) : undefined;\n      const popoverProps = useMaxTagCount ? Object.assign({\n        show: this.showTagsPanel,\n        trigger: 'hover',\n        overlap: true,\n        placement: 'top',\n        width: 'trigger',\n        onUpdateShow: this.onPopoverUpdateShow,\n        theme: this.mergedTheme.peers.Popover,\n        themeOverrides: this.mergedTheme.peerOverrides.Popover\n      }, ellipsisTagPopoverProps) : null;\n      const showPlaceholder = this.selected ? false : this.active ? !this.pattern && !this.isComposing : true;\n      const placeholder = showPlaceholder ? h(\"div\", {\n        class: `${clsPrefix}-base-selection-placeholder ${clsPrefix}-base-selection-overlay`\n      }, h(\"div\", {\n        class: `${clsPrefix}-base-selection-placeholder__inner`\n      }, this.placeholder)) : null;\n      const popoverTrigger = filterable ? h(\"div\", {\n        ref: \"patternInputWrapperRef\",\n        class: `${clsPrefix}-base-selection-tags`\n      }, tags, maxTagCountResponsive ? null : input, suffix) : h(\"div\", {\n        ref: \"multipleElRef\",\n        class: `${clsPrefix}-base-selection-tags`,\n        tabindex: disabled ? undefined : 0\n      }, tags, suffix);\n      body = h(Fragment, null, useMaxTagCount ? h(NPopover, Object.assign({}, popoverProps, {\n        scrollable: true,\n        style: \"max-height: calc(var(--v-target-height) * 6.6);\"\n      }), {\n        trigger: () => popoverTrigger,\n        default: renderPopover\n      }) : popoverTrigger, placeholder);\n    } else {\n      if (filterable) {\n        const hasInput = this.pattern || this.isComposing;\n        const showPlaceholder = this.active ? !hasInput : !this.selected;\n        const showSelectedLabel = this.active ? false : this.selected;\n        body = h(\"div\", {\n          ref: \"patternInputWrapperRef\",\n          class: `${clsPrefix}-base-selection-label`,\n          title: this.patternInputFocused ? undefined : getTitleAttribute(this.label)\n        }, h(\"input\", Object.assign({}, this.inputProps, {\n          ref: \"patternInputRef\",\n          class: `${clsPrefix}-base-selection-input`,\n          value: this.active ? this.pattern : '',\n          placeholder: \"\",\n          readonly: disabled,\n          disabled: disabled,\n          tabindex: -1,\n          autofocus: this.autofocus,\n          onFocus: this.handlePatternInputFocus,\n          onBlur: this.handlePatternInputBlur,\n          onInput: this.handlePatternInputInput,\n          onCompositionstart: this.handleCompositionStart,\n          onCompositionend: this.handleCompositionEnd\n        })), showSelectedLabel ? h(\"div\", {\n          class: `${clsPrefix}-base-selection-label__render-label ${clsPrefix}-base-selection-overlay`,\n          key: \"input\"\n        }, h(\"div\", {\n          class: `${clsPrefix}-base-selection-overlay__wrapper`\n        }, renderTag ? renderTag({\n          option: this.selectedOption,\n          handleClose: () => {}\n        }) : renderLabel ? renderLabel(this.selectedOption, true) : render(this.label, this.selectedOption, true))) : null, showPlaceholder ? h(\"div\", {\n          class: `${clsPrefix}-base-selection-placeholder ${clsPrefix}-base-selection-overlay`,\n          key: \"placeholder\"\n        }, h(\"div\", {\n          class: `${clsPrefix}-base-selection-overlay__wrapper`\n        }, this.filterablePlaceholder)) : null, suffix);\n      } else {\n        body = h(\"div\", {\n          ref: \"singleElRef\",\n          class: `${clsPrefix}-base-selection-label`,\n          tabindex: this.disabled ? undefined : 0\n        }, this.label !== undefined ? h(\"div\", {\n          class: `${clsPrefix}-base-selection-input`,\n          title: getTitleAttribute(this.label),\n          key: \"input\"\n        }, h(\"div\", {\n          class: `${clsPrefix}-base-selection-input__content`\n        }, renderTag ? renderTag({\n          option: this.selectedOption,\n          handleClose: () => {}\n        }) : renderLabel ? renderLabel(this.selectedOption, true) : render(this.label, this.selectedOption, true))) : h(\"div\", {\n          class: `${clsPrefix}-base-selection-placeholder ${clsPrefix}-base-selection-overlay`,\n          key: \"placeholder\"\n        }, h(\"div\", {\n          class: `${clsPrefix}-base-selection-placeholder__inner`\n        }, this.placeholder)), suffix);\n      }\n    }\n    return h(\"div\", {\n      ref: \"selfRef\",\n      class: [`${clsPrefix}-base-selection`, this.rtlEnabled && `${clsPrefix}-base-selection--rtl`, this.themeClass, status && `${clsPrefix}-base-selection--${status}-status`, {\n        [`${clsPrefix}-base-selection--active`]: this.active,\n        [`${clsPrefix}-base-selection--selected`]: this.selected || this.active && this.pattern,\n        [`${clsPrefix}-base-selection--disabled`]: this.disabled,\n        [`${clsPrefix}-base-selection--multiple`]: this.multiple,\n        // focus is not controlled by selection itself since it always need\n        // to be managed together with menu. provide :focus style will cause\n        // many redundant codes.\n        [`${clsPrefix}-base-selection--focus`]: this.focused\n      }],\n      style: this.cssVars,\n      onClick: this.onClick,\n      onMouseenter: this.handleMouseEnter,\n      onMouseleave: this.handleMouseLeave,\n      onKeydown: this.onKeydown,\n      onFocusin: this.handleFocusin,\n      onFocusout: this.handleFocusout,\n      onMousedown: this.handleMouseDown\n    }, body, bordered ? h(\"div\", {\n      class: `${clsPrefix}-base-selection__border`\n    }) : null, bordered ? h(\"div\", {\n      class: `${clsPrefix}-base-selection__state-border`\n    }) : null);\n  }\n});","map":{"version":3,"names":["h","defineComponent","Fragment","ref","computed","watch","toRef","nextTick","watchEffect","onMounted","VOverflow","NPopover","NTag","useThemeClass","useTheme","useRtl","useConfig","createKey","getTitleAttribute","render","useOnResize","Wrapper","Suffix","internalSelectionLight","style","getPadding","name","props","Object","assign","clsPrefix","type","String","required","bordered","Boolean","default","undefined","active","pattern","placeholder","selectedOption","selectedOptions","Array","labelField","valueField","multiple","filterable","clearable","disabled","size","loading","autofocus","showArrow","inputProps","focused","renderTag","Function","onKeydown","onClick","onBlur","onFocus","onDeleteOption","maxTagCount","Number","ellipsisTagPopoverProps","onClear","onPatternInput","onPatternFocus","onPatternBlur","renderLabel","status","inlineThemeDisabled","ignoreComposition","onResize","setup","mergedClsPrefixRef","mergedRtlRef","rtlEnabledRef","patternInputMirrorRef","patternInputRef","selfRef","multipleElRef","singleElRef","patternInputWrapperRef","counterRef","counterWrapperRef","overflowRef","inputTagElRef","showTagsPopoverRef","patternInputFocusedRef","hoverRef","themeRef","mergedClearableRef","value","filterablePlaceholderRef","option","handleClose","labelRef","selectedRef","isArray","length","syncMirrorWidth","_a","patternInputMirrorEl","patternInputEl","width","offsetWidth","sync","showAllItemsBeforeCalculate","hideInputTag","inputTagEl","display","showInputTag","doFocus","e","doBlur","doDeleteOption","doClear","doPatternInput","handleFocusin","relatedTarget","contains","handleFocusout","handleClear","handleMouseEnter","handleMouseLeave","handleMouseDown","target","preventDefault","handleDeleteOption","handlePatternKeyDown","key","isComposingRef","cachedInputEvent","handlePatternInputInput","inputText","textContent","handleCompositionStart","handleCompositionEnd","handlePatternInputFocus","call","handlePatternInputBlur","blur","_b","multipleEl","singleEl","focus","_c","focusInput","blurInput","updateCounter","count","setTextContent","getCounter","getTail","enterTimerId","clearEnterTimer","window","clearTimeout","handleMouseEnterCounter","setTimeout","handleMouseLeaveCounter","onPopoverUpdateShow","show","patternInputWrapperEl","removeAttribute","tabIndex","cssVarsRef","common","cubicBezierEaseInOut","self","borderRadius","color","placeholderColor","textColor","paddingSingle","paddingMultiple","caretColor","colorDisabled","textColorDisabled","placeholderColorDisabled","colorActive","boxShadowFocus","boxShadowActive","boxShadowHover","border","borderFocus","borderHover","borderActive","arrowColor","arrowColorDisabled","loadingColor","colorActiveWarning","boxShadowFocusWarning","boxShadowActiveWarning","boxShadowHoverWarning","borderWarning","borderFocusWarning","borderHoverWarning","borderActiveWarning","colorActiveError","boxShadowFocusError","boxShadowActiveError","boxShadowHoverError","borderError","borderFocusError","borderHoverError","borderActiveError","clearColor","clearColorHover","clearColorPressed","clearSize","arrowSize","height","fontSize","paddingSingleDiscrete","paddingMultipleDiscrete","top","right","left","bottom","themeClassHandle","mergedTheme","mergedClearable","mergedClsPrefix","rtlEnabled","patternInputFocused","filterablePlaceholder","label","selected","showTagsPanel","isComposing","cssVars","themeClass","onRender","maxTagCountResponsive","maxTagCountNumeric","useMaxTagCount","suffix","showClear","$slots","arrow","body","createTag","class","closable","onClose","internalCloseIsButtonTag","internalCloseFocusable","createOriginalTagNodes","slice","map","input","tabindex","onInput","onCompositionstart","onCompositionend","renderCounter","onMouseenter","onMouseleave","counter","rest","tags","overflow","tail","concat","renderPopover","popoverProps","trigger","overlap","placement","onUpdateShow","theme","peers","Popover","themeOverrides","peerOverrides","showPlaceholder","popoverTrigger","scrollable","hasInput","showSelectedLabel","title","readonly","onFocusin","onFocusout","onMousedown"],"sources":["/Users/wangjohnson/ai_marketing/frontend/node_modules/naive-ui/es/_internal/selection/src/Selection.mjs"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { h, defineComponent, Fragment, ref, computed, watch, toRef, nextTick, watchEffect, onMounted } from 'vue';\nimport { VOverflow } from 'vueuc';\nimport { NPopover } from \"../../../popover/index.mjs\";\nimport { NTag } from \"../../../tag/index.mjs\";\nimport { useThemeClass, useTheme, useRtl, useConfig } from \"../../../_mixins/index.mjs\";\nimport { createKey, getTitleAttribute, render, useOnResize, Wrapper } from \"../../../_utils/index.mjs\";\nimport Suffix from \"../../suffix/index.mjs\";\nimport { internalSelectionLight } from \"../styles/index.mjs\";\nimport style from \"./styles/index.cssr.mjs\";\nimport { getPadding } from 'seemly';\nexport default defineComponent({\n  name: 'InternalSelection',\n  props: Object.assign(Object.assign({}, useTheme.props), {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    bordered: {\n      type: Boolean,\n      default: undefined\n    },\n    active: Boolean,\n    pattern: {\n      type: String,\n      default: ''\n    },\n    placeholder: String,\n    selectedOption: {\n      type: Object,\n      default: null\n    },\n    selectedOptions: {\n      type: Array,\n      default: null\n    },\n    labelField: {\n      type: String,\n      default: 'label'\n    },\n    valueField: {\n      type: String,\n      default: 'value'\n    },\n    multiple: Boolean,\n    filterable: Boolean,\n    clearable: Boolean,\n    disabled: Boolean,\n    size: {\n      type: String,\n      default: 'medium'\n    },\n    loading: Boolean,\n    autofocus: Boolean,\n    showArrow: {\n      type: Boolean,\n      default: true\n    },\n    inputProps: Object,\n    focused: Boolean,\n    renderTag: Function,\n    onKeydown: Function,\n    onClick: Function,\n    onBlur: Function,\n    onFocus: Function,\n    onDeleteOption: Function,\n    maxTagCount: [String, Number],\n    ellipsisTagPopoverProps: Object,\n    onClear: Function,\n    onPatternInput: Function,\n    onPatternFocus: Function,\n    onPatternBlur: Function,\n    renderLabel: Function,\n    status: String,\n    inlineThemeDisabled: Boolean,\n    ignoreComposition: {\n      type: Boolean,\n      default: true\n    },\n    onResize: Function\n  }),\n  setup(props) {\n    const {\n      mergedClsPrefixRef,\n      mergedRtlRef\n    } = useConfig(props);\n    const rtlEnabledRef = useRtl('InternalSelection', mergedRtlRef, mergedClsPrefixRef);\n    const patternInputMirrorRef = ref(null);\n    const patternInputRef = ref(null);\n    const selfRef = ref(null);\n    const multipleElRef = ref(null);\n    const singleElRef = ref(null);\n    const patternInputWrapperRef = ref(null);\n    const counterRef = ref(null);\n    const counterWrapperRef = ref(null);\n    const overflowRef = ref(null);\n    const inputTagElRef = ref(null);\n    const showTagsPopoverRef = ref(false);\n    const patternInputFocusedRef = ref(false);\n    const hoverRef = ref(false);\n    const themeRef = useTheme('InternalSelection', '-internal-selection', style, internalSelectionLight, props, toRef(props, 'clsPrefix'));\n    const mergedClearableRef = computed(() => {\n      return props.clearable && !props.disabled && (hoverRef.value || props.active);\n    });\n    const filterablePlaceholderRef = computed(() => {\n      return props.selectedOption ? props.renderTag ? props.renderTag({\n        option: props.selectedOption,\n        handleClose: () => {}\n      }) : props.renderLabel ? props.renderLabel(props.selectedOption, true) : render(props.selectedOption[props.labelField], props.selectedOption, true) : props.placeholder;\n    });\n    const labelRef = computed(() => {\n      const option = props.selectedOption;\n      if (!option) return undefined;\n      return option[props.labelField];\n    });\n    const selectedRef = computed(() => {\n      if (props.multiple) {\n        return !!(Array.isArray(props.selectedOptions) && props.selectedOptions.length);\n      } else {\n        return props.selectedOption !== null;\n      }\n    });\n    function syncMirrorWidth() {\n      var _a;\n      const {\n        value: patternInputMirrorEl\n      } = patternInputMirrorRef;\n      if (patternInputMirrorEl) {\n        const {\n          value: patternInputEl\n        } = patternInputRef;\n        if (patternInputEl) {\n          patternInputEl.style.width = `${patternInputMirrorEl.offsetWidth}px`;\n          if (props.maxTagCount !== 'responsive') {\n            (_a = overflowRef.value) === null || _a === void 0 ? void 0 : _a.sync({\n              showAllItemsBeforeCalculate: false\n            });\n          }\n        }\n      }\n    }\n    function hideInputTag() {\n      const {\n        value: inputTagEl\n      } = inputTagElRef;\n      if (inputTagEl) inputTagEl.style.display = 'none';\n    }\n    function showInputTag() {\n      const {\n        value: inputTagEl\n      } = inputTagElRef;\n      if (inputTagEl) inputTagEl.style.display = 'inline-block';\n    }\n    watch(toRef(props, 'active'), value => {\n      if (!value) hideInputTag();\n    });\n    watch(toRef(props, 'pattern'), () => {\n      if (props.multiple) {\n        void nextTick(syncMirrorWidth);\n      }\n    });\n    function doFocus(e) {\n      const {\n        onFocus\n      } = props;\n      if (onFocus) onFocus(e);\n    }\n    function doBlur(e) {\n      const {\n        onBlur\n      } = props;\n      if (onBlur) onBlur(e);\n    }\n    function doDeleteOption(value) {\n      const {\n        onDeleteOption\n      } = props;\n      if (onDeleteOption) onDeleteOption(value);\n    }\n    function doClear(e) {\n      const {\n        onClear\n      } = props;\n      if (onClear) onClear(e);\n    }\n    function doPatternInput(value) {\n      const {\n        onPatternInput\n      } = props;\n      if (onPatternInput) onPatternInput(value);\n    }\n    function handleFocusin(e) {\n      var _a;\n      if (!e.relatedTarget || !((_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.contains(e.relatedTarget))) {\n        doFocus(e);\n      }\n    }\n    function handleFocusout(e) {\n      var _a;\n      if ((_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.contains(e.relatedTarget)) return;\n      doBlur(e);\n    }\n    function handleClear(e) {\n      doClear(e);\n    }\n    function handleMouseEnter() {\n      hoverRef.value = true;\n    }\n    function handleMouseLeave() {\n      hoverRef.value = false;\n    }\n    function handleMouseDown(e) {\n      if (!props.active || !props.filterable) return;\n      if (e.target === patternInputRef.value) return;\n      e.preventDefault();\n    }\n    function handleDeleteOption(option) {\n      doDeleteOption(option);\n    }\n    function handlePatternKeyDown(e) {\n      if (e.key === 'Backspace' && !isComposingRef.value) {\n        if (!props.pattern.length) {\n          const {\n            selectedOptions\n          } = props;\n          if (selectedOptions === null || selectedOptions === void 0 ? void 0 : selectedOptions.length) {\n            handleDeleteOption(selectedOptions[selectedOptions.length - 1]);\n          }\n        }\n      }\n    }\n    const isComposingRef = ref(false);\n    // the composition end is later than its input so we can cached the event\n    // and return the input event\n    let cachedInputEvent = null;\n    function handlePatternInputInput(e) {\n      // we should sync mirror width here\n      const {\n        value: patternInputMirrorEl\n      } = patternInputMirrorRef;\n      if (patternInputMirrorEl) {\n        const inputText = e.target.value;\n        patternInputMirrorEl.textContent = inputText;\n        syncMirrorWidth();\n      }\n      if (props.ignoreComposition) {\n        if (!isComposingRef.value) {\n          doPatternInput(e);\n        } else {\n          cachedInputEvent = e;\n        }\n      } else {\n        doPatternInput(e);\n      }\n    }\n    function handleCompositionStart() {\n      isComposingRef.value = true;\n    }\n    function handleCompositionEnd() {\n      isComposingRef.value = false;\n      if (props.ignoreComposition) {\n        doPatternInput(cachedInputEvent);\n      }\n      cachedInputEvent = null;\n    }\n    function handlePatternInputFocus(e) {\n      var _a;\n      patternInputFocusedRef.value = true;\n      (_a = props.onPatternFocus) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    }\n    function handlePatternInputBlur(e) {\n      var _a;\n      patternInputFocusedRef.value = false;\n      (_a = props.onPatternBlur) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    }\n    function blur() {\n      var _a, _b;\n      if (props.filterable) {\n        patternInputFocusedRef.value = false;\n        (_a = patternInputWrapperRef.value) === null || _a === void 0 ? void 0 : _a.blur();\n        (_b = patternInputRef.value) === null || _b === void 0 ? void 0 : _b.blur();\n      } else if (props.multiple) {\n        const {\n          value: multipleEl\n        } = multipleElRef;\n        multipleEl === null || multipleEl === void 0 ? void 0 : multipleEl.blur();\n      } else {\n        const {\n          value: singleEl\n        } = singleElRef;\n        singleEl === null || singleEl === void 0 ? void 0 : singleEl.blur();\n      }\n    }\n    function focus() {\n      var _a, _b, _c;\n      if (props.filterable) {\n        patternInputFocusedRef.value = false;\n        (_a = patternInputWrapperRef.value) === null || _a === void 0 ? void 0 : _a.focus();\n      } else if (props.multiple) {\n        (_b = multipleElRef.value) === null || _b === void 0 ? void 0 : _b.focus();\n      } else {\n        (_c = singleElRef.value) === null || _c === void 0 ? void 0 : _c.focus();\n      }\n    }\n    function focusInput() {\n      const {\n        value: patternInputEl\n      } = patternInputRef;\n      if (patternInputEl) {\n        showInputTag();\n        patternInputEl.focus();\n      }\n    }\n    function blurInput() {\n      const {\n        value: patternInputEl\n      } = patternInputRef;\n      if (patternInputEl) {\n        patternInputEl.blur();\n      }\n    }\n    function updateCounter(count) {\n      const {\n        value\n      } = counterRef;\n      if (value) {\n        value.setTextContent(`+${count}`);\n      }\n    }\n    function getCounter() {\n      const {\n        value\n      } = counterWrapperRef;\n      return value;\n    }\n    function getTail() {\n      return patternInputRef.value;\n    }\n    let enterTimerId = null;\n    function clearEnterTimer() {\n      if (enterTimerId !== null) window.clearTimeout(enterTimerId);\n    }\n    function handleMouseEnterCounter() {\n      if (props.active) return;\n      clearEnterTimer();\n      enterTimerId = window.setTimeout(() => {\n        if (selectedRef.value) {\n          showTagsPopoverRef.value = true;\n        }\n      }, 100);\n    }\n    function handleMouseLeaveCounter() {\n      clearEnterTimer();\n    }\n    function onPopoverUpdateShow(show) {\n      if (!show) {\n        clearEnterTimer();\n        showTagsPopoverRef.value = false;\n      }\n    }\n    watch(selectedRef, value => {\n      if (!value) {\n        showTagsPopoverRef.value = false;\n      }\n    });\n    onMounted(() => {\n      watchEffect(() => {\n        const patternInputWrapperEl = patternInputWrapperRef.value;\n        if (!patternInputWrapperEl) return;\n        if (props.disabled) {\n          patternInputWrapperEl.removeAttribute('tabindex');\n        } else {\n          patternInputWrapperEl.tabIndex = patternInputFocusedRef.value ? -1 : 0;\n        }\n      });\n    });\n    useOnResize(selfRef, props.onResize);\n    const {\n      inlineThemeDisabled\n    } = props;\n    const cssVarsRef = computed(() => {\n      const {\n        size\n      } = props;\n      const {\n        common: {\n          cubicBezierEaseInOut\n        },\n        self: {\n          borderRadius,\n          color,\n          placeholderColor,\n          textColor,\n          paddingSingle,\n          paddingMultiple,\n          caretColor,\n          colorDisabled,\n          textColorDisabled,\n          placeholderColorDisabled,\n          colorActive,\n          boxShadowFocus,\n          boxShadowActive,\n          boxShadowHover,\n          border,\n          borderFocus,\n          borderHover,\n          borderActive,\n          arrowColor,\n          arrowColorDisabled,\n          loadingColor,\n          // form warning\n          colorActiveWarning,\n          boxShadowFocusWarning,\n          boxShadowActiveWarning,\n          boxShadowHoverWarning,\n          borderWarning,\n          borderFocusWarning,\n          borderHoverWarning,\n          borderActiveWarning,\n          // form error\n          colorActiveError,\n          boxShadowFocusError,\n          boxShadowActiveError,\n          boxShadowHoverError,\n          borderError,\n          borderFocusError,\n          borderHoverError,\n          borderActiveError,\n          // clear\n          clearColor,\n          clearColorHover,\n          clearColorPressed,\n          clearSize,\n          // arrow\n          arrowSize,\n          [createKey('height', size)]: height,\n          [createKey('fontSize', size)]: fontSize\n        }\n      } = themeRef.value;\n      const paddingSingleDiscrete = getPadding(paddingSingle);\n      const paddingMultipleDiscrete = getPadding(paddingMultiple);\n      return {\n        '--n-bezier': cubicBezierEaseInOut,\n        '--n-border': border,\n        '--n-border-active': borderActive,\n        '--n-border-focus': borderFocus,\n        '--n-border-hover': borderHover,\n        '--n-border-radius': borderRadius,\n        '--n-box-shadow-active': boxShadowActive,\n        '--n-box-shadow-focus': boxShadowFocus,\n        '--n-box-shadow-hover': boxShadowHover,\n        '--n-caret-color': caretColor,\n        '--n-color': color,\n        '--n-color-active': colorActive,\n        '--n-color-disabled': colorDisabled,\n        '--n-font-size': fontSize,\n        '--n-height': height,\n        '--n-padding-single-top': paddingSingleDiscrete.top,\n        '--n-padding-multiple-top': paddingMultipleDiscrete.top,\n        '--n-padding-single-right': paddingSingleDiscrete.right,\n        '--n-padding-multiple-right': paddingMultipleDiscrete.right,\n        '--n-padding-single-left': paddingSingleDiscrete.left,\n        '--n-padding-multiple-left': paddingMultipleDiscrete.left,\n        '--n-padding-single-bottom': paddingSingleDiscrete.bottom,\n        '--n-padding-multiple-bottom': paddingMultipleDiscrete.bottom,\n        '--n-placeholder-color': placeholderColor,\n        '--n-placeholder-color-disabled': placeholderColorDisabled,\n        '--n-text-color': textColor,\n        '--n-text-color-disabled': textColorDisabled,\n        '--n-arrow-color': arrowColor,\n        '--n-arrow-color-disabled': arrowColorDisabled,\n        '--n-loading-color': loadingColor,\n        // form warning\n        '--n-color-active-warning': colorActiveWarning,\n        '--n-box-shadow-focus-warning': boxShadowFocusWarning,\n        '--n-box-shadow-active-warning': boxShadowActiveWarning,\n        '--n-box-shadow-hover-warning': boxShadowHoverWarning,\n        '--n-border-warning': borderWarning,\n        '--n-border-focus-warning': borderFocusWarning,\n        '--n-border-hover-warning': borderHoverWarning,\n        '--n-border-active-warning': borderActiveWarning,\n        // form error\n        '--n-color-active-error': colorActiveError,\n        '--n-box-shadow-focus-error': boxShadowFocusError,\n        '--n-box-shadow-active-error': boxShadowActiveError,\n        '--n-box-shadow-hover-error': boxShadowHoverError,\n        '--n-border-error': borderError,\n        '--n-border-focus-error': borderFocusError,\n        '--n-border-hover-error': borderHoverError,\n        '--n-border-active-error': borderActiveError,\n        // clear\n        '--n-clear-size': clearSize,\n        '--n-clear-color': clearColor,\n        '--n-clear-color-hover': clearColorHover,\n        '--n-clear-color-pressed': clearColorPressed,\n        // arrow-size\n        '--n-arrow-size': arrowSize\n      };\n    });\n    const themeClassHandle = inlineThemeDisabled ? useThemeClass('internal-selection', computed(() => {\n      return props.size[0];\n    }), cssVarsRef, props) : undefined;\n    return {\n      mergedTheme: themeRef,\n      mergedClearable: mergedClearableRef,\n      mergedClsPrefix: mergedClsPrefixRef,\n      rtlEnabled: rtlEnabledRef,\n      patternInputFocused: patternInputFocusedRef,\n      filterablePlaceholder: filterablePlaceholderRef,\n      label: labelRef,\n      selected: selectedRef,\n      showTagsPanel: showTagsPopoverRef,\n      isComposing: isComposingRef,\n      // dom ref\n      counterRef,\n      counterWrapperRef,\n      patternInputMirrorRef,\n      patternInputRef,\n      selfRef,\n      multipleElRef,\n      singleElRef,\n      patternInputWrapperRef,\n      overflowRef,\n      inputTagElRef,\n      handleMouseDown,\n      handleFocusin,\n      handleClear,\n      handleMouseEnter,\n      handleMouseLeave,\n      handleDeleteOption,\n      handlePatternKeyDown,\n      handlePatternInputInput,\n      handlePatternInputBlur,\n      handlePatternInputFocus,\n      handleMouseEnterCounter,\n      handleMouseLeaveCounter,\n      handleFocusout,\n      handleCompositionEnd,\n      handleCompositionStart,\n      onPopoverUpdateShow,\n      focus,\n      focusInput,\n      blur,\n      blurInput,\n      updateCounter,\n      getCounter,\n      getTail,\n      renderLabel: props.renderLabel,\n      cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n      themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n      onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender\n    };\n  },\n  render() {\n    const {\n      status,\n      multiple,\n      size,\n      disabled,\n      filterable,\n      maxTagCount,\n      bordered,\n      clsPrefix,\n      ellipsisTagPopoverProps,\n      onRender,\n      renderTag,\n      renderLabel\n    } = this;\n    onRender === null || onRender === void 0 ? void 0 : onRender();\n    const maxTagCountResponsive = maxTagCount === 'responsive';\n    const maxTagCountNumeric = typeof maxTagCount === 'number';\n    const useMaxTagCount = maxTagCountResponsive || maxTagCountNumeric;\n    const suffix = h(Wrapper, null, {\n      default: () => h(Suffix, {\n        clsPrefix: clsPrefix,\n        loading: this.loading,\n        showArrow: this.showArrow,\n        showClear: this.mergedClearable && this.selected,\n        onClear: this.handleClear\n      }, {\n        default: () => {\n          var _a, _b;\n          return (_b = (_a = this.$slots).arrow) === null || _b === void 0 ? void 0 : _b.call(_a);\n        }\n      })\n    });\n    let body;\n    if (multiple) {\n      const {\n        labelField\n      } = this;\n      const createTag = option => h(\"div\", {\n        class: `${clsPrefix}-base-selection-tag-wrapper`,\n        key: option.value\n      }, renderTag ? renderTag({\n        option,\n        handleClose: () => {\n          this.handleDeleteOption(option);\n        }\n      }) : h(NTag, {\n        size: size,\n        closable: !option.disabled,\n        disabled: disabled,\n        onClose: () => {\n          this.handleDeleteOption(option);\n        },\n        internalCloseIsButtonTag: false,\n        internalCloseFocusable: false\n      }, {\n        default: () => renderLabel ? renderLabel(option, true) : render(option[labelField], option, true)\n      }));\n      const createOriginalTagNodes = () => (maxTagCountNumeric ? this.selectedOptions.slice(0, maxTagCount) : this.selectedOptions).map(createTag);\n      const input = filterable ? h(\"div\", {\n        class: `${clsPrefix}-base-selection-input-tag`,\n        ref: \"inputTagElRef\",\n        key: \"__input-tag__\"\n      }, h(\"input\", Object.assign({}, this.inputProps, {\n        ref: \"patternInputRef\",\n        tabindex: -1,\n        disabled: disabled,\n        value: this.pattern,\n        autofocus: this.autofocus,\n        class: `${clsPrefix}-base-selection-input-tag__input`,\n        onBlur: this.handlePatternInputBlur,\n        onFocus: this.handlePatternInputFocus,\n        onKeydown: this.handlePatternKeyDown,\n        onInput: this.handlePatternInputInput,\n        onCompositionstart: this.handleCompositionStart,\n        onCompositionend: this.handleCompositionEnd\n      })), h(\"span\", {\n        ref: \"patternInputMirrorRef\",\n        class: `${clsPrefix}-base-selection-input-tag__mirror`\n      }, this.pattern)) : null;\n      // May Overflow\n      const renderCounter = maxTagCountResponsive ? () => h(\"div\", {\n        class: `${clsPrefix}-base-selection-tag-wrapper`,\n        ref: \"counterWrapperRef\"\n      }, h(NTag, {\n        size: size,\n        ref: \"counterRef\",\n        onMouseenter: this.handleMouseEnterCounter,\n        onMouseleave: this.handleMouseLeaveCounter,\n        disabled: disabled\n      })) : undefined;\n      let counter;\n      if (maxTagCountNumeric) {\n        const rest = this.selectedOptions.length - maxTagCount;\n        if (rest > 0) {\n          counter = h(\"div\", {\n            class: `${clsPrefix}-base-selection-tag-wrapper`,\n            key: \"__counter__\"\n          }, h(NTag, {\n            size: size,\n            ref: \"counterRef\",\n            onMouseenter: this.handleMouseEnterCounter,\n            disabled: disabled\n          }, {\n            default: () => `+${rest}`\n          }));\n        }\n      }\n      const tags = maxTagCountResponsive ? filterable ? h(VOverflow, {\n        ref: \"overflowRef\",\n        updateCounter: this.updateCounter,\n        getCounter: this.getCounter,\n        getTail: this.getTail,\n        style: {\n          width: '100%',\n          display: 'flex',\n          overflow: 'hidden'\n        }\n      }, {\n        default: createOriginalTagNodes,\n        counter: renderCounter,\n        tail: () => input\n      }) : h(VOverflow, {\n        ref: \"overflowRef\",\n        updateCounter: this.updateCounter,\n        getCounter: this.getCounter,\n        style: {\n          width: '100%',\n          display: 'flex',\n          overflow: 'hidden'\n        }\n      }, {\n        default: createOriginalTagNodes,\n        counter: renderCounter\n      }) : maxTagCountNumeric && counter ? createOriginalTagNodes().concat(counter) : createOriginalTagNodes();\n      const renderPopover = useMaxTagCount ? () => h(\"div\", {\n        class: `${clsPrefix}-base-selection-popover`\n      }, maxTagCountResponsive ? createOriginalTagNodes() : this.selectedOptions.map(createTag)) : undefined;\n      const popoverProps = useMaxTagCount ? Object.assign({\n        show: this.showTagsPanel,\n        trigger: 'hover',\n        overlap: true,\n        placement: 'top',\n        width: 'trigger',\n        onUpdateShow: this.onPopoverUpdateShow,\n        theme: this.mergedTheme.peers.Popover,\n        themeOverrides: this.mergedTheme.peerOverrides.Popover\n      }, ellipsisTagPopoverProps) : null;\n      const showPlaceholder = this.selected ? false : this.active ? !this.pattern && !this.isComposing : true;\n      const placeholder = showPlaceholder ? h(\"div\", {\n        class: `${clsPrefix}-base-selection-placeholder ${clsPrefix}-base-selection-overlay`\n      }, h(\"div\", {\n        class: `${clsPrefix}-base-selection-placeholder__inner`\n      }, this.placeholder)) : null;\n      const popoverTrigger = filterable ? h(\"div\", {\n        ref: \"patternInputWrapperRef\",\n        class: `${clsPrefix}-base-selection-tags`\n      }, tags, maxTagCountResponsive ? null : input, suffix) : h(\"div\", {\n        ref: \"multipleElRef\",\n        class: `${clsPrefix}-base-selection-tags`,\n        tabindex: disabled ? undefined : 0\n      }, tags, suffix);\n      body = h(Fragment, null, useMaxTagCount ? h(NPopover, Object.assign({}, popoverProps, {\n        scrollable: true,\n        style: \"max-height: calc(var(--v-target-height) * 6.6);\"\n      }), {\n        trigger: () => popoverTrigger,\n        default: renderPopover\n      }) : popoverTrigger, placeholder);\n    } else {\n      if (filterable) {\n        const hasInput = this.pattern || this.isComposing;\n        const showPlaceholder = this.active ? !hasInput : !this.selected;\n        const showSelectedLabel = this.active ? false : this.selected;\n        body = h(\"div\", {\n          ref: \"patternInputWrapperRef\",\n          class: `${clsPrefix}-base-selection-label`,\n          title: this.patternInputFocused ? undefined : getTitleAttribute(this.label)\n        }, h(\"input\", Object.assign({}, this.inputProps, {\n          ref: \"patternInputRef\",\n          class: `${clsPrefix}-base-selection-input`,\n          value: this.active ? this.pattern : '',\n          placeholder: \"\",\n          readonly: disabled,\n          disabled: disabled,\n          tabindex: -1,\n          autofocus: this.autofocus,\n          onFocus: this.handlePatternInputFocus,\n          onBlur: this.handlePatternInputBlur,\n          onInput: this.handlePatternInputInput,\n          onCompositionstart: this.handleCompositionStart,\n          onCompositionend: this.handleCompositionEnd\n        })), showSelectedLabel ? h(\"div\", {\n          class: `${clsPrefix}-base-selection-label__render-label ${clsPrefix}-base-selection-overlay`,\n          key: \"input\"\n        }, h(\"div\", {\n          class: `${clsPrefix}-base-selection-overlay__wrapper`\n        }, renderTag ? renderTag({\n          option: this.selectedOption,\n          handleClose: () => {}\n        }) : renderLabel ? renderLabel(this.selectedOption, true) : render(this.label, this.selectedOption, true))) : null, showPlaceholder ? h(\"div\", {\n          class: `${clsPrefix}-base-selection-placeholder ${clsPrefix}-base-selection-overlay`,\n          key: \"placeholder\"\n        }, h(\"div\", {\n          class: `${clsPrefix}-base-selection-overlay__wrapper`\n        }, this.filterablePlaceholder)) : null, suffix);\n      } else {\n        body = h(\"div\", {\n          ref: \"singleElRef\",\n          class: `${clsPrefix}-base-selection-label`,\n          tabindex: this.disabled ? undefined : 0\n        }, this.label !== undefined ? h(\"div\", {\n          class: `${clsPrefix}-base-selection-input`,\n          title: getTitleAttribute(this.label),\n          key: \"input\"\n        }, h(\"div\", {\n          class: `${clsPrefix}-base-selection-input__content`\n        }, renderTag ? renderTag({\n          option: this.selectedOption,\n          handleClose: () => {}\n        }) : renderLabel ? renderLabel(this.selectedOption, true) : render(this.label, this.selectedOption, true))) : h(\"div\", {\n          class: `${clsPrefix}-base-selection-placeholder ${clsPrefix}-base-selection-overlay`,\n          key: \"placeholder\"\n        }, h(\"div\", {\n          class: `${clsPrefix}-base-selection-placeholder__inner`\n        }, this.placeholder)), suffix);\n      }\n    }\n    return h(\"div\", {\n      ref: \"selfRef\",\n      class: [`${clsPrefix}-base-selection`, this.rtlEnabled && `${clsPrefix}-base-selection--rtl`, this.themeClass, status && `${clsPrefix}-base-selection--${status}-status`, {\n        [`${clsPrefix}-base-selection--active`]: this.active,\n        [`${clsPrefix}-base-selection--selected`]: this.selected || this.active && this.pattern,\n        [`${clsPrefix}-base-selection--disabled`]: this.disabled,\n        [`${clsPrefix}-base-selection--multiple`]: this.multiple,\n        // focus is not controlled by selection itself since it always need\n        // to be managed together with menu. provide :focus style will cause\n        // many redundant codes.\n        [`${clsPrefix}-base-selection--focus`]: this.focused\n      }],\n      style: this.cssVars,\n      onClick: this.onClick,\n      onMouseenter: this.handleMouseEnter,\n      onMouseleave: this.handleMouseLeave,\n      onKeydown: this.onKeydown,\n      onFocusin: this.handleFocusin,\n      onFocusout: this.handleFocusout,\n      onMousedown: this.handleMouseDown\n    }, body, bordered ? h(\"div\", {\n      class: `${clsPrefix}-base-selection__border`\n    }) : null, bordered ? h(\"div\", {\n      class: `${clsPrefix}-base-selection__state-border`\n    }) : null);\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}