{"ast":null,"code":"import { ref, computed, inject, watch } from 'vue';\nimport { addMonths, addYears, isSameMonth, getTime, format, set, getYear, getMonth, getDate, isValid, startOfDay, startOfSecond, startOfMonth, startOfYear, startOfQuarter, startOfWeek, setQuarter, setYear, setMonth } from \"date-fns/esm/index.js\";\nimport { getDefaultTime, dateArray, monthArray, strictParse, yearArray, quarterArray } from \"../utils.mjs\";\nimport { datePickerInjectionKey } from \"../interface.mjs\";\nimport { usePanelCommon, usePanelCommonProps } from \"./use-panel-common.mjs\";\nimport { MONTH_ITEM_HEIGHT, START_YEAR } from \"../config.mjs\";\nconst useCalendarProps = Object.assign(Object.assign({}, usePanelCommonProps), {\n  defaultCalendarStartTime: Number,\n  actions: {\n    type: Array,\n    default: () => ['now', 'clear', 'confirm']\n  }\n});\n// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\nfunction useCalendar(props, type) {\n  var _a;\n  const panelCommon = usePanelCommon(props);\n  const {\n    isValueInvalidRef,\n    isDateDisabledRef,\n    isDateInvalidRef,\n    isTimeInvalidRef,\n    isDateTimeInvalidRef,\n    isHourDisabledRef,\n    isMinuteDisabledRef,\n    isSecondDisabledRef,\n    localeRef,\n    firstDayOfWeekRef,\n    datePickerSlots,\n    yearFormatRef,\n    monthFormatRef,\n    quarterFormatRef\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  } = inject(datePickerInjectionKey);\n  const validation = {\n    isValueInvalid: isValueInvalidRef,\n    isDateDisabled: isDateDisabledRef,\n    isDateInvalid: isDateInvalidRef,\n    isTimeInvalid: isTimeInvalidRef,\n    isDateTimeInvalid: isDateTimeInvalidRef,\n    isHourDisabled: isHourDisabledRef,\n    isMinuteDisabled: isMinuteDisabledRef,\n    isSecondDisabled: isSecondDisabledRef\n  };\n  const mergedDateFormatRef = computed(() => props.dateFormat || localeRef.value.dateFormat);\n  const dateInputValueRef = ref(props.value === null || Array.isArray(props.value) ? '' : format(props.value, mergedDateFormatRef.value));\n  const calendarValueRef = ref(props.value === null || Array.isArray(props.value) ? (_a = props.defaultCalendarStartTime) !== null && _a !== void 0 ? _a : Date.now() : props.value);\n  const yearVlRef = ref(null);\n  const yearScrollbarRef = ref(null);\n  const monthScrollbarRef = ref(null);\n  const nowRef = ref(Date.now());\n  const dateArrayRef = computed(() => {\n    var _a;\n    return dateArray(calendarValueRef.value, props.value, nowRef.value, (_a = firstDayOfWeekRef.value) !== null && _a !== void 0 ? _a : localeRef.value.firstDayOfWeek, false, type === 'week');\n  });\n  const monthArrayRef = computed(() => {\n    const {\n      value\n    } = props;\n    return monthArray(calendarValueRef.value, Array.isArray(value) ? null : value, nowRef.value, {\n      monthFormat: monthFormatRef.value\n    });\n  });\n  const yearArrayRef = computed(() => {\n    const {\n      value\n    } = props;\n    return yearArray(Array.isArray(value) ? null : value, nowRef.value, {\n      yearFormat: yearFormatRef.value\n    });\n  });\n  const quarterArrayRef = computed(() => {\n    const {\n      value\n    } = props;\n    return quarterArray(calendarValueRef.value, Array.isArray(value) ? null : value, nowRef.value, {\n      quarterFormat: quarterFormatRef.value\n    });\n  });\n  const weekdaysRef = computed(() => {\n    return dateArrayRef.value.slice(0, 7).map(dateItem => {\n      const {\n        ts\n      } = dateItem;\n      return format(ts, localeRef.value.dayFormat, panelCommon.dateFnsOptions.value);\n    });\n  });\n  const calendarMonthRef = computed(() => {\n    return format(calendarValueRef.value, localeRef.value.monthFormat, panelCommon.dateFnsOptions.value);\n  });\n  const calendarYearRef = computed(() => {\n    return format(calendarValueRef.value, localeRef.value.yearFormat, panelCommon.dateFnsOptions.value);\n  });\n  watch(calendarValueRef, (value, oldValue) => {\n    if (type === 'date' || type === 'datetime') {\n      if (!isSameMonth(value, oldValue)) {\n        panelCommon.disableTransitionOneTick();\n      }\n    }\n  });\n  watch(computed(() => props.value), value => {\n    if (value !== null && !Array.isArray(value)) {\n      dateInputValueRef.value = format(value, mergedDateFormatRef.value, panelCommon.dateFnsOptions.value);\n      calendarValueRef.value = value;\n    } else {\n      dateInputValueRef.value = '';\n    }\n  });\n  function sanitizeValue(value) {\n    var _a;\n    if (type === 'datetime') return getTime(startOfSecond(value));\n    if (type === 'month') return getTime(startOfMonth(value));\n    if (type === 'year') return getTime(startOfYear(value));\n    if (type === 'quarter') return getTime(startOfQuarter(value));\n    if (type === 'week') {\n      // refer to makeWeekMatcher\n      const weekStartsOn = (((_a = firstDayOfWeekRef.value) !== null && _a !== void 0 ? _a : localeRef.value.firstDayOfWeek) + 1) % 7;\n      return getTime(startOfWeek(value, {\n        weekStartsOn\n      }));\n    }\n    return getTime(startOfDay(value));\n  }\n  function mergedIsDateDisabled(ts, detail) {\n    const {\n      isDateDisabled: {\n        value: isDateDisabled\n      }\n    } = validation;\n    if (!isDateDisabled) return false;\n    return isDateDisabled(ts, detail);\n  }\n  function handleDateInput(value) {\n    const date = strictParse(value, mergedDateFormatRef.value, new Date(), panelCommon.dateFnsOptions.value);\n    if (isValid(date)) {\n      if (props.value === null) {\n        panelCommon.doUpdateValue(getTime(sanitizeValue(Date.now())), props.panel);\n      } else if (!Array.isArray(props.value)) {\n        const newDateTime = set(props.value, {\n          year: getYear(date),\n          month: getMonth(date),\n          date: getDate(date)\n        });\n        panelCommon.doUpdateValue(getTime(sanitizeValue(getTime(newDateTime))), props.panel);\n      }\n    } else {\n      dateInputValueRef.value = value;\n    }\n  }\n  function handleDateInputBlur() {\n    const date = strictParse(dateInputValueRef.value, mergedDateFormatRef.value, new Date(), panelCommon.dateFnsOptions.value);\n    if (isValid(date)) {\n      if (props.value === null) {\n        panelCommon.doUpdateValue(getTime(sanitizeValue(Date.now())), false);\n      } else if (!Array.isArray(props.value)) {\n        const newDateTime = set(props.value, {\n          year: getYear(date),\n          month: getMonth(date),\n          date: getDate(date)\n        });\n        panelCommon.doUpdateValue(getTime(sanitizeValue(getTime(newDateTime))), false);\n      }\n    } else {\n      deriveDateInputValue();\n    }\n  }\n  function clearSelectedDateTime() {\n    panelCommon.doUpdateValue(null, true);\n    dateInputValueRef.value = '';\n    panelCommon.doClose(true);\n    panelCommon.handleClearClick();\n  }\n  function handleNowClick() {\n    panelCommon.doUpdateValue(getTime(sanitizeValue(Date.now())), true);\n    const now = Date.now();\n    calendarValueRef.value = now;\n    panelCommon.doClose(true);\n    if (props.panel && (type === 'month' || type === 'quarter' || type === 'year')) {\n      panelCommon.disableTransitionOneTick();\n      justifyColumnsScrollState(now);\n    }\n  }\n  const hoveredWeekRef = ref(null);\n  function handleDateMouseEnter(dateItem) {\n    if (dateItem.type === 'date' && type === 'week') {\n      hoveredWeekRef.value = sanitizeValue(getTime(dateItem.ts));\n    }\n  }\n  function isWeekHovered(dateItem) {\n    if (dateItem.type === 'date' && type === 'week') {\n      return sanitizeValue(getTime(dateItem.ts)) === hoveredWeekRef.value;\n    }\n    return false;\n  }\n  function handleDateClick(dateItem) {\n    if (mergedIsDateDisabled(dateItem.ts, dateItem.type === 'date' ? {\n      type: 'date',\n      year: dateItem.dateObject.year,\n      month: dateItem.dateObject.month,\n      date: dateItem.dateObject.date\n    } : dateItem.type === 'month' ? {\n      type: 'month',\n      year: dateItem.dateObject.year,\n      month: dateItem.dateObject.month\n    } : dateItem.type === 'year' ? {\n      type: 'year',\n      year: dateItem.dateObject.year\n    } : {\n      type: 'quarter',\n      year: dateItem.dateObject.year,\n      quarter: dateItem.dateObject.quarter\n    })) {\n      return;\n    }\n    let newValue;\n    if (props.value !== null && !Array.isArray(props.value)) {\n      newValue = props.value;\n    } else {\n      newValue = Date.now();\n    }\n    if (type === 'datetime' && props.defaultTime !== null && !Array.isArray(props.defaultTime)) {\n      const time = getDefaultTime(props.defaultTime);\n      if (time) {\n        newValue = getTime(set(newValue, time)); // setDate getTime(addMilliseconds(startOfDay(newValue), time))\n      }\n    }\n    newValue = getTime(dateItem.type === 'quarter' && dateItem.dateObject.quarter ? setQuarter(setYear(newValue, dateItem.dateObject.year), dateItem.dateObject.quarter) : set(newValue, dateItem.dateObject));\n    panelCommon.doUpdateValue(sanitizeValue(newValue), props.panel || type === 'date' || type === 'week' || type === 'year');\n    switch (type) {\n      case 'date':\n      case 'week':\n        panelCommon.doClose();\n        break;\n      case 'year':\n        if (props.panel) {\n          panelCommon.disableTransitionOneTick();\n        }\n        panelCommon.doClose();\n        break;\n      case 'month':\n        panelCommon.disableTransitionOneTick();\n        justifyColumnsScrollState(newValue);\n        break;\n      case 'quarter':\n        panelCommon.disableTransitionOneTick();\n        justifyColumnsScrollState(newValue);\n        break;\n    }\n  }\n  function handleQuickMonthClick(dateItem, updatePanelValue) {\n    let newValue;\n    if (props.value !== null && !Array.isArray(props.value)) {\n      newValue = props.value;\n    } else {\n      newValue = Date.now();\n    }\n    newValue = getTime(dateItem.type === 'month' ? setMonth(newValue, dateItem.dateObject.month) : setYear(newValue, dateItem.dateObject.year));\n    updatePanelValue(newValue);\n    justifyColumnsScrollState(newValue);\n  }\n  function onUpdateCalendarValue(value) {\n    calendarValueRef.value = value;\n  }\n  function deriveDateInputValue(time) {\n    // If not selected, display nothing,\n    // else update datetime related string\n    if (props.value === null || Array.isArray(props.value)) {\n      dateInputValueRef.value = '';\n      return;\n    }\n    if (time === undefined) {\n      time = props.value;\n    }\n    dateInputValueRef.value = format(time, mergedDateFormatRef.value, panelCommon.dateFnsOptions.value);\n  }\n  function handleConfirmClick() {\n    if (validation.isDateInvalid.value || validation.isTimeInvalid.value) {\n      return;\n    }\n    panelCommon.doConfirm();\n    closeCalendar();\n  }\n  function closeCalendar() {\n    if (props.active) {\n      panelCommon.doClose();\n    }\n  }\n  function nextYear() {\n    var _a;\n    calendarValueRef.value = getTime(addYears(calendarValueRef.value, 1));\n    (_a = props.onNextYear) === null || _a === void 0 ? void 0 : _a.call(props);\n  }\n  function prevYear() {\n    var _a;\n    calendarValueRef.value = getTime(addYears(calendarValueRef.value, -1));\n    (_a = props.onPrevYear) === null || _a === void 0 ? void 0 : _a.call(props);\n  }\n  function nextMonth() {\n    var _a;\n    calendarValueRef.value = getTime(addMonths(calendarValueRef.value, 1));\n    (_a = props.onNextMonth) === null || _a === void 0 ? void 0 : _a.call(props);\n  }\n  function prevMonth() {\n    var _a;\n    calendarValueRef.value = getTime(addMonths(calendarValueRef.value, -1));\n    (_a = props.onPrevMonth) === null || _a === void 0 ? void 0 : _a.call(props);\n  }\n  // For month type\n  function virtualListContainer() {\n    const {\n      value\n    } = yearVlRef;\n    return (value === null || value === void 0 ? void 0 : value.listElRef) || null;\n  }\n  // For month type\n  function virtualListContent() {\n    const {\n      value\n    } = yearVlRef;\n    return (value === null || value === void 0 ? void 0 : value.itemsElRef) || null;\n  }\n  // For month type\n  function handleVirtualListScroll(e) {\n    var _a;\n    (_a = yearScrollbarRef.value) === null || _a === void 0 ? void 0 : _a.sync();\n  }\n  function handleTimePickerChange(value) {\n    if (value === null) return;\n    panelCommon.doUpdateValue(value, props.panel);\n  }\n  function handleSingleShortcutMouseenter(shortcut) {\n    panelCommon.cachePendingValue();\n    const shortcutValue = panelCommon.getShortcutValue(shortcut);\n    if (typeof shortcutValue !== 'number') return;\n    panelCommon.doUpdateValue(shortcutValue, false);\n  }\n  function handleSingleShortcutClick(shortcut) {\n    const shortcutValue = panelCommon.getShortcutValue(shortcut);\n    if (typeof shortcutValue !== 'number') return;\n    panelCommon.doUpdateValue(shortcutValue, props.panel);\n    panelCommon.clearPendingValue();\n    handleConfirmClick();\n  }\n  function justifyColumnsScrollState(value) {\n    const {\n      value: mergedValue\n    } = props;\n    if (monthScrollbarRef.value) {\n      const monthIndex = value === undefined ? mergedValue === null ? getMonth(Date.now()) : getMonth(mergedValue) : getMonth(value);\n      monthScrollbarRef.value.scrollTo({\n        top: monthIndex * MONTH_ITEM_HEIGHT\n      });\n    }\n    if (yearVlRef.value) {\n      const yearIndex = (value === undefined ? mergedValue === null ? getYear(Date.now()) : getYear(mergedValue) : getYear(value)) - START_YEAR;\n      yearVlRef.value.scrollTo({\n        top: yearIndex * MONTH_ITEM_HEIGHT\n      });\n    }\n  }\n  const childComponentRefs = {\n    monthScrollbarRef,\n    yearScrollbarRef,\n    yearVlRef\n  };\n  return Object.assign(Object.assign(Object.assign(Object.assign({\n    dateArray: dateArrayRef,\n    monthArray: monthArrayRef,\n    yearArray: yearArrayRef,\n    quarterArray: quarterArrayRef,\n    calendarYear: calendarYearRef,\n    calendarMonth: calendarMonthRef,\n    weekdays: weekdaysRef,\n    mergedIsDateDisabled,\n    nextYear,\n    prevYear,\n    nextMonth,\n    prevMonth,\n    handleNowClick,\n    handleConfirmClick,\n    handleSingleShortcutMouseenter,\n    handleSingleShortcutClick\n  }, validation), panelCommon), childComponentRefs), {\n    // datetime only\n    handleDateClick,\n    handleDateInputBlur,\n    handleDateInput,\n    handleDateMouseEnter,\n    isWeekHovered,\n    handleTimePickerChange,\n    clearSelectedDateTime,\n    virtualListContainer,\n    virtualListContent,\n    handleVirtualListScroll,\n    timePickerSize: panelCommon.timePickerSize,\n    dateInputValue: dateInputValueRef,\n    datePickerSlots,\n    handleQuickMonthClick,\n    justifyColumnsScrollState,\n    calendarValue: calendarValueRef,\n    onUpdateCalendarValue\n  });\n}\nexport { useCalendar, useCalendarProps };","map":{"version":3,"names":["ref","computed","inject","watch","addMonths","addYears","isSameMonth","getTime","format","set","getYear","getMonth","getDate","isValid","startOfDay","startOfSecond","startOfMonth","startOfYear","startOfQuarter","startOfWeek","setQuarter","setYear","setMonth","getDefaultTime","dateArray","monthArray","strictParse","yearArray","quarterArray","datePickerInjectionKey","usePanelCommon","usePanelCommonProps","MONTH_ITEM_HEIGHT","START_YEAR","useCalendarProps","Object","assign","defaultCalendarStartTime","Number","actions","type","Array","default","useCalendar","props","_a","panelCommon","isValueInvalidRef","isDateDisabledRef","isDateInvalidRef","isTimeInvalidRef","isDateTimeInvalidRef","isHourDisabledRef","isMinuteDisabledRef","isSecondDisabledRef","localeRef","firstDayOfWeekRef","datePickerSlots","yearFormatRef","monthFormatRef","quarterFormatRef","validation","isValueInvalid","isDateDisabled","isDateInvalid","isTimeInvalid","isDateTimeInvalid","isHourDisabled","isMinuteDisabled","isSecondDisabled","mergedDateFormatRef","dateFormat","value","dateInputValueRef","isArray","calendarValueRef","Date","now","yearVlRef","yearScrollbarRef","monthScrollbarRef","nowRef","dateArrayRef","firstDayOfWeek","monthArrayRef","monthFormat","yearArrayRef","yearFormat","quarterArrayRef","quarterFormat","weekdaysRef","slice","map","dateItem","ts","dayFormat","dateFnsOptions","calendarMonthRef","calendarYearRef","oldValue","disableTransitionOneTick","sanitizeValue","weekStartsOn","mergedIsDateDisabled","detail","handleDateInput","date","doUpdateValue","panel","newDateTime","year","month","handleDateInputBlur","deriveDateInputValue","clearSelectedDateTime","doClose","handleClearClick","handleNowClick","justifyColumnsScrollState","hoveredWeekRef","handleDateMouseEnter","isWeekHovered","handleDateClick","dateObject","quarter","newValue","defaultTime","time","handleQuickMonthClick","updatePanelValue","onUpdateCalendarValue","undefined","handleConfirmClick","doConfirm","closeCalendar","active","nextYear","onNextYear","call","prevYear","onPrevYear","nextMonth","onNextMonth","prevMonth","onPrevMonth","virtualListContainer","listElRef","virtualListContent","itemsElRef","handleVirtualListScroll","e","sync","handleTimePickerChange","handleSingleShortcutMouseenter","shortcut","cachePendingValue","shortcutValue","getShortcutValue","handleSingleShortcutClick","clearPendingValue","mergedValue","monthIndex","scrollTo","top","yearIndex","childComponentRefs","calendarYear","calendarMonth","weekdays","timePickerSize","dateInputValue","calendarValue"],"sources":["/Users/wangjohnson/ai_marketing/frontend/node_modules/naive-ui/es/date-picker/src/panel/use-calendar.mjs"],"sourcesContent":["import { ref, computed, inject, watch } from 'vue';\nimport { addMonths, addYears, isSameMonth, getTime, format, set, getYear, getMonth, getDate, isValid, startOfDay, startOfSecond, startOfMonth, startOfYear, startOfQuarter, startOfWeek, setQuarter, setYear, setMonth } from \"date-fns/esm/index.js\";\nimport { getDefaultTime, dateArray, monthArray, strictParse, yearArray, quarterArray } from \"../utils.mjs\";\nimport { datePickerInjectionKey } from \"../interface.mjs\";\nimport { usePanelCommon, usePanelCommonProps } from \"./use-panel-common.mjs\";\nimport { MONTH_ITEM_HEIGHT, START_YEAR } from \"../config.mjs\";\nconst useCalendarProps = Object.assign(Object.assign({}, usePanelCommonProps), {\n  defaultCalendarStartTime: Number,\n  actions: {\n    type: Array,\n    default: () => ['now', 'clear', 'confirm']\n  }\n});\n// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\nfunction useCalendar(props, type) {\n  var _a;\n  const panelCommon = usePanelCommon(props);\n  const {\n    isValueInvalidRef,\n    isDateDisabledRef,\n    isDateInvalidRef,\n    isTimeInvalidRef,\n    isDateTimeInvalidRef,\n    isHourDisabledRef,\n    isMinuteDisabledRef,\n    isSecondDisabledRef,\n    localeRef,\n    firstDayOfWeekRef,\n    datePickerSlots,\n    yearFormatRef,\n    monthFormatRef,\n    quarterFormatRef\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  } = inject(datePickerInjectionKey);\n  const validation = {\n    isValueInvalid: isValueInvalidRef,\n    isDateDisabled: isDateDisabledRef,\n    isDateInvalid: isDateInvalidRef,\n    isTimeInvalid: isTimeInvalidRef,\n    isDateTimeInvalid: isDateTimeInvalidRef,\n    isHourDisabled: isHourDisabledRef,\n    isMinuteDisabled: isMinuteDisabledRef,\n    isSecondDisabled: isSecondDisabledRef\n  };\n  const mergedDateFormatRef = computed(() => props.dateFormat || localeRef.value.dateFormat);\n  const dateInputValueRef = ref(props.value === null || Array.isArray(props.value) ? '' : format(props.value, mergedDateFormatRef.value));\n  const calendarValueRef = ref(props.value === null || Array.isArray(props.value) ? (_a = props.defaultCalendarStartTime) !== null && _a !== void 0 ? _a : Date.now() : props.value);\n  const yearVlRef = ref(null);\n  const yearScrollbarRef = ref(null);\n  const monthScrollbarRef = ref(null);\n  const nowRef = ref(Date.now());\n  const dateArrayRef = computed(() => {\n    var _a;\n    return dateArray(calendarValueRef.value, props.value, nowRef.value, (_a = firstDayOfWeekRef.value) !== null && _a !== void 0 ? _a : localeRef.value.firstDayOfWeek, false, type === 'week');\n  });\n  const monthArrayRef = computed(() => {\n    const {\n      value\n    } = props;\n    return monthArray(calendarValueRef.value, Array.isArray(value) ? null : value, nowRef.value, {\n      monthFormat: monthFormatRef.value\n    });\n  });\n  const yearArrayRef = computed(() => {\n    const {\n      value\n    } = props;\n    return yearArray(Array.isArray(value) ? null : value, nowRef.value, {\n      yearFormat: yearFormatRef.value\n    });\n  });\n  const quarterArrayRef = computed(() => {\n    const {\n      value\n    } = props;\n    return quarterArray(calendarValueRef.value, Array.isArray(value) ? null : value, nowRef.value, {\n      quarterFormat: quarterFormatRef.value\n    });\n  });\n  const weekdaysRef = computed(() => {\n    return dateArrayRef.value.slice(0, 7).map(dateItem => {\n      const {\n        ts\n      } = dateItem;\n      return format(ts, localeRef.value.dayFormat, panelCommon.dateFnsOptions.value);\n    });\n  });\n  const calendarMonthRef = computed(() => {\n    return format(calendarValueRef.value, localeRef.value.monthFormat, panelCommon.dateFnsOptions.value);\n  });\n  const calendarYearRef = computed(() => {\n    return format(calendarValueRef.value, localeRef.value.yearFormat, panelCommon.dateFnsOptions.value);\n  });\n  watch(calendarValueRef, (value, oldValue) => {\n    if (type === 'date' || type === 'datetime') {\n      if (!isSameMonth(value, oldValue)) {\n        panelCommon.disableTransitionOneTick();\n      }\n    }\n  });\n  watch(computed(() => props.value), value => {\n    if (value !== null && !Array.isArray(value)) {\n      dateInputValueRef.value = format(value, mergedDateFormatRef.value, panelCommon.dateFnsOptions.value);\n      calendarValueRef.value = value;\n    } else {\n      dateInputValueRef.value = '';\n    }\n  });\n  function sanitizeValue(value) {\n    var _a;\n    if (type === 'datetime') return getTime(startOfSecond(value));\n    if (type === 'month') return getTime(startOfMonth(value));\n    if (type === 'year') return getTime(startOfYear(value));\n    if (type === 'quarter') return getTime(startOfQuarter(value));\n    if (type === 'week') {\n      // refer to makeWeekMatcher\n      const weekStartsOn = (((_a = firstDayOfWeekRef.value) !== null && _a !== void 0 ? _a : localeRef.value.firstDayOfWeek) + 1) % 7;\n      return getTime(startOfWeek(value, {\n        weekStartsOn\n      }));\n    }\n    return getTime(startOfDay(value));\n  }\n  function mergedIsDateDisabled(ts, detail) {\n    const {\n      isDateDisabled: {\n        value: isDateDisabled\n      }\n    } = validation;\n    if (!isDateDisabled) return false;\n    return isDateDisabled(ts, detail);\n  }\n  function handleDateInput(value) {\n    const date = strictParse(value, mergedDateFormatRef.value, new Date(), panelCommon.dateFnsOptions.value);\n    if (isValid(date)) {\n      if (props.value === null) {\n        panelCommon.doUpdateValue(getTime(sanitizeValue(Date.now())), props.panel);\n      } else if (!Array.isArray(props.value)) {\n        const newDateTime = set(props.value, {\n          year: getYear(date),\n          month: getMonth(date),\n          date: getDate(date)\n        });\n        panelCommon.doUpdateValue(getTime(sanitizeValue(getTime(newDateTime))), props.panel);\n      }\n    } else {\n      dateInputValueRef.value = value;\n    }\n  }\n  function handleDateInputBlur() {\n    const date = strictParse(dateInputValueRef.value, mergedDateFormatRef.value, new Date(), panelCommon.dateFnsOptions.value);\n    if (isValid(date)) {\n      if (props.value === null) {\n        panelCommon.doUpdateValue(getTime(sanitizeValue(Date.now())), false);\n      } else if (!Array.isArray(props.value)) {\n        const newDateTime = set(props.value, {\n          year: getYear(date),\n          month: getMonth(date),\n          date: getDate(date)\n        });\n        panelCommon.doUpdateValue(getTime(sanitizeValue(getTime(newDateTime))), false);\n      }\n    } else {\n      deriveDateInputValue();\n    }\n  }\n  function clearSelectedDateTime() {\n    panelCommon.doUpdateValue(null, true);\n    dateInputValueRef.value = '';\n    panelCommon.doClose(true);\n    panelCommon.handleClearClick();\n  }\n  function handleNowClick() {\n    panelCommon.doUpdateValue(getTime(sanitizeValue(Date.now())), true);\n    const now = Date.now();\n    calendarValueRef.value = now;\n    panelCommon.doClose(true);\n    if (props.panel && (type === 'month' || type === 'quarter' || type === 'year')) {\n      panelCommon.disableTransitionOneTick();\n      justifyColumnsScrollState(now);\n    }\n  }\n  const hoveredWeekRef = ref(null);\n  function handleDateMouseEnter(dateItem) {\n    if (dateItem.type === 'date' && type === 'week') {\n      hoveredWeekRef.value = sanitizeValue(getTime(dateItem.ts));\n    }\n  }\n  function isWeekHovered(dateItem) {\n    if (dateItem.type === 'date' && type === 'week') {\n      return sanitizeValue(getTime(dateItem.ts)) === hoveredWeekRef.value;\n    }\n    return false;\n  }\n  function handleDateClick(dateItem) {\n    if (mergedIsDateDisabled(dateItem.ts, dateItem.type === 'date' ? {\n      type: 'date',\n      year: dateItem.dateObject.year,\n      month: dateItem.dateObject.month,\n      date: dateItem.dateObject.date\n    } : dateItem.type === 'month' ? {\n      type: 'month',\n      year: dateItem.dateObject.year,\n      month: dateItem.dateObject.month\n    } : dateItem.type === 'year' ? {\n      type: 'year',\n      year: dateItem.dateObject.year\n    } : {\n      type: 'quarter',\n      year: dateItem.dateObject.year,\n      quarter: dateItem.dateObject.quarter\n    })) {\n      return;\n    }\n    let newValue;\n    if (props.value !== null && !Array.isArray(props.value)) {\n      newValue = props.value;\n    } else {\n      newValue = Date.now();\n    }\n    if (type === 'datetime' && props.defaultTime !== null && !Array.isArray(props.defaultTime)) {\n      const time = getDefaultTime(props.defaultTime);\n      if (time) {\n        newValue = getTime(set(newValue, time)); // setDate getTime(addMilliseconds(startOfDay(newValue), time))\n      }\n    }\n    newValue = getTime(dateItem.type === 'quarter' && dateItem.dateObject.quarter ? setQuarter(setYear(newValue, dateItem.dateObject.year), dateItem.dateObject.quarter) : set(newValue, dateItem.dateObject));\n    panelCommon.doUpdateValue(sanitizeValue(newValue), props.panel || type === 'date' || type === 'week' || type === 'year');\n    switch (type) {\n      case 'date':\n      case 'week':\n        panelCommon.doClose();\n        break;\n      case 'year':\n        if (props.panel) {\n          panelCommon.disableTransitionOneTick();\n        }\n        panelCommon.doClose();\n        break;\n      case 'month':\n        panelCommon.disableTransitionOneTick();\n        justifyColumnsScrollState(newValue);\n        break;\n      case 'quarter':\n        panelCommon.disableTransitionOneTick();\n        justifyColumnsScrollState(newValue);\n        break;\n    }\n  }\n  function handleQuickMonthClick(dateItem, updatePanelValue) {\n    let newValue;\n    if (props.value !== null && !Array.isArray(props.value)) {\n      newValue = props.value;\n    } else {\n      newValue = Date.now();\n    }\n    newValue = getTime(dateItem.type === 'month' ? setMonth(newValue, dateItem.dateObject.month) : setYear(newValue, dateItem.dateObject.year));\n    updatePanelValue(newValue);\n    justifyColumnsScrollState(newValue);\n  }\n  function onUpdateCalendarValue(value) {\n    calendarValueRef.value = value;\n  }\n  function deriveDateInputValue(time) {\n    // If not selected, display nothing,\n    // else update datetime related string\n    if (props.value === null || Array.isArray(props.value)) {\n      dateInputValueRef.value = '';\n      return;\n    }\n    if (time === undefined) {\n      time = props.value;\n    }\n    dateInputValueRef.value = format(time, mergedDateFormatRef.value, panelCommon.dateFnsOptions.value);\n  }\n  function handleConfirmClick() {\n    if (validation.isDateInvalid.value || validation.isTimeInvalid.value) {\n      return;\n    }\n    panelCommon.doConfirm();\n    closeCalendar();\n  }\n  function closeCalendar() {\n    if (props.active) {\n      panelCommon.doClose();\n    }\n  }\n  function nextYear() {\n    var _a;\n    calendarValueRef.value = getTime(addYears(calendarValueRef.value, 1));\n    (_a = props.onNextYear) === null || _a === void 0 ? void 0 : _a.call(props);\n  }\n  function prevYear() {\n    var _a;\n    calendarValueRef.value = getTime(addYears(calendarValueRef.value, -1));\n    (_a = props.onPrevYear) === null || _a === void 0 ? void 0 : _a.call(props);\n  }\n  function nextMonth() {\n    var _a;\n    calendarValueRef.value = getTime(addMonths(calendarValueRef.value, 1));\n    (_a = props.onNextMonth) === null || _a === void 0 ? void 0 : _a.call(props);\n  }\n  function prevMonth() {\n    var _a;\n    calendarValueRef.value = getTime(addMonths(calendarValueRef.value, -1));\n    (_a = props.onPrevMonth) === null || _a === void 0 ? void 0 : _a.call(props);\n  }\n  // For month type\n  function virtualListContainer() {\n    const {\n      value\n    } = yearVlRef;\n    return (value === null || value === void 0 ? void 0 : value.listElRef) || null;\n  }\n  // For month type\n  function virtualListContent() {\n    const {\n      value\n    } = yearVlRef;\n    return (value === null || value === void 0 ? void 0 : value.itemsElRef) || null;\n  }\n  // For month type\n  function handleVirtualListScroll(e) {\n    var _a;\n    (_a = yearScrollbarRef.value) === null || _a === void 0 ? void 0 : _a.sync();\n  }\n  function handleTimePickerChange(value) {\n    if (value === null) return;\n    panelCommon.doUpdateValue(value, props.panel);\n  }\n  function handleSingleShortcutMouseenter(shortcut) {\n    panelCommon.cachePendingValue();\n    const shortcutValue = panelCommon.getShortcutValue(shortcut);\n    if (typeof shortcutValue !== 'number') return;\n    panelCommon.doUpdateValue(shortcutValue, false);\n  }\n  function handleSingleShortcutClick(shortcut) {\n    const shortcutValue = panelCommon.getShortcutValue(shortcut);\n    if (typeof shortcutValue !== 'number') return;\n    panelCommon.doUpdateValue(shortcutValue, props.panel);\n    panelCommon.clearPendingValue();\n    handleConfirmClick();\n  }\n  function justifyColumnsScrollState(value) {\n    const {\n      value: mergedValue\n    } = props;\n    if (monthScrollbarRef.value) {\n      const monthIndex = value === undefined ? mergedValue === null ? getMonth(Date.now()) : getMonth(mergedValue) : getMonth(value);\n      monthScrollbarRef.value.scrollTo({\n        top: monthIndex * MONTH_ITEM_HEIGHT\n      });\n    }\n    if (yearVlRef.value) {\n      const yearIndex = (value === undefined ? mergedValue === null ? getYear(Date.now()) : getYear(mergedValue) : getYear(value)) - START_YEAR;\n      yearVlRef.value.scrollTo({\n        top: yearIndex * MONTH_ITEM_HEIGHT\n      });\n    }\n  }\n  const childComponentRefs = {\n    monthScrollbarRef,\n    yearScrollbarRef,\n    yearVlRef\n  };\n  return Object.assign(Object.assign(Object.assign(Object.assign({\n    dateArray: dateArrayRef,\n    monthArray: monthArrayRef,\n    yearArray: yearArrayRef,\n    quarterArray: quarterArrayRef,\n    calendarYear: calendarYearRef,\n    calendarMonth: calendarMonthRef,\n    weekdays: weekdaysRef,\n    mergedIsDateDisabled,\n    nextYear,\n    prevYear,\n    nextMonth,\n    prevMonth,\n    handleNowClick,\n    handleConfirmClick,\n    handleSingleShortcutMouseenter,\n    handleSingleShortcutClick\n  }, validation), panelCommon), childComponentRefs), {\n    // datetime only\n    handleDateClick,\n    handleDateInputBlur,\n    handleDateInput,\n    handleDateMouseEnter,\n    isWeekHovered,\n    handleTimePickerChange,\n    clearSelectedDateTime,\n    virtualListContainer,\n    virtualListContent,\n    handleVirtualListScroll,\n    timePickerSize: panelCommon.timePickerSize,\n    dateInputValue: dateInputValueRef,\n    datePickerSlots,\n    handleQuickMonthClick,\n    justifyColumnsScrollState,\n    calendarValue: calendarValueRef,\n    onUpdateCalendarValue\n  });\n}\nexport { useCalendar, useCalendarProps };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}