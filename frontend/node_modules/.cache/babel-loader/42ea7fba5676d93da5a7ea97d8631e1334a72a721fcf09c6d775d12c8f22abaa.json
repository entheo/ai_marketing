{"ast":null,"code":"import { defineComponent, h, nextTick, ref, computed, watch, toRef } from 'vue';\nexport default defineComponent({\n  name: 'SlotMachineNumber',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    value: {\n      // could be '+', 1, 2, ...\n      type: [Number, String],\n      required: true\n    },\n    oldOriginalNumber: {\n      type: Number,\n      default: undefined\n    },\n    newOriginalNumber: {\n      type: Number,\n      default: undefined\n    }\n  },\n  setup(props) {\n    const numberRef = ref(null);\n    const oldNumberRef = ref(props.value);\n    const newNumberRef = ref(props.value);\n    const scrollAnimationDirectionRef = ref('up');\n    const activeRef = ref(false);\n    const newNumberScrollAnimationClassRef = computed(() => {\n      return activeRef.value ? `${props.clsPrefix}-base-slot-machine-current-number--${scrollAnimationDirectionRef.value}-scroll` : null;\n    });\n    const oldNumberScrollAnimationClassRef = computed(() => {\n      return activeRef.value ? `${props.clsPrefix}-base-slot-machine-old-number--${scrollAnimationDirectionRef.value}-scroll` : null;\n    });\n    // BUG: may be typescript bug\n    watch(toRef(props, 'value'), (value, oldValue) => {\n      oldNumberRef.value = oldValue;\n      newNumberRef.value = value;\n      void nextTick(scroll);\n    });\n    function scroll() {\n      const newOriginalNumber = props.newOriginalNumber;\n      const oldOriginalNumber = props.oldOriginalNumber;\n      if (oldOriginalNumber === undefined || newOriginalNumber === undefined) {\n        return;\n      }\n      if (newOriginalNumber > oldOriginalNumber) {\n        scrollByDir('up');\n      } else if (oldOriginalNumber > newOriginalNumber) {\n        scrollByDir('down');\n      }\n    }\n    function scrollByDir(dir) {\n      scrollAnimationDirectionRef.value = dir;\n      activeRef.value = false;\n      void nextTick(() => {\n        var _a;\n        void ((_a = numberRef.value) === null || _a === void 0 ? void 0 : _a.offsetWidth);\n        activeRef.value = true;\n      });\n    }\n    return () => {\n      const {\n        clsPrefix\n      } = props;\n      return h(\"span\", {\n        ref: numberRef,\n        class: `${clsPrefix}-base-slot-machine-number`\n      }, oldNumberRef.value !== null ? h(\"span\", {\n        class: [`${clsPrefix}-base-slot-machine-old-number ${clsPrefix}-base-slot-machine-old-number--top`, oldNumberScrollAnimationClassRef.value]\n      }, oldNumberRef.value) : null, h(\"span\", {\n        class: [`${clsPrefix}-base-slot-machine-current-number`, newNumberScrollAnimationClassRef.value]\n      }, h(\"span\", {\n        ref: \"numberWrapper\",\n        class: [`${clsPrefix}-base-slot-machine-current-number__inner`, typeof props.value !== 'number' && `${clsPrefix}-base-slot-machine-current-number__inner--not-number`]\n      }, newNumberRef.value)), oldNumberRef.value !== null ? h(\"span\", {\n        class: [`${clsPrefix}-base-slot-machine-old-number ${clsPrefix}-base-slot-machine-old-number--bottom`, oldNumberScrollAnimationClassRef.value]\n      }, oldNumberRef.value) : null);\n    };\n  }\n});","map":{"version":3,"names":["defineComponent","h","nextTick","ref","computed","watch","toRef","name","props","clsPrefix","type","String","required","value","Number","oldOriginalNumber","default","undefined","newOriginalNumber","setup","numberRef","oldNumberRef","newNumberRef","scrollAnimationDirectionRef","activeRef","newNumberScrollAnimationClassRef","oldNumberScrollAnimationClassRef","oldValue","scroll","scrollByDir","dir","_a","offsetWidth","class"],"sources":["/Users/wangjohnson/ai_marketing/frontend/node_modules/naive-ui/es/_internal/slot-machine/src/SlotMachineNumber.mjs"],"sourcesContent":["import { defineComponent, h, nextTick, ref, computed, watch, toRef } from 'vue';\nexport default defineComponent({\n  name: 'SlotMachineNumber',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    value: {\n      // could be '+', 1, 2, ...\n      type: [Number, String],\n      required: true\n    },\n    oldOriginalNumber: {\n      type: Number,\n      default: undefined\n    },\n    newOriginalNumber: {\n      type: Number,\n      default: undefined\n    }\n  },\n  setup(props) {\n    const numberRef = ref(null);\n    const oldNumberRef = ref(props.value);\n    const newNumberRef = ref(props.value);\n    const scrollAnimationDirectionRef = ref('up');\n    const activeRef = ref(false);\n    const newNumberScrollAnimationClassRef = computed(() => {\n      return activeRef.value ? `${props.clsPrefix}-base-slot-machine-current-number--${scrollAnimationDirectionRef.value}-scroll` : null;\n    });\n    const oldNumberScrollAnimationClassRef = computed(() => {\n      return activeRef.value ? `${props.clsPrefix}-base-slot-machine-old-number--${scrollAnimationDirectionRef.value}-scroll` : null;\n    });\n    // BUG: may be typescript bug\n    watch(toRef(props, 'value'), (value, oldValue) => {\n      oldNumberRef.value = oldValue;\n      newNumberRef.value = value;\n      void nextTick(scroll);\n    });\n    function scroll() {\n      const newOriginalNumber = props.newOriginalNumber;\n      const oldOriginalNumber = props.oldOriginalNumber;\n      if (oldOriginalNumber === undefined || newOriginalNumber === undefined) {\n        return;\n      }\n      if (newOriginalNumber > oldOriginalNumber) {\n        scrollByDir('up');\n      } else if (oldOriginalNumber > newOriginalNumber) {\n        scrollByDir('down');\n      }\n    }\n    function scrollByDir(dir) {\n      scrollAnimationDirectionRef.value = dir;\n      activeRef.value = false;\n      void nextTick(() => {\n        var _a;\n        void ((_a = numberRef.value) === null || _a === void 0 ? void 0 : _a.offsetWidth);\n        activeRef.value = true;\n      });\n    }\n    return () => {\n      const {\n        clsPrefix\n      } = props;\n      return h(\"span\", {\n        ref: numberRef,\n        class: `${clsPrefix}-base-slot-machine-number`\n      }, oldNumberRef.value !== null ? h(\"span\", {\n        class: [`${clsPrefix}-base-slot-machine-old-number ${clsPrefix}-base-slot-machine-old-number--top`, oldNumberScrollAnimationClassRef.value]\n      }, oldNumberRef.value) : null, h(\"span\", {\n        class: [`${clsPrefix}-base-slot-machine-current-number`, newNumberScrollAnimationClassRef.value]\n      }, h(\"span\", {\n        ref: \"numberWrapper\",\n        class: [`${clsPrefix}-base-slot-machine-current-number__inner`, typeof props.value !== 'number' && `${clsPrefix}-base-slot-machine-current-number__inner--not-number`]\n      }, newNumberRef.value)), oldNumberRef.value !== null ? h(\"span\", {\n        class: [`${clsPrefix}-base-slot-machine-old-number ${clsPrefix}-base-slot-machine-old-number--bottom`, oldNumberScrollAnimationClassRef.value]\n      }, oldNumberRef.value) : null);\n    };\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}