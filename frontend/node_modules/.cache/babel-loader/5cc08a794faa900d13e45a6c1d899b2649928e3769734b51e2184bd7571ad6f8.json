{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withCtx as _withCtx, createVNode as _createVNode, vShow as _vShow, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-3529dabb\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"tricks\"\n};\nconst _hoisted_2 = {\n  class: \"senario\"\n};\nconst _hoisted_3 = {\n  class: \"tricks\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"场景特点提示\", -1 /* HOISTED */));\nconst _hoisted_5 = [\"innerHTML\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createBlock($setup[\"NForm\"], {\n    \"label-placement\": $props.labelPlacement,\n    \"require-mark-placement\": \"right-hanging\",\n    \"label-width\": $props.labelWidth,\n    size: \"large\"\n  }, {\n    default: _withCtx(() => [_withDirectives(_createElementVNode(\"div\", _hoisted_1, [_createVNode($setup[\"NCard\"], {\n      embeded: \"\",\n      bordered: false\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"span\", _hoisted_2, \"目前所处【\" + _toDisplayString($props.campaignStage) + \"】，适合场景：\" + _toDisplayString($setup.senario), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    })], 512 /* NEED_PATCH */), [[_vShow, $setup.has_stage]]), _createVNode($setup[\"NFormItem\"], {\n      label: \"计划将文案用在哪里？\",\n      size: \"large\"\n    }, {\n      default: _withCtx(() => [_createVNode($setup[\"NRadioGroup\"], {\n        class: \"radio-group-wrap\",\n        style: {\n          \"--n-button-border-color\": \"none\",\n          \"--n-button-border-color-active\": \"none\",\n          \"--n-height\": \"auto\"\n        },\n        value: $setup.senarioInfo.places,\n        \"onUpdate:value\": [_cache[0] || (_cache[0] = $event => $setup.senarioInfo.places = $event), $setup.getPlace],\n        size: \"large\",\n        name: \"radiobuttongroup1\"\n      }, {\n        default: _withCtx(() => [(_openBlock(), _createElementBlock(_Fragment, null, _renderList($setup.places, place => {\n          return _createVNode($setup[\"NRadioButton\"], {\n            class: \"bordered-button\",\n            key: place.value,\n            value: place.value,\n            label: place.label\n          }, null, 8 /* PROPS */, [\"value\", \"label\"]);\n        }), 64 /* STABLE_FRAGMENT */))]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"value\"])]),\n      _: 1 /* STABLE */\n    }), _withDirectives(_createVNode($setup[\"NFormItem\"], {\n      label: \"补充描述使用场景:\"\n    }, {\n      default: _withCtx(() => [_withDirectives(_createVNode($setup[\"NInput\"], {\n        value: $setup.otherPlaceData,\n        \"onUpdate:value\": _cache[1] || (_cache[1] = $event => $setup.otherPlaceData = $event),\n        placeholder: \"\",\n        clearable: \"\",\n        ref: \"inputInstRef\"\n      }, null, 8 /* PROPS */, [\"value\"]), [[_vShow, $setup.otherPlace]])]),\n      _: 1 /* STABLE */\n    }, 512 /* NEED_PATCH */), [[_vShow, $setup.otherPlace]]), _withDirectives(_createElementVNode(\"div\", _hoisted_3, [_createVNode($setup[\"NCard\"], {\n      embedded: \"\",\n      bordered: false\n    }, {\n      default: _withCtx(() => [_createVNode($setup[\"NIcon\"], null, {\n        default: _withCtx(() => [_createVNode($setup[\"BulbOutline\"])]),\n        _: 1 /* STABLE */\n      }), _hoisted_4, _createElementVNode(\"div\", {\n        innerHTML: $setup.markdownTricks\n      }, null, 8 /* PROPS */, _hoisted_5)]),\n      _: 1 /* STABLE */\n    })], 512 /* NEED_PATCH */), [[_vShow, $setup.has_senario]]), _createVNode($setup[\"NFormItem\"], {\n      class: \"tags\",\n      label: \"传递情绪与感受是？\"\n    }, {\n      default: _withCtx(() => [_createVNode($setup[\"NDynamicTags\"], {\n        value: $setup.senarioInfo.emotionTags,\n        \"onUpdate:value\": _cache[2] || (_cache[2] = $event => $setup.senarioInfo.emotionTags = $event),\n        \"render-tag\": $setup.renderEmotionTags\n      }, null, 8 /* PROPS */, [\"value\"])]),\n      _: 1 /* STABLE */\n    }), _withDirectives(_createVNode($setup[\"NButton\"], {\n      type: \"primary\",\n      onClick: $setup.createSenario\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"保存\")]),\n      _: 1 /* STABLE */\n    }, 512 /* NEED_PATCH */), [[_vShow, false]])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"label-placement\", \"label-width\"]);\n}","map":{"version":3,"names":["class","_createElementVNode","_createBlock","$setup","$props","labelPlacement","labelWidth","size","default","_withCtx","_hoisted_1","_createVNode","embeded","bordered","_hoisted_2","_toDisplayString","campaignStage","senario","_","has_stage","label","style","value","senarioInfo","places","$event","getPlace","name","_createElementBlock","_Fragment","_renderList","place","key","otherPlaceData","_cache","placeholder","clearable","ref","otherPlace","_hoisted_3","embedded","_hoisted_4","innerHTML","markdownTricks","_hoisted_5","has_senario","emotionTags","renderEmotionTags","type","onClick","createSenario","_createTextVNode"],"sources":["/Users/wangjohnson/ai_marketing/frontend/src/components/CreateSenarioForm.vue"],"sourcesContent":["<template>\n    <n-form :label-placement=\"labelPlacement\" require-mark-placement=\"right-hanging\" :label-width=\"labelWidth\" size=\"large\">\n\n        <div class=\"tricks\" v-show='has_stage'>\n            <n-card embeded :bordered=\"false\">\n              <span class='senario'>目前所处【{{campaignStage}}】，适合场景：{{senario}}</span>\n            </n-card>\n          </div>\n        <n-form-item label=\"计划将文案用在哪里？\" size=\"large\">\n            <n-radio-group \n                class=\"radio-group-wrap\"\n                style=\"--n-button-border-color:none;--n-button-border-color-active: none;--n-height:auto\"\n                v-model:value=\"senarioInfo.places\" \n                size=\"large\"\n                name=\"radiobuttongroup1\"\n                @update:value=\"getPlace\">\n        \n                <n-radio-button class=\"bordered-button\"\n                    v-for=\"place in places\"\n                    :key=\"place.value\"\n                    :value=\"place.value\"\n                    :label=\"place.label\"/> \n            </n-radio-group>\n        </n-form-item>\n        \n        <n-form-item label=\"补充描述使用场景:\" v-show=\"otherPlace\">              <n-input \n                v-show=\"otherPlace\" \n                v-model:value='otherPlaceData' placeholder=\"\"\n                clearable\n                ref=\"inputInstRef\"/>\n        </n-form-item>\n        \n        <div class=\"tricks\" v-show=\"has_senario\">\n          <n-card  embedded :bordered=\"false\" >\n            <n-icon><bulb-outline/></n-icon>\n            <span>场景特点提示</span>\n            <div v-html=\"markdownTricks\"></div>\n         </n-card>\n        </div>\n\n        <n-form-item class=\"tags\" label=\"传递情绪与感受是？\">\n         <n-dynamic-tags v-model:value=\"senarioInfo.emotionTags\" :render-tag=\"renderEmotionTags\" />\n         </n-form-item>\n         \n        <n-button v-show=\"false\" type=\"primary\" @click=\"createSenario\">保存</n-button>\n    </n-form>\n</template>\n\n<script setup>\nimport {watchEffect,computed,onBeforeMount,ref,h, defineEmits,defineExpose,defineProps} from 'vue';\nimport {NIcon,NCard,NRadioGroup,NRadioButton,NButton, NForm, NInput, NFormItem,  NTag,NDynamicTags} from 'naive-ui';\nimport {useStore} from 'vuex';\nimport {BulbOutline} from '@vicons/ionicons5';\nimport MarkdownIt from 'markdown-it';\n\n//组件挂载前加载数据\nconst store = useStore();\nonBeforeMount(()=>{\n    preData.value = store.getters.temp_campaign_data;\n    console.log('预加载数据：',preData.value);\n    handleSenarioInfo();\n    });\nconst preData = ref(null);\nconst handleSenarioInfo=()=>{\n    console.log(typeof(preData.value));\n    if(preData.value && JSON.stringify(preData.value)!=='{}' ){\n       senarioInfo.value.places = preData.value.senarioData.places;\n       senarioInfo.value.emotionTags = preData.value.senarioData.emotionTags;\n    }};\n\n//定义表单\nconst inputInstRef=ref(null);\nconst otherPlace=ref(false);\nconst otherPlaceData=ref(null);\nconst places = [\n    {\n        value:\"微信朋友圈\",\n        label:\"微信朋友圈\",\n        },\n    {\n        value:\"微信群内\",\n        label:\"微信群内\",\n        },\n    {\n        value:\"小红书\",\n        label:\"小红书\",\n        },\n    {\n        value:\"电商/商品详情页\",\n        label:\"电商/商品详情页\",\n        },\n\n    {\n        value:\"其它...\",\n        label:\"其它\",\n        },\n];\nconst has_senario = ref(false);\nconst senarioTrick=ref('');\nconst getPlace = (message)=>{\n    has_senario.value=true;\n    otherPlace.value=false;\n    switch(message){\n        case '微信朋友圈':\n        senarioInfo.value.emotionTags=['真实','真诚','亲密感'];\n        senarioTrick.value= '**微信朋友圈是私人社交场所——**  \\n 人们期待在这里看到彼此\"真实\"与\"真诚\"的一面，通常会对广告等商业属性强烈的信息感到不适。';\n        break\n\n        case '微信群内':\n        senarioInfo.value.emotionTags=['价值感','行动感','归属感'];\n        senarioTrick.value='**微信群是一个价值互动场所——**  \\n  相对于朋友圈，人们对于这里的价值感预期更高。不管是情感、知识、新闻、还是优惠，都要确保对群成员有用，要避免过多相关性较低内容导致人们的期待落空。';\n        break;\n\n        case '小红书':\n        senarioInfo.value.emotionTags=['探索欲','真实感','认同感'];\n        senarioTrick.value='**小红书是一个分享兴趣与生活方式灵感的地方——**  \\n  人们希望在这里看到不同生活方式的精彩之处的同时与兴趣好友建立联系，获得超越现有熟人关系以外的认同感。';\n        break;\n\n        case '电商/商品详情页':\n        senarioTrick.value='**商品详情页面进行付费决策的地方——**  \\n  在这里所有信息都应该用来推动消费者快速形成下单，比如打消疑惑、加强信任、释放优惠等。';\n        senarioInfo.value.emotionTags=['信任','诱惑','紧迫感']\n        \n        break;\n        \n        case '其它...':\n        senarioInfo.value.places='';\n        senarioInfo.value.emotionTags=['惊喜'];\n        otherPlace.value=true;\n        inputInstRef.value?.focus();\n        has_senario.value=false;\n        }\n    };\n\nconst md= MarkdownIt()\nconst markdownTricks=computed(()=>{\n    console.log(senarioTrick.value);\n    return md.render(senarioTrick.value)});\nconst emotionTagsRef = ref([\"喜悦\", \"真诚\"]);\nconst senarioInfo = ref({\n    places:'',\n    emotionTags: emotionTagsRef,\n\n    })\nconst renderEmotionTags = (tag, index) => {\n      return h(\n          NTag,\n          {\n            type: index < 3 ? \"success\" : \"error\",\n            disabled: index > 3,\n            closable: true,\n            onClose: () => {\n              emotionTagsRef.value.splice(index, 1);\n            }\n          },\n           ()=> tag\n        )\n}\nconst emit = defineEmits(['senarioInfoCreated']);\nconst createSenario = () =>{\n    console.log('to create senario');\n    console.log(senarioInfo.value);\n    if(otherPlaceData.value && JSON.stringify(otherPlaceData.value)!==''){\n          senarioInfo.value.places=otherPlaceData.value}\n      emit('senarioInfoCreated',senarioInfo.value);\n      try{\n          /*\n          const resp =  await axios.get('http://localhost:8005/account/auth/',{\n            headers: {\n                'Authorization': `Bearer ${token}` // 设置请求头\n                }});\n         */ }catch (error) {\n        console.error('Failed to fetch user info:', error);\n        }\n      };\n\ndefineExpose({createSenario,senarioInfo,otherPlaceData,otherPlace,places});\nconst props = defineProps({\n    labelWidth:{default:'190'},\n    labelPlacement:{default:'left'},\n    campaignStage:{},\n    });\nwatchEffect(()=>{\n    getSenarioTrick(props.campaignStage);\n    });\n//根据stage来返回推荐场景\nconst senario = ref('');\nconst has_stage=ref(false);\nfunction getSenarioTrick(stage){\n    //if ((stage) && stage !== ''){\n      //  has_stage.value=true}\n    switch(stage){\n        case '意识阶段':\n          senario.value='微信朋友圈';\n          break;\n        case '兴趣阶段':\n          senario.value='微信朋友圈、小红书';\n          break;\n        case '考虑阶段':\n          senario.value='微信群内、小红书';\n          break;\n        case '意向阶段':\n          senario.value='微信群内';\n          break;\n        case '行动阶段':\n          senario.value='微信群内、商品详情页';\n          break;\n        case '忠诚度建立阶段':\n          senario.value='微信群内、小红书';\n          break;\n        case '推荐阶段':\n          senario.value='微信朋友圈、小红书';\n          break;\n    }}\n</script>\n\n<script>\n  export default{\n      name:'CreateSenarioForm'\n      };\n</script>\n\n<style scoped>\n.n-space{\n    margin:0}\n.tags .n-form-item-blank .n-space{\n    margin:0;\n    }\n.radio-group-wrap {\n  display: flex;\n  flex-wrap: wrap; \n}\n.radio-group-wrap .bordered-button{\n    border:1px solid;\n    border-color:rgb(224, 224, 230);\n    margin-right:10px;\n    margin-bottom:10px;\n    height:38px;\n    line-height:2.5}\n\n.n-card__content {\n    padding:0px 14px 0px 0px}\n.tricks .senario{\n    background:#f9f9cf}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}