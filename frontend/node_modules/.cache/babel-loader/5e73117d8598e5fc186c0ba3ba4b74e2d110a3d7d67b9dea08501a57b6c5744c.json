{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { defineComponent, Fragment, ref, h, provide, reactive } from 'vue';\nimport { createId } from 'seemly';\nimport { useClicked, useClickPosition } from 'vooks';\nimport { omit } from \"../../_utils/index.mjs\";\nimport { NDialogEnvironment } from \"./DialogEnvironment.mjs\";\nimport { dialogApiInjectionKey, dialogProviderInjectionKey, dialogReactiveListInjectionKey } from \"./context.mjs\";\nexport const dialogProviderProps = {\n  injectionKey: String,\n  to: [String, Object]\n};\nexport const NDialogProvider = defineComponent({\n  name: 'DialogProvider',\n  props: dialogProviderProps,\n  setup() {\n    const dialogListRef = ref([]);\n    const dialogInstRefs = {};\n    function create(options = {}) {\n      const key = createId();\n      const dialogReactive = reactive(Object.assign(Object.assign({}, options), {\n        key,\n        destroy: () => {\n          var _a;\n          (_a = dialogInstRefs[`n-dialog-${key}`]) === null || _a === void 0 ? void 0 : _a.hide();\n        }\n      }));\n      dialogListRef.value.push(dialogReactive);\n      return dialogReactive;\n    }\n    const typedApi = ['info', 'success', 'warning', 'error'].map(type => options => {\n      return create(Object.assign(Object.assign({}, options), {\n        type\n      }));\n    });\n    function handleAfterLeave(key) {\n      const {\n        value: dialogList\n      } = dialogListRef;\n      dialogList.splice(dialogList.findIndex(dialog => dialog.key === key), 1);\n    }\n    function destroyAll() {\n      Object.values(dialogInstRefs).forEach(dialogInstRef => {\n        dialogInstRef === null || dialogInstRef === void 0 ? void 0 : dialogInstRef.hide();\n      });\n    }\n    const api = {\n      create,\n      destroyAll,\n      info: typedApi[0],\n      success: typedApi[1],\n      warning: typedApi[2],\n      error: typedApi[3]\n    };\n    provide(dialogApiInjectionKey, api);\n    provide(dialogProviderInjectionKey, {\n      clickedRef: useClicked(64),\n      clickedPositionRef: useClickPosition()\n    });\n    provide(dialogReactiveListInjectionKey, dialogListRef);\n    return Object.assign(Object.assign({}, api), {\n      dialogList: dialogListRef,\n      dialogInstRefs,\n      handleAfterLeave\n    });\n  },\n  render() {\n    var _a, _b;\n    return h(Fragment, null, [this.dialogList.map(dialog => h(NDialogEnvironment, omit(dialog, ['destroy', 'style'], {\n      internalStyle: dialog.style,\n      to: this.to,\n      ref: inst => {\n        if (inst === null) {\n          // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n          delete this.dialogInstRefs[`n-dialog-${dialog.key}`];\n        } else {\n          this.dialogInstRefs[`n-dialog-${dialog.key}`] = inst;\n        }\n      },\n      internalKey: dialog.key,\n      onInternalAfterLeave: this.handleAfterLeave\n    }))), (_b = (_a = this.$slots).default) === null || _b === void 0 ? void 0 : _b.call(_a)]);\n  }\n});","map":{"version":3,"names":["defineComponent","Fragment","ref","h","provide","reactive","createId","useClicked","useClickPosition","omit","NDialogEnvironment","dialogApiInjectionKey","dialogProviderInjectionKey","dialogReactiveListInjectionKey","dialogProviderProps","injectionKey","String","to","Object","NDialogProvider","name","props","setup","dialogListRef","dialogInstRefs","create","options","key","dialogReactive","assign","destroy","_a","hide","value","push","typedApi","map","type","handleAfterLeave","dialogList","splice","findIndex","dialog","destroyAll","values","forEach","dialogInstRef","api","info","success","warning","error","clickedRef","clickedPositionRef","render","_b","internalStyle","style","inst","internalKey","onInternalAfterLeave","$slots","default","call"],"sources":["/Users/wangjohnson/ai_marketing/frontend/node_modules/naive-ui/es/dialog/src/DialogProvider.mjs"],"sourcesContent":["import { defineComponent, Fragment, ref, h, provide, reactive } from 'vue';\nimport { createId } from 'seemly';\nimport { useClicked, useClickPosition } from 'vooks';\nimport { omit } from \"../../_utils/index.mjs\";\nimport { NDialogEnvironment } from \"./DialogEnvironment.mjs\";\nimport { dialogApiInjectionKey, dialogProviderInjectionKey, dialogReactiveListInjectionKey } from \"./context.mjs\";\nexport const dialogProviderProps = {\n  injectionKey: String,\n  to: [String, Object]\n};\nexport const NDialogProvider = defineComponent({\n  name: 'DialogProvider',\n  props: dialogProviderProps,\n  setup() {\n    const dialogListRef = ref([]);\n    const dialogInstRefs = {};\n    function create(options = {}) {\n      const key = createId();\n      const dialogReactive = reactive(Object.assign(Object.assign({}, options), {\n        key,\n        destroy: () => {\n          var _a;\n          (_a = dialogInstRefs[`n-dialog-${key}`]) === null || _a === void 0 ? void 0 : _a.hide();\n        }\n      }));\n      dialogListRef.value.push(dialogReactive);\n      return dialogReactive;\n    }\n    const typedApi = ['info', 'success', 'warning', 'error'].map(type => options => {\n      return create(Object.assign(Object.assign({}, options), {\n        type\n      }));\n    });\n    function handleAfterLeave(key) {\n      const {\n        value: dialogList\n      } = dialogListRef;\n      dialogList.splice(dialogList.findIndex(dialog => dialog.key === key), 1);\n    }\n    function destroyAll() {\n      Object.values(dialogInstRefs).forEach(dialogInstRef => {\n        dialogInstRef === null || dialogInstRef === void 0 ? void 0 : dialogInstRef.hide();\n      });\n    }\n    const api = {\n      create,\n      destroyAll,\n      info: typedApi[0],\n      success: typedApi[1],\n      warning: typedApi[2],\n      error: typedApi[3]\n    };\n    provide(dialogApiInjectionKey, api);\n    provide(dialogProviderInjectionKey, {\n      clickedRef: useClicked(64),\n      clickedPositionRef: useClickPosition()\n    });\n    provide(dialogReactiveListInjectionKey, dialogListRef);\n    return Object.assign(Object.assign({}, api), {\n      dialogList: dialogListRef,\n      dialogInstRefs,\n      handleAfterLeave\n    });\n  },\n  render() {\n    var _a, _b;\n    return h(Fragment, null, [this.dialogList.map(dialog => h(NDialogEnvironment, omit(dialog, ['destroy', 'style'], {\n      internalStyle: dialog.style,\n      to: this.to,\n      ref: inst => {\n        if (inst === null) {\n          // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n          delete this.dialogInstRefs[`n-dialog-${dialog.key}`];\n        } else {\n          this.dialogInstRefs[`n-dialog-${dialog.key}`] = inst;\n        }\n      },\n      internalKey: dialog.key,\n      onInternalAfterLeave: this.handleAfterLeave\n    }))), (_b = (_a = this.$slots).default) === null || _b === void 0 ? void 0 : _b.call(_a)]);\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}