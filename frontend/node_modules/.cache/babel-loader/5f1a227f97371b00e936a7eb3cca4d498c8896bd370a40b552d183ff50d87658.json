{"ast":null,"code":"import { defineStore } from 'vuex';\nimport axios from 'axios';\nexport const useAuthStore = defineStore({\n  id: 'auth',\n  // State\n  state: {\n    status: '',\n    token: localStorage.getItem('token') || '',\n    user: {}\n  },\n  // Mutations\n  mutations: {\n    auth_success(state, {\n      token,\n      user\n    }) {\n      state.status = 'success';\n      state.token = token;\n      state.user = user;\n    },\n    logout(state) {\n      state.status = '';\n      state.token = '';\n    }\n  },\n  // Actions\n  actions: {\n    logIn({\n      commit\n    }, user) {\n      return new Promise((resolve, reject) => {\n        axios({\n          url: 'http://localhost:8005/api/account/login/',\n          data: user,\n          method: 'POST'\n        }).then(resp => {\n          const token = resp.data.token.access;\n          const user = resp.data.username;\n          localStorage.setItem('token', token);\n          axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n          commit('auth_success', {\n            token,\n            user\n          });\n          resolve(resp);\n        }).catch(err => {\n          localStorage.removeItem('token');\n          reject(err);\n        });\n      });\n    },\n    logout({\n      commit\n    }) {\n      return new Promise(resolve => {\n        commit('logout');\n        localStorage.removeItem('token');\n        delete axios.defaults.headers.common['Authorization'];\n        resolve();\n      });\n    }\n  },\n  getters: {\n    isLoggedIn: state => !!state.token,\n    authStatus: state => state.status\n  }\n});","map":{"version":3,"names":["defineStore","axios","useAuthStore","id","state","status","token","localStorage","getItem","user","mutations","auth_success","logout","actions","logIn","commit","Promise","resolve","reject","url","data","method","then","resp","access","username","setItem","defaults","headers","common","catch","err","removeItem","getters","isLoggedIn","authStatus"],"sources":["/Users/wangjohnson/ai_marketing/frontend/src/store/index.js"],"sourcesContent":["import { defineStore } from 'vuex'\nimport axios from 'axios';\n\nexport const useAuthStore = defineStore({\n  id: 'auth',\n  // State\n  state: {\n    status: '',\n    token: localStorage.getItem('token') || '',\n    user: {}\n  },\n\n  // Mutations\n  mutations: {\n    auth_success(state, { token, user }){\n      state.status = 'success'\n      state.token = token\n      state.user = user\n    },\n    logout(state){\n      state.status = ''\n      state.token = ''\n    }\n  },\n\n  // Actions\n  actions: {\n    logIn({ commit }, user) {\n      return new Promise((resolve, reject) => {\n        axios({ url: 'http://localhost:8005/api/account/login/', data: user, method: 'POST' })\n        .then(resp => {\n          const token = resp.data.token.access\n          const user = resp.data.username\n          localStorage.setItem('token', token)\n          axios.defaults.headers.common['Authorization'] = `Bearer ${token}`\n          commit('auth_success', { token, user })\n          resolve(resp)\n        })\n        .catch(err => {\n          localStorage.removeItem('token')\n          reject(err)\n        })\n      })\n    },\n    logout({ commit }){\n      return new Promise((resolve) => {\n        commit('logout')\n        localStorage.removeItem('token')\n        delete axios.defaults.headers.common['Authorization']\n        resolve()\n      })\n    }\n  },\n  getters: {\n    isLoggedIn: state => !!state.token,\n    authStatus: state => state.status\n  }\n});\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,MAAM;AAClC,OAAOC,KAAK,MAAM,OAAO;AAEzB,OAAO,MAAMC,YAAY,GAAGF,WAAW,CAAC;EACtCG,EAAE,EAAE,MAAM;EACV;EACAC,KAAK,EAAE;IACLC,MAAM,EAAE,EAAE;IACVC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE;IAC1CC,IAAI,EAAE,CAAC;EACT,CAAC;EAED;EACAC,SAAS,EAAE;IACTC,YAAYA,CAACP,KAAK,EAAE;MAAEE,KAAK;MAAEG;IAAK,CAAC,EAAC;MAClCL,KAAK,CAACC,MAAM,GAAG,SAAS;MACxBD,KAAK,CAACE,KAAK,GAAGA,KAAK;MACnBF,KAAK,CAACK,IAAI,GAAGA,IAAI;IACnB,CAAC;IACDG,MAAMA,CAACR,KAAK,EAAC;MACXA,KAAK,CAACC,MAAM,GAAG,EAAE;MACjBD,KAAK,CAACE,KAAK,GAAG,EAAE;IAClB;EACF,CAAC;EAED;EACAO,OAAO,EAAE;IACPC,KAAKA,CAAC;MAAEC;IAAO,CAAC,EAAEN,IAAI,EAAE;MACtB,OAAO,IAAIO,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACtCjB,KAAK,CAAC;UAAEkB,GAAG,EAAE,0CAA0C;UAAEC,IAAI,EAAEX,IAAI;UAAEY,MAAM,EAAE;QAAO,CAAC,CAAC,CACrFC,IAAI,CAACC,IAAI,IAAI;UACZ,MAAMjB,KAAK,GAAGiB,IAAI,CAACH,IAAI,CAACd,KAAK,CAACkB,MAAM;UACpC,MAAMf,IAAI,GAAGc,IAAI,CAACH,IAAI,CAACK,QAAQ;UAC/BlB,YAAY,CAACmB,OAAO,CAAC,OAAO,EAAEpB,KAAK,CAAC;UACpCL,KAAK,CAAC0B,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAI,UAASvB,KAAM,EAAC;UAClES,MAAM,CAAC,cAAc,EAAE;YAAET,KAAK;YAAEG;UAAK,CAAC,CAAC;UACvCQ,OAAO,CAACM,IAAI,CAAC;QACf,CAAC,CAAC,CACDO,KAAK,CAACC,GAAG,IAAI;UACZxB,YAAY,CAACyB,UAAU,CAAC,OAAO,CAAC;UAChCd,MAAM,CAACa,GAAG,CAAC;QACb,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC;IACDnB,MAAMA,CAAC;MAAEG;IAAO,CAAC,EAAC;MAChB,OAAO,IAAIC,OAAO,CAAEC,OAAO,IAAK;QAC9BF,MAAM,CAAC,QAAQ,CAAC;QAChBR,YAAY,CAACyB,UAAU,CAAC,OAAO,CAAC;QAChC,OAAO/B,KAAK,CAAC0B,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC;QACrDZ,OAAO,CAAC,CAAC;MACX,CAAC,CAAC;IACJ;EACF,CAAC;EACDgB,OAAO,EAAE;IACPC,UAAU,EAAE9B,KAAK,IAAI,CAAC,CAACA,KAAK,CAACE,KAAK;IAClC6B,UAAU,EAAE/B,KAAK,IAAIA,KAAK,CAACC;EAC7B;AACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}