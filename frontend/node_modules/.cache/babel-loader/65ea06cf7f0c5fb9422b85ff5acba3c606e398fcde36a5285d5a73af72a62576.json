{"ast":null,"code":"import { ref, watch } from 'vue';\nexport function len(s) {\n  let count = 0;\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  for (const _ of s) {\n    count++;\n  }\n  return count;\n}\nexport function isEmptyInputValue(value) {\n  return value === '' || value == null;\n}\nexport function useCursor(inputElRef) {\n  const selectionRef = ref(null);\n  function recordCursor() {\n    const {\n      value: input\n    } = inputElRef;\n    if (!(input === null || input === void 0 ? void 0 : input.focus)) {\n      reset();\n      return;\n    }\n    const {\n      selectionStart,\n      selectionEnd,\n      value\n    } = input;\n    if (selectionStart == null || selectionEnd == null) {\n      reset();\n      return;\n    }\n    selectionRef.value = {\n      start: selectionStart,\n      end: selectionEnd,\n      beforeText: value.slice(0, selectionStart),\n      afterText: value.slice(selectionEnd)\n    };\n  }\n  function restoreCursor() {\n    var _a;\n    const {\n      value: selection\n    } = selectionRef;\n    const {\n      value: inputEl\n    } = inputElRef;\n    if (!selection || !inputEl) {\n      return;\n    }\n    const {\n      value\n    } = inputEl;\n    const {\n      start,\n      beforeText,\n      afterText\n    } = selection;\n    let startPos = value.length;\n    if (value.endsWith(afterText)) {\n      startPos = value.length - afterText.length;\n    } else if (value.startsWith(beforeText)) {\n      startPos = beforeText.length;\n    } else {\n      const beforeLastChar = beforeText[start - 1];\n      const newIndex = value.indexOf(beforeLastChar, start - 1);\n      if (newIndex !== -1) {\n        startPos = newIndex + 1;\n      }\n    }\n    (_a = inputEl.setSelectionRange) === null || _a === void 0 ? void 0 : _a.call(inputEl, startPos, startPos);\n  }\n  function reset() {\n    selectionRef.value = null;\n  }\n  watch(inputElRef, reset);\n  return {\n    recordCursor,\n    restoreCursor\n  };\n}","map":{"version":3,"names":["ref","watch","len","s","count","_","isEmptyInputValue","value","useCursor","inputElRef","selectionRef","recordCursor","input","focus","reset","selectionStart","selectionEnd","start","end","beforeText","slice","afterText","restoreCursor","_a","selection","inputEl","startPos","length","endsWith","startsWith","beforeLastChar","newIndex","indexOf","setSelectionRange","call"],"sources":["/Users/wangjohnson/ai_marketing/frontend/node_modules/naive-ui/es/input/src/utils.mjs"],"sourcesContent":["import { ref, watch } from 'vue';\nexport function len(s) {\n  let count = 0;\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  for (const _ of s) {\n    count++;\n  }\n  return count;\n}\nexport function isEmptyInputValue(value) {\n  return value === '' || value == null;\n}\nexport function useCursor(inputElRef) {\n  const selectionRef = ref(null);\n  function recordCursor() {\n    const {\n      value: input\n    } = inputElRef;\n    if (!(input === null || input === void 0 ? void 0 : input.focus)) {\n      reset();\n      return;\n    }\n    const {\n      selectionStart,\n      selectionEnd,\n      value\n    } = input;\n    if (selectionStart == null || selectionEnd == null) {\n      reset();\n      return;\n    }\n    selectionRef.value = {\n      start: selectionStart,\n      end: selectionEnd,\n      beforeText: value.slice(0, selectionStart),\n      afterText: value.slice(selectionEnd)\n    };\n  }\n  function restoreCursor() {\n    var _a;\n    const {\n      value: selection\n    } = selectionRef;\n    const {\n      value: inputEl\n    } = inputElRef;\n    if (!selection || !inputEl) {\n      return;\n    }\n    const {\n      value\n    } = inputEl;\n    const {\n      start,\n      beforeText,\n      afterText\n    } = selection;\n    let startPos = value.length;\n    if (value.endsWith(afterText)) {\n      startPos = value.length - afterText.length;\n    } else if (value.startsWith(beforeText)) {\n      startPos = beforeText.length;\n    } else {\n      const beforeLastChar = beforeText[start - 1];\n      const newIndex = value.indexOf(beforeLastChar, start - 1);\n      if (newIndex !== -1) {\n        startPos = newIndex + 1;\n      }\n    }\n    (_a = inputEl.setSelectionRange) === null || _a === void 0 ? void 0 : _a.call(inputEl, startPos, startPos);\n  }\n  function reset() {\n    selectionRef.value = null;\n  }\n  watch(inputElRef, reset);\n  return {\n    recordCursor,\n    restoreCursor\n  };\n}"],"mappings":"AAAA,SAASA,GAAG,EAAEC,KAAK,QAAQ,KAAK;AAChC,OAAO,SAASC,GAAGA,CAACC,CAAC,EAAE;EACrB,IAAIC,KAAK,GAAG,CAAC;EACb;EACA,KAAK,MAAMC,CAAC,IAAIF,CAAC,EAAE;IACjBC,KAAK,EAAE;EACT;EACA,OAAOA,KAAK;AACd;AACA,OAAO,SAASE,iBAAiBA,CAACC,KAAK,EAAE;EACvC,OAAOA,KAAK,KAAK,EAAE,IAAIA,KAAK,IAAI,IAAI;AACtC;AACA,OAAO,SAASC,SAASA,CAACC,UAAU,EAAE;EACpC,MAAMC,YAAY,GAAGV,GAAG,CAAC,IAAI,CAAC;EAC9B,SAASW,YAAYA,CAAA,EAAG;IACtB,MAAM;MACJJ,KAAK,EAAEK;IACT,CAAC,GAAGH,UAAU;IACd,IAAI,EAAEG,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,KAAK,CAACC,KAAK,CAAC,EAAE;MAChEC,KAAK,CAAC,CAAC;MACP;IACF;IACA,MAAM;MACJC,cAAc;MACdC,YAAY;MACZT;IACF,CAAC,GAAGK,KAAK;IACT,IAAIG,cAAc,IAAI,IAAI,IAAIC,YAAY,IAAI,IAAI,EAAE;MAClDF,KAAK,CAAC,CAAC;MACP;IACF;IACAJ,YAAY,CAACH,KAAK,GAAG;MACnBU,KAAK,EAAEF,cAAc;MACrBG,GAAG,EAAEF,YAAY;MACjBG,UAAU,EAAEZ,KAAK,CAACa,KAAK,CAAC,CAAC,EAAEL,cAAc,CAAC;MAC1CM,SAAS,EAAEd,KAAK,CAACa,KAAK,CAACJ,YAAY;IACrC,CAAC;EACH;EACA,SAASM,aAAaA,CAAA,EAAG;IACvB,IAAIC,EAAE;IACN,MAAM;MACJhB,KAAK,EAAEiB;IACT,CAAC,GAAGd,YAAY;IAChB,MAAM;MACJH,KAAK,EAAEkB;IACT,CAAC,GAAGhB,UAAU;IACd,IAAI,CAACe,SAAS,IAAI,CAACC,OAAO,EAAE;MAC1B;IACF;IACA,MAAM;MACJlB;IACF,CAAC,GAAGkB,OAAO;IACX,MAAM;MACJR,KAAK;MACLE,UAAU;MACVE;IACF,CAAC,GAAGG,SAAS;IACb,IAAIE,QAAQ,GAAGnB,KAAK,CAACoB,MAAM;IAC3B,IAAIpB,KAAK,CAACqB,QAAQ,CAACP,SAAS,CAAC,EAAE;MAC7BK,QAAQ,GAAGnB,KAAK,CAACoB,MAAM,GAAGN,SAAS,CAACM,MAAM;IAC5C,CAAC,MAAM,IAAIpB,KAAK,CAACsB,UAAU,CAACV,UAAU,CAAC,EAAE;MACvCO,QAAQ,GAAGP,UAAU,CAACQ,MAAM;IAC9B,CAAC,MAAM;MACL,MAAMG,cAAc,GAAGX,UAAU,CAACF,KAAK,GAAG,CAAC,CAAC;MAC5C,MAAMc,QAAQ,GAAGxB,KAAK,CAACyB,OAAO,CAACF,cAAc,EAAEb,KAAK,GAAG,CAAC,CAAC;MACzD,IAAIc,QAAQ,KAAK,CAAC,CAAC,EAAE;QACnBL,QAAQ,GAAGK,QAAQ,GAAG,CAAC;MACzB;IACF;IACA,CAACR,EAAE,GAAGE,OAAO,CAACQ,iBAAiB,MAAM,IAAI,IAAIV,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACW,IAAI,CAACT,OAAO,EAAEC,QAAQ,EAAEA,QAAQ,CAAC;EAC5G;EACA,SAASZ,KAAKA,CAAA,EAAG;IACfJ,YAAY,CAACH,KAAK,GAAG,IAAI;EAC3B;EACAN,KAAK,CAACQ,UAAU,EAAEK,KAAK,CAAC;EACxB,OAAO;IACLH,YAAY;IACZW;EACF,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}