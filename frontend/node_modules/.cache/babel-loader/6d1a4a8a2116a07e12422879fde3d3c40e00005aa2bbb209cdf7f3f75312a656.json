{"ast":null,"code":"import { ref } from 'vue';\nimport { NButton, NForm, NFormItem, NInput, NCheckbox } from 'naive-ui';\nimport { useStore } from 'vuex';\n//组件挂载前加载数据\n\nconst __default__ = {\n  name: 'CreatePersonaForm'\n};\nexport default /*#__PURE__*/Object.assign(__default__, {\n  emits: ['createdPersonaInfo'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    //import axios from 'axios';\n    const store = useStore();\n    onBeforeMount(() => {\n      const store = useStore();\n      preData.value = store.getters.temp_campaign_data;\n      console.log('预加载数据：', preData.value);\n      handlePersonaInfo();\n    });\n    const preData = ref(null);\n    const handlePersonaInfo = () => {\n      console.log(typeof preData.value);\n      if (preData.value && JSON.stringify(preData.value) !== '{}') {\n        personaInfo.value.male = preData.value.personaData.male;\n        personaInfo.value.female = preData.value.personaData.female;\n        personaInfo.value.salary = preData.value.personaData.salary;\n        personaInfo.value.motives = preData.value.personaData.motives;\n      }\n    };\n\n    //定义表单数据\n    const placeholder = ['人民币(万元)', '人民币(万元)'];\n    const personaInfo = ref({\n      male: false,\n      female: false,\n      salary: null,\n      motives: ''\n    });\n    const emit = __emit;\n    const createPersona = async () => {\n      emit('createdPersonaInfo', personaInfo.value);\n      console.log('persona');\n      console.log(personaInfo.value);\n      /*try{\n          \n          const resp =  await axios.get('http://localhost:8005/account/auth/',{\n            headers: {\n                'Authorization': `Bearer ` // 设置请求头\n                }});\n          }catch (error) {\n        console.error('Failed to fetch user info:', error);\n        }*/\n    };\n    const handleInputInput = () => {\n      console.log('handle');\n    };\n    __expose({\n      createPersona\n    });\n    const __returned__ = {\n      store,\n      preData,\n      handlePersonaInfo,\n      placeholder,\n      personaInfo,\n      emit,\n      createPersona,\n      handleInputInput,\n      ref,\n      get NButton() {\n        return NButton;\n      },\n      get NForm() {\n        return NForm;\n      },\n      get NFormItem() {\n        return NFormItem;\n      },\n      get NInput() {\n        return NInput;\n      },\n      get NCheckbox() {\n        return NCheckbox;\n      },\n      get useStore() {\n        return useStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n});","map":{"version":3,"names":["ref","NButton","NForm","NFormItem","NInput","NCheckbox","useStore","__default__","name","store","onBeforeMount","preData","value","getters","temp_campaign_data","console","log","handlePersonaInfo","JSON","stringify","personaInfo","male","personaData","female","salary","motives","placeholder","emit","__emit","createPersona","handleInputInput","__expose"],"sources":["/Users/wangjohnson/ai_marketing/frontend/src/components/CreatePersonaForm.vue"],"sourcesContent":["<!--CreatePersonaForm.vue-->\n<template>\n    <n-form label-placement=\"left\" require-mark-placement=\"right-hanging\" label-width=\"190\" size=\"large\">\n    \n        <n-form-item label=\"主体性别:\">\n            <n-checkbox v-model:checked=\"personaInfo.male\">\n               男性\n            </n-checkbox>\n        <n-checkbox v-model:checked=\"personaInfo.female\" :disabled=\"disabled\">\n               女性\n        </n-checkbox>\n    </n-form-item>\n    \n    <n-form-item label=\"个人年收入范围?\">\n        <n-input v-model:value=\"personaInfo.salary\" pair\n          separator=\"-\"\n          :placeholder=\"placeholder\"\n          clearable\n          @update:value=\"handleInputInput\">\n        </n-input>\n    </n-form-item>\n\n    <n-form-item label=\"具有怎样的群体特征？\">\n        <n-input clearable v-model:value='personaInfo.motives' type=\"textarea\" placeholder=\"\"/>\n    </n-form-item>\n\n        \n        <n-button v-show=\"false\" @click=\"createPersona\">保存</n-button>\n    </n-form>\n</template>\n\n<script setup>\n//import axios from 'axios';\nimport {ref,defineEmits,defineExpose} from 'vue';\nimport { NButton, NForm,NFormItem, NInput, NCheckbox} from 'naive-ui';\nimport {useStore} from 'vuex';\n//组件挂载前加载数据\nconst store = useStore();\nonBeforeMount(()=>{\n    const store = useStore();\n    preData.value = store.getters.temp_campaign_data;\n    console.log('预加载数据：',preData.value);\n    handlePersonaInfo();\n    });\nconst preData = ref(null);\nconst handlePersonaInfo=()=>{\n    console.log(typeof(preData.value));\n    if(preData.value && JSON.stringify(preData.value)!=='{}' ){\n       personaInfo.value.male = preData.value.personaData.male;\n       personaInfo.value.female = preData.value.personaData.female;\n       personaInfo.value.salary = preData.value.personaData.salary;\n       personaInfo.value.motives = preData.value.personaData.motives;}\n    };\n\n\n//定义表单数据\nconst placeholder = ['人民币(万元)','人民币(万元)'];\nconst personaInfo = ref({\n    male: false,\n    female:false,\n    salary:null,\n    motives : '',\n    })\nconst emit = defineEmits(['createdPersonaInfo']);\nconst createPersona = async() =>{\n      emit('createdPersonaInfo',personaInfo.value);\n      console.log('persona');\n      console.log(personaInfo.value);\n      /*try{\n          \n          const resp =  await axios.get('http://localhost:8005/account/auth/',{\n            headers: {\n                'Authorization': `Bearer ` // 设置请求头\n                }});\n          }catch (error) {\n        console.error('Failed to fetch user info:', error);\n        }*/\n        \n      }\nconst handleInputInput = () => {\n    console.log('handle');\n    }\n\ndefineExpose({createPersona});\n</script>\n<script>\n  export default{\n      name:'CreatePersonaForm'\n      };\n</script>\n\n<style>\nlabel{\n    display:inline;\n    width:auto;}\n</style>\n"],"mappings":"AAiCA,SAAQA,GAA4B,QAAO,KAAK;AAChD,SAASC,OAAO,EAAEC,KAAK,EAACC,SAAS,EAAEC,MAAM,EAAEC,SAAS,QAAO,UAAU;AACrE,SAAQC,QAAQ,QAAO,MAAM;AAC7B;;AAkDE,MAAAC,WAAA,GAAc;EACVC,IAAI,EAAC;AACL,CAAC;;;;;;;IAxDP;IAKA,MAAMC,KAAK,GAAGH,QAAQ,CAAC,CAAC;IACxBI,aAAa,CAAC,MAAI;MACd,MAAMD,KAAK,GAAGH,QAAQ,CAAC,CAAC;MACxBK,OAAO,CAACC,KAAK,GAAGH,KAAK,CAACI,OAAO,CAACC,kBAAkB;MAChDC,OAAO,CAACC,GAAG,CAAC,QAAQ,EAACL,OAAO,CAACC,KAAK,CAAC;MACnCK,iBAAiB,CAAC,CAAC;IACnB,CAAC,CAAC;IACN,MAAMN,OAAO,GAAGX,GAAG,CAAC,IAAI,CAAC;IACzB,MAAMiB,iBAAiB,GAACA,CAAA,KAAI;MACxBF,OAAO,CAACC,GAAG,CAAC,OAAOL,OAAO,CAACC,KAAM,CAAC;MAClC,IAAGD,OAAO,CAACC,KAAK,IAAIM,IAAI,CAACC,SAAS,CAACR,OAAO,CAACC,KAAK,CAAC,KAAG,IAAI,EAAE;QACvDQ,WAAW,CAACR,KAAK,CAACS,IAAI,GAAGV,OAAO,CAACC,KAAK,CAACU,WAAW,CAACD,IAAI;QACvDD,WAAW,CAACR,KAAK,CAACW,MAAM,GAAGZ,OAAO,CAACC,KAAK,CAACU,WAAW,CAACC,MAAM;QAC3DH,WAAW,CAACR,KAAK,CAACY,MAAM,GAAGb,OAAO,CAACC,KAAK,CAACU,WAAW,CAACE,MAAM;QAC3DJ,WAAW,CAACR,KAAK,CAACa,OAAO,GAAGd,OAAO,CAACC,KAAK,CAACU,WAAW,CAACG,OAAO;MAAC;IACjE,CAAC;;IAGL;IACA,MAAMC,WAAW,GAAG,CAAC,SAAS,EAAC,SAAS,CAAC;IACzC,MAAMN,WAAW,GAAGpB,GAAG,CAAC;MACpBqB,IAAI,EAAE,KAAK;MACXE,MAAM,EAAC,KAAK;MACZC,MAAM,EAAC,IAAI;MACXC,OAAO,EAAG;IACV,CAAC,CAAC;IACN,MAAME,IAAI,GAAGC,MAAmC;IAChD,MAAMC,aAAa,GAAG,MAAAA,CAAA,KAAU;MAC1BF,IAAI,CAAC,oBAAoB,EAACP,WAAW,CAACR,KAAK,CAAC;MAC5CG,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;MACtBD,OAAO,CAACC,GAAG,CAACI,WAAW,CAACR,KAAK,CAAC;MAC9B;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAEM,CAAC;IACP,MAAMkB,gBAAgB,GAAGA,CAAA,KAAM;MAC3Bf,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;IACrB,CAAC;IAELe,QAAY,CAAC;MAACF;IAAa,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}