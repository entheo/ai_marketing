{"ast":null,"code":"import { depx } from 'seemly';\nimport { formatLength } from \"../../_utils/index.mjs\";\nexport const SELECTION_COL_WIDTH = 40;\nexport const EXPAND_COL_WIDTH = 40;\nexport function getNumberColWidth(col) {\n  if (col.type === 'selection') {\n    return col.width === undefined ? SELECTION_COL_WIDTH : depx(col.width);\n  }\n  if (col.type === 'expand') {\n    return col.width === undefined ? EXPAND_COL_WIDTH : depx(col.width);\n  }\n  if ('children' in col) return undefined;\n  if (typeof col.width === 'string') {\n    return depx(col.width);\n  }\n  return col.width;\n}\nexport function getStringColWidth(col) {\n  var _a, _b;\n  if (col.type === 'selection') {\n    return formatLength((_a = col.width) !== null && _a !== void 0 ? _a : SELECTION_COL_WIDTH);\n  }\n  if (col.type === 'expand') {\n    return formatLength((_b = col.width) !== null && _b !== void 0 ? _b : EXPAND_COL_WIDTH);\n  }\n  if ('children' in col) {\n    return undefined;\n  }\n  return formatLength(col.width);\n}\nexport function getColKey(col) {\n  if (col.type === 'selection') return '__n_selection__';\n  if (col.type === 'expand') return '__n_expand__';\n  return col.key;\n}\nexport function createShallowClonedObject(object) {\n  if (!object) return object;\n  if (typeof object === 'object') {\n    return Object.assign({}, object);\n  }\n  return object;\n}\nexport function getFlagOfOrder(order) {\n  if (order === 'ascend') return 1;else if (order === 'descend') return -1;\n  return 0;\n}\n// priority: min-width > max-width > width\nexport function clampValueFollowCSSRules(value, min, max) {\n  if (max !== undefined) {\n    value = Math.min(value, typeof max === 'number' ? max : parseFloat(max));\n  }\n  if (min !== undefined) {\n    value = Math.max(value, typeof min === 'number' ? min : parseFloat(min));\n  }\n  return value;\n}\nexport function createCustomWidthStyle(column, resizedWidth) {\n  if (resizedWidth !== undefined) {\n    return {\n      width: resizedWidth,\n      minWidth: resizedWidth,\n      maxWidth: resizedWidth\n    };\n  }\n  const width = getStringColWidth(column);\n  const {\n    minWidth,\n    maxWidth\n  } = column;\n  return {\n    width,\n    minWidth: formatLength(minWidth) || width,\n    maxWidth: formatLength(maxWidth)\n  };\n}\nexport function createRowClassName(row, index, rowClassName) {\n  if (typeof rowClassName === 'function') return rowClassName(row, index);\n  return rowClassName || '';\n}\n// for compatibility\n// If column.filterOptionValues or column.defaultFilterOptionValues is set, use\n// array value\nexport function shouldUseArrayInSingleMode(column) {\n  return column.filterOptionValues !== undefined || column.filterOptionValue === undefined && column.defaultFilterOptionValues !== undefined;\n}\nexport function isColumnSortable(column) {\n  if ('children' in column) return false;\n  return !!column.sorter;\n}\nexport function isColumnResizable(column) {\n  if ('children' in column && !!column.children.length) return false;\n  return !!column.resizable;\n}\nexport function isColumnFilterable(column) {\n  if ('children' in column) return false;\n  return !!column.filter && (!!column.filterOptions || !!column.renderFilterMenu);\n}\nfunction getNextOrderOf(order) {\n  if (!order) return 'descend';else if (order === 'descend') return 'ascend';\n  return false;\n}\nexport function createNextSorter(column, currentSortState) {\n  if (column.sorter === undefined) return null;\n  if (currentSortState === null || currentSortState.columnKey !== column.key) {\n    return {\n      columnKey: column.key,\n      sorter: column.sorter,\n      order: getNextOrderOf(false)\n    };\n  } else {\n    return Object.assign(Object.assign({}, currentSortState), {\n      order: getNextOrderOf(currentSortState.order)\n    });\n  }\n}\nexport function isColumnSorting(column, mergedSortState) {\n  return mergedSortState.find(state => state.columnKey === column.key && state.order) !== undefined;\n}\nfunction formatCsvCell(value) {\n  if (typeof value === 'string') {\n    return value.replace(/,/g, '\\\\,');\n  } else if (value === null || value === undefined) {\n    return '';\n  } else {\n    // eslint-disable-next-line @typescript-eslint/no-base-to-string, @typescript-eslint/restrict-template-expressions\n    return `${value}`.replace(/,/g, '\\\\,');\n  }\n}\nexport function generateCsv(columns, data) {\n  const exportableColumns = columns.filter(column => column.type !== 'expand' && column.type !== 'selection');\n  const header = exportableColumns.map(col => col.title).join(',');\n  const rows = data.map(row => {\n    return exportableColumns.map(col => formatCsvCell(row[col.key])).join(',');\n  });\n  return [header, ...rows].join('\\n');\n}","map":{"version":3,"names":["depx","formatLength","SELECTION_COL_WIDTH","EXPAND_COL_WIDTH","getNumberColWidth","col","type","width","undefined","getStringColWidth","_a","_b","getColKey","key","createShallowClonedObject","object","Object","assign","getFlagOfOrder","order","clampValueFollowCSSRules","value","min","max","Math","parseFloat","createCustomWidthStyle","column","resizedWidth","minWidth","maxWidth","createRowClassName","row","index","rowClassName","shouldUseArrayInSingleMode","filterOptionValues","filterOptionValue","defaultFilterOptionValues","isColumnSortable","sorter","isColumnResizable","children","length","resizable","isColumnFilterable","filter","filterOptions","renderFilterMenu","getNextOrderOf","createNextSorter","currentSortState","columnKey","isColumnSorting","mergedSortState","find","state","formatCsvCell","replace","generateCsv","columns","data","exportableColumns","header","map","title","join","rows"],"sources":["/Users/wangjohnson/ai_marketing/frontend/node_modules/naive-ui/es/data-table/src/utils.mjs"],"sourcesContent":["import { depx } from 'seemly';\nimport { formatLength } from \"../../_utils/index.mjs\";\nexport const SELECTION_COL_WIDTH = 40;\nexport const EXPAND_COL_WIDTH = 40;\nexport function getNumberColWidth(col) {\n  if (col.type === 'selection') {\n    return col.width === undefined ? SELECTION_COL_WIDTH : depx(col.width);\n  }\n  if (col.type === 'expand') {\n    return col.width === undefined ? EXPAND_COL_WIDTH : depx(col.width);\n  }\n  if ('children' in col) return undefined;\n  if (typeof col.width === 'string') {\n    return depx(col.width);\n  }\n  return col.width;\n}\nexport function getStringColWidth(col) {\n  var _a, _b;\n  if (col.type === 'selection') {\n    return formatLength((_a = col.width) !== null && _a !== void 0 ? _a : SELECTION_COL_WIDTH);\n  }\n  if (col.type === 'expand') {\n    return formatLength((_b = col.width) !== null && _b !== void 0 ? _b : EXPAND_COL_WIDTH);\n  }\n  if ('children' in col) {\n    return undefined;\n  }\n  return formatLength(col.width);\n}\nexport function getColKey(col) {\n  if (col.type === 'selection') return '__n_selection__';\n  if (col.type === 'expand') return '__n_expand__';\n  return col.key;\n}\nexport function createShallowClonedObject(object) {\n  if (!object) return object;\n  if (typeof object === 'object') {\n    return Object.assign({}, object);\n  }\n  return object;\n}\nexport function getFlagOfOrder(order) {\n  if (order === 'ascend') return 1;else if (order === 'descend') return -1;\n  return 0;\n}\n// priority: min-width > max-width > width\nexport function clampValueFollowCSSRules(value, min, max) {\n  if (max !== undefined) {\n    value = Math.min(value, typeof max === 'number' ? max : parseFloat(max));\n  }\n  if (min !== undefined) {\n    value = Math.max(value, typeof min === 'number' ? min : parseFloat(min));\n  }\n  return value;\n}\nexport function createCustomWidthStyle(column, resizedWidth) {\n  if (resizedWidth !== undefined) {\n    return {\n      width: resizedWidth,\n      minWidth: resizedWidth,\n      maxWidth: resizedWidth\n    };\n  }\n  const width = getStringColWidth(column);\n  const {\n    minWidth,\n    maxWidth\n  } = column;\n  return {\n    width,\n    minWidth: formatLength(minWidth) || width,\n    maxWidth: formatLength(maxWidth)\n  };\n}\nexport function createRowClassName(row, index, rowClassName) {\n  if (typeof rowClassName === 'function') return rowClassName(row, index);\n  return rowClassName || '';\n}\n// for compatibility\n// If column.filterOptionValues or column.defaultFilterOptionValues is set, use\n// array value\nexport function shouldUseArrayInSingleMode(column) {\n  return column.filterOptionValues !== undefined || column.filterOptionValue === undefined && column.defaultFilterOptionValues !== undefined;\n}\nexport function isColumnSortable(column) {\n  if ('children' in column) return false;\n  return !!column.sorter;\n}\nexport function isColumnResizable(column) {\n  if ('children' in column && !!column.children.length) return false;\n  return !!column.resizable;\n}\nexport function isColumnFilterable(column) {\n  if ('children' in column) return false;\n  return !!column.filter && (!!column.filterOptions || !!column.renderFilterMenu);\n}\nfunction getNextOrderOf(order) {\n  if (!order) return 'descend';else if (order === 'descend') return 'ascend';\n  return false;\n}\nexport function createNextSorter(column, currentSortState) {\n  if (column.sorter === undefined) return null;\n  if (currentSortState === null || currentSortState.columnKey !== column.key) {\n    return {\n      columnKey: column.key,\n      sorter: column.sorter,\n      order: getNextOrderOf(false)\n    };\n  } else {\n    return Object.assign(Object.assign({}, currentSortState), {\n      order: getNextOrderOf(currentSortState.order)\n    });\n  }\n}\nexport function isColumnSorting(column, mergedSortState) {\n  return mergedSortState.find(state => state.columnKey === column.key && state.order) !== undefined;\n}\nfunction formatCsvCell(value) {\n  if (typeof value === 'string') {\n    return value.replace(/,/g, '\\\\,');\n  } else if (value === null || value === undefined) {\n    return '';\n  } else {\n    // eslint-disable-next-line @typescript-eslint/no-base-to-string, @typescript-eslint/restrict-template-expressions\n    return `${value}`.replace(/,/g, '\\\\,');\n  }\n}\nexport function generateCsv(columns, data) {\n  const exportableColumns = columns.filter(column => column.type !== 'expand' && column.type !== 'selection');\n  const header = exportableColumns.map(col => col.title).join(',');\n  const rows = data.map(row => {\n    return exportableColumns.map(col => formatCsvCell(row[col.key])).join(',');\n  });\n  return [header, ...rows].join('\\n');\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}