{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { defineComponent, h, ref, toRef, nextTick, computed, Transition } from 'vue';\nimport { createTreeMate } from 'treemate';\nimport { VBinder, VFollower, VTarget } from 'vueuc';\nimport { useIsMounted, useMergedState } from 'vooks';\nimport { NInput } from \"../../input/index.mjs\";\nimport { NInternalSelectMenu } from \"../../_internal/index.mjs\";\nimport { call, useAdjustedTo, warn } from \"../../_utils/index.mjs\";\nimport { useConfig, useFormItem, useTheme, useThemeClass } from \"../../_mixins/index.mjs\";\nimport { mentionLight } from \"../styles/index.mjs\";\nimport { getRelativePosition } from \"./utils.mjs\";\nimport style from \"./styles/index.cssr.mjs\";\nexport const mentionProps = Object.assign(Object.assign({}, useTheme.props), {\n  to: useAdjustedTo.propTo,\n  autosize: [Boolean, Object],\n  options: {\n    type: Array,\n    default: []\n  },\n  filter: {\n    type: Function,\n    default: (pattern, option) => {\n      if (!pattern) return true;\n      if (typeof option.label === 'string') {\n        return option.label.startsWith(pattern);\n      }\n      if (typeof option.value === 'string') {\n        return option.value.startsWith(pattern);\n      }\n      return false;\n    }\n  },\n  type: {\n    type: String,\n    default: 'text'\n  },\n  separator: {\n    type: String,\n    validator: separator => {\n      if (separator.length !== 1) {\n        warn('mention', \"`separator`'s length must be 1.\");\n        return false;\n      }\n      return true;\n    },\n    default: ' '\n  },\n  bordered: {\n    type: Boolean,\n    default: undefined\n  },\n  disabled: Boolean,\n  value: String,\n  defaultValue: {\n    type: String,\n    default: ''\n  },\n  loading: Boolean,\n  prefix: {\n    type: [String, Array],\n    default: '@'\n  },\n  placeholder: {\n    type: String,\n    default: ''\n  },\n  placement: {\n    type: String,\n    default: 'bottom-start'\n  },\n  size: String,\n  renderLabel: Function,\n  status: String,\n  'onUpdate:show': [Array, Function],\n  onUpdateShow: [Array, Function],\n  'onUpdate:value': [Array, Function],\n  onUpdateValue: [Array, Function],\n  onSearch: Function,\n  onSelect: Function,\n  onFocus: Function,\n  onBlur: Function,\n  // private\n  internalDebug: Boolean\n});\nexport default defineComponent({\n  name: 'Mention',\n  props: mentionProps,\n  setup(props) {\n    const {\n      namespaceRef,\n      mergedClsPrefixRef,\n      mergedBorderedRef,\n      inlineThemeDisabled\n    } = useConfig(props);\n    const themeRef = useTheme('Mention', '-mention', style, mentionLight, props, mergedClsPrefixRef);\n    const formItem = useFormItem(props);\n    const inputInstRef = ref(null);\n    const cursorRef = ref(null);\n    const followerRef = ref(null);\n    const partialPatternRef = ref('');\n    let cachedPrefix = null;\n    // cached pattern end is for partial pattern\n    // for example @abc|def\n    // end is after `c`\n    let cachedPartialPatternStart = null;\n    let cachedPartialPatternEnd = null;\n    const filteredOptionsRef = computed(() => {\n      const {\n        value: pattern\n      } = partialPatternRef;\n      return props.options.filter(option => props.filter(pattern, option));\n    });\n    const treeMateRef = computed(() => {\n      return createTreeMate(filteredOptionsRef.value, {\n        getKey: v => {\n          return v.value;\n        }\n      });\n    });\n    const selectMenuInstRef = ref(null);\n    const showMenuRef = ref(false);\n    const uncontrolledValueRef = ref(props.defaultValue);\n    const controlledValueRef = toRef(props, 'value');\n    const mergedValueRef = useMergedState(controlledValueRef, uncontrolledValueRef);\n    const cssVarsRef = computed(() => {\n      const {\n        self: {\n          menuBoxShadow\n        }\n      } = themeRef.value;\n      return {\n        '--n-menu-box-shadow': menuBoxShadow\n      };\n    });\n    const themeClassHandle = inlineThemeDisabled ? useThemeClass('mention', undefined, cssVarsRef, props) : undefined;\n    function doUpdateShowMenu(show) {\n      if (props.disabled) return;\n      const {\n        onUpdateShow,\n        'onUpdate:show': _onUpdateShow\n      } = props;\n      if (onUpdateShow) call(onUpdateShow, show);\n      if (_onUpdateShow) call(_onUpdateShow, show);\n      if (!show) {\n        cachedPrefix = null;\n        cachedPartialPatternStart = null;\n        cachedPartialPatternEnd = null;\n      }\n      showMenuRef.value = show;\n    }\n    function doUpdateValue(value) {\n      const {\n        onUpdateValue,\n        'onUpdate:value': _onUpdateValue\n      } = props;\n      const {\n        nTriggerFormChange,\n        nTriggerFormInput\n      } = formItem;\n      if (_onUpdateValue) {\n        call(_onUpdateValue, value);\n      }\n      if (onUpdateValue) {\n        call(onUpdateValue, value);\n      }\n      nTriggerFormInput();\n      nTriggerFormChange();\n      uncontrolledValueRef.value = value;\n    }\n    function getInputEl() {\n      return props.type === 'text' ? inputInstRef.value.inputElRef : inputInstRef.value.textareaElRef;\n    }\n    function deriveShowMenu() {\n      var _a;\n      const inputEl = getInputEl();\n      if (document.activeElement !== inputEl) {\n        doUpdateShowMenu(false);\n        return;\n      }\n      const {\n        selectionEnd\n      } = inputEl;\n      if (selectionEnd === null) {\n        doUpdateShowMenu(false);\n        return;\n      }\n      const inputValue = inputEl.value;\n      const {\n        separator\n      } = props;\n      const {\n        prefix\n      } = props;\n      const prefixArray = typeof prefix === 'string' ? [prefix] : prefix;\n      for (let i = selectionEnd - 1; i >= 0; --i) {\n        const char = inputValue[i];\n        if (char === separator || char === '\\n' || char === '\\r') {\n          doUpdateShowMenu(false);\n          return;\n        }\n        if (prefixArray.includes(char)) {\n          const partialPattern = inputValue.slice(i + 1, selectionEnd);\n          doUpdateShowMenu(true);\n          (_a = props.onSearch) === null || _a === void 0 ? void 0 : _a.call(props, partialPattern, char);\n          partialPatternRef.value = partialPattern;\n          cachedPrefix = char;\n          cachedPartialPatternStart = i + 1;\n          cachedPartialPatternEnd = selectionEnd;\n          return;\n        }\n      }\n      doUpdateShowMenu(false);\n    }\n    function syncCursor() {\n      const {\n        value: cursorAnchor\n      } = cursorRef;\n      if (!cursorAnchor) return;\n      const inputEl = getInputEl();\n      const cursorPos = getRelativePosition(inputEl);\n      cursorPos.left += inputEl.parentElement.offsetLeft;\n      cursorAnchor.style.left = `${cursorPos.left}px`;\n      cursorAnchor.style.top = `${cursorPos.top + cursorPos.height}px`;\n    }\n    function syncPosition() {\n      var _a;\n      if (!showMenuRef.value) return;\n      (_a = followerRef.value) === null || _a === void 0 ? void 0 : _a.syncPosition();\n    }\n    function handleInputUpdateValue(value) {\n      doUpdateValue(value);\n      // Vue update is mirco task.\n      // So DOM must have been done when sync start in marco task.\n      // I can't use nextTick(), Chrome doesn't update scrollLeft of INPUT\n      // element is immediatelly updated. The behavior is wired but that's what\n      // happens.\n      syncAfterCursorMove();\n    }\n    function syncAfterCursorMove() {\n      setTimeout(() => {\n        syncCursor();\n        deriveShowMenu();\n        void nextTick().then(syncPosition);\n      }, 0);\n    }\n    function handleInputKeyDown(e) {\n      var _a, _b;\n      if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {\n        if ((_a = inputInstRef.value) === null || _a === void 0 ? void 0 : _a.isCompositing) return;\n        syncAfterCursorMove();\n      } else if (e.key === 'ArrowUp' || e.key === 'ArrowDown' || e.key === 'Enter') {\n        if ((_b = inputInstRef.value) === null || _b === void 0 ? void 0 : _b.isCompositing) return;\n        const {\n          value: selectMenuInst\n        } = selectMenuInstRef;\n        if (showMenuRef.value) {\n          if (selectMenuInst) {\n            e.preventDefault();\n            if (e.key === 'ArrowUp') {\n              selectMenuInst.prev();\n            } else if (e.key === 'ArrowDown') {\n              selectMenuInst.next();\n            } else {\n              // Enter\n              const pendingOptionTmNode = selectMenuInst.getPendingTmNode();\n              if (pendingOptionTmNode) {\n                handleSelect(pendingOptionTmNode);\n              } else {\n                doUpdateShowMenu(false);\n              }\n            }\n          }\n        } else {\n          syncAfterCursorMove();\n        }\n      }\n    }\n    function handleInputFocus(e) {\n      const {\n        onFocus\n      } = props;\n      onFocus === null || onFocus === void 0 ? void 0 : onFocus(e);\n      const {\n        nTriggerFormFocus\n      } = formItem;\n      nTriggerFormFocus();\n      syncAfterCursorMove();\n    }\n    function focus() {\n      var _a;\n      (_a = inputInstRef.value) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n    function blur() {\n      var _a;\n      (_a = inputInstRef.value) === null || _a === void 0 ? void 0 : _a.blur();\n    }\n    function handleInputBlur(e) {\n      const {\n        onBlur\n      } = props;\n      onBlur === null || onBlur === void 0 ? void 0 : onBlur(e);\n      const {\n        nTriggerFormBlur\n      } = formItem;\n      nTriggerFormBlur();\n      doUpdateShowMenu(false);\n    }\n    function handleSelect(tmNode) {\n      var _a;\n      if (cachedPrefix === null || cachedPartialPatternStart === null || cachedPartialPatternEnd === null) {\n        if (process.env.NODE_ENV !== 'production') {\n          warn('mention', 'Cache works unexpectly, this is probably a bug. Please create an issue.');\n        }\n        return;\n      }\n      const {\n        rawNode: {\n          value = ''\n        }\n      } = tmNode;\n      const inputEl = getInputEl();\n      const inputValue = inputEl.value;\n      const {\n        separator\n      } = props;\n      const nextEndPart = inputValue.slice(cachedPartialPatternEnd);\n      const alreadySeparated = nextEndPart.startsWith(separator);\n      const nextMiddlePart = `${value}${alreadySeparated ? '' : separator}`;\n      doUpdateValue(inputValue.slice(0, cachedPartialPatternStart) + nextMiddlePart + nextEndPart);\n      (_a = props.onSelect) === null || _a === void 0 ? void 0 : _a.call(props, tmNode.rawNode, cachedPrefix);\n      const nextSelectionEnd = cachedPartialPatternStart + nextMiddlePart.length + (alreadySeparated ? 1 : 0);\n      void nextTick().then(() => {\n        // input value is updated\n        inputEl.selectionStart = nextSelectionEnd;\n        inputEl.selectionEnd = nextSelectionEnd;\n        deriveShowMenu();\n      });\n    }\n    function handleInputMouseDown() {\n      if (!props.disabled) {\n        syncAfterCursorMove();\n      }\n    }\n    return {\n      namespace: namespaceRef,\n      mergedClsPrefix: mergedClsPrefixRef,\n      mergedBordered: mergedBorderedRef,\n      mergedSize: formItem.mergedSizeRef,\n      mergedStatus: formItem.mergedStatusRef,\n      mergedTheme: themeRef,\n      treeMate: treeMateRef,\n      selectMenuInstRef,\n      inputInstRef,\n      cursorRef,\n      followerRef,\n      showMenu: showMenuRef,\n      adjustedTo: useAdjustedTo(props),\n      isMounted: useIsMounted(),\n      mergedValue: mergedValueRef,\n      handleInputFocus,\n      handleInputBlur,\n      handleInputUpdateValue,\n      handleInputKeyDown,\n      handleSelect,\n      handleInputMouseDown,\n      focus,\n      blur,\n      cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n      themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n      onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender\n    };\n  },\n  render() {\n    const {\n      mergedTheme,\n      mergedClsPrefix,\n      $slots\n    } = this;\n    return h(\"div\", {\n      class: `${mergedClsPrefix}-mention`\n    }, h(NInput, {\n      status: this.mergedStatus,\n      themeOverrides: mergedTheme.peerOverrides.Input,\n      theme: mergedTheme.peers.Input,\n      size: this.mergedSize,\n      autosize: this.autosize,\n      type: this.type,\n      ref: \"inputInstRef\",\n      placeholder: this.placeholder,\n      onMousedown: this.handleInputMouseDown,\n      onUpdateValue: this.handleInputUpdateValue,\n      onKeydown: this.handleInputKeyDown,\n      onFocus: this.handleInputFocus,\n      onBlur: this.handleInputBlur,\n      bordered: this.mergedBordered,\n      disabled: this.disabled,\n      value: this.mergedValue\n    }), h(VBinder, null, {\n      default: () => [h(VTarget, null, {\n        default: () => {\n          const style = {\n            position: 'absolute',\n            width: 0,\n            height: 0\n          };\n          if (process.env.NODE_ENV !== 'production' && this.internalDebug) {\n            style.width = '1px';\n            style.height = '1px';\n            style.background = 'red';\n          }\n          return h(\"div\", {\n            style: style,\n            ref: \"cursorRef\"\n          });\n        }\n      }), h(VFollower, {\n        ref: \"followerRef\",\n        placement: this.placement,\n        show: this.showMenu,\n        containerClass: this.namespace,\n        to: this.adjustedTo,\n        teleportDisabled: this.adjustedTo === useAdjustedTo.tdkey\n      }, {\n        default: () => h(Transition, {\n          name: \"fade-in-scale-up-transition\",\n          appear: this.isMounted\n        }, {\n          default: () => {\n            const {\n              mergedTheme,\n              onRender\n            } = this;\n            onRender === null || onRender === void 0 ? void 0 : onRender();\n            return this.showMenu ? h(NInternalSelectMenu, {\n              clsPrefix: mergedClsPrefix,\n              theme: mergedTheme.peers.InternalSelectMenu,\n              themeOverrides: mergedTheme.peerOverrides.InternalSelectMenu,\n              autoPending: true,\n              ref: \"selectMenuInstRef\",\n              class: [`${mergedClsPrefix}-mention-menu`, this.themeClass],\n              loading: this.loading,\n              treeMate: this.treeMate,\n              virtualScroll: false,\n              style: this.cssVars,\n              onToggle: this.handleSelect,\n              renderLabel: this.renderLabel\n            }, $slots) : null;\n          }\n        })\n      })]\n    }));\n  }\n});","map":{"version":3,"names":["defineComponent","h","ref","toRef","nextTick","computed","Transition","createTreeMate","VBinder","VFollower","VTarget","useIsMounted","useMergedState","NInput","NInternalSelectMenu","call","useAdjustedTo","warn","useConfig","useFormItem","useTheme","useThemeClass","mentionLight","getRelativePosition","style","mentionProps","Object","assign","props","to","propTo","autosize","Boolean","options","type","Array","default","filter","Function","pattern","option","label","startsWith","value","String","separator","validator","length","bordered","undefined","disabled","defaultValue","loading","prefix","placeholder","placement","size","renderLabel","status","onUpdateShow","onUpdateValue","onSearch","onSelect","onFocus","onBlur","internalDebug","name","setup","namespaceRef","mergedClsPrefixRef","mergedBorderedRef","inlineThemeDisabled","themeRef","formItem","inputInstRef","cursorRef","followerRef","partialPatternRef","cachedPrefix","cachedPartialPatternStart","cachedPartialPatternEnd","filteredOptionsRef","treeMateRef","getKey","v","selectMenuInstRef","showMenuRef","uncontrolledValueRef","controlledValueRef","mergedValueRef","cssVarsRef","self","menuBoxShadow","themeClassHandle","doUpdateShowMenu","show","_onUpdateShow","doUpdateValue","_onUpdateValue","nTriggerFormChange","nTriggerFormInput","getInputEl","inputElRef","textareaElRef","deriveShowMenu","_a","inputEl","document","activeElement","selectionEnd","inputValue","prefixArray","i","char","includes","partialPattern","slice","syncCursor","cursorAnchor","cursorPos","left","parentElement","offsetLeft","top","height","syncPosition","handleInputUpdateValue","syncAfterCursorMove","setTimeout","then","handleInputKeyDown","e","_b","key","isCompositing","selectMenuInst","preventDefault","prev","next","pendingOptionTmNode","getPendingTmNode","handleSelect","handleInputFocus","nTriggerFormFocus","focus","blur","handleInputBlur","nTriggerFormBlur","tmNode","process","env","NODE_ENV","rawNode","nextEndPart","alreadySeparated","nextMiddlePart","nextSelectionEnd","selectionStart","handleInputMouseDown","namespace","mergedClsPrefix","mergedBordered","mergedSize","mergedSizeRef","mergedStatus","mergedStatusRef","mergedTheme","treeMate","showMenu","adjustedTo","isMounted","mergedValue","cssVars","themeClass","onRender","render","$slots","class","themeOverrides","peerOverrides","Input","theme","peers","onMousedown","onKeydown","position","width","background","containerClass","teleportDisabled","tdkey","appear","clsPrefix","InternalSelectMenu","autoPending","virtualScroll","onToggle"],"sources":["/Users/wangjohnson/ai_marketing/frontend/node_modules/naive-ui/es/mention/src/Mention.mjs"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { defineComponent, h, ref, toRef, nextTick, computed, Transition } from 'vue';\nimport { createTreeMate } from 'treemate';\nimport { VBinder, VFollower, VTarget } from 'vueuc';\nimport { useIsMounted, useMergedState } from 'vooks';\nimport { NInput } from \"../../input/index.mjs\";\nimport { NInternalSelectMenu } from \"../../_internal/index.mjs\";\nimport { call, useAdjustedTo, warn } from \"../../_utils/index.mjs\";\nimport { useConfig, useFormItem, useTheme, useThemeClass } from \"../../_mixins/index.mjs\";\nimport { mentionLight } from \"../styles/index.mjs\";\nimport { getRelativePosition } from \"./utils.mjs\";\nimport style from \"./styles/index.cssr.mjs\";\nexport const mentionProps = Object.assign(Object.assign({}, useTheme.props), {\n  to: useAdjustedTo.propTo,\n  autosize: [Boolean, Object],\n  options: {\n    type: Array,\n    default: []\n  },\n  filter: {\n    type: Function,\n    default: (pattern, option) => {\n      if (!pattern) return true;\n      if (typeof option.label === 'string') {\n        return option.label.startsWith(pattern);\n      }\n      if (typeof option.value === 'string') {\n        return option.value.startsWith(pattern);\n      }\n      return false;\n    }\n  },\n  type: {\n    type: String,\n    default: 'text'\n  },\n  separator: {\n    type: String,\n    validator: separator => {\n      if (separator.length !== 1) {\n        warn('mention', \"`separator`'s length must be 1.\");\n        return false;\n      }\n      return true;\n    },\n    default: ' '\n  },\n  bordered: {\n    type: Boolean,\n    default: undefined\n  },\n  disabled: Boolean,\n  value: String,\n  defaultValue: {\n    type: String,\n    default: ''\n  },\n  loading: Boolean,\n  prefix: {\n    type: [String, Array],\n    default: '@'\n  },\n  placeholder: {\n    type: String,\n    default: ''\n  },\n  placement: {\n    type: String,\n    default: 'bottom-start'\n  },\n  size: String,\n  renderLabel: Function,\n  status: String,\n  'onUpdate:show': [Array, Function],\n  onUpdateShow: [Array, Function],\n  'onUpdate:value': [Array, Function],\n  onUpdateValue: [Array, Function],\n  onSearch: Function,\n  onSelect: Function,\n  onFocus: Function,\n  onBlur: Function,\n  // private\n  internalDebug: Boolean\n});\nexport default defineComponent({\n  name: 'Mention',\n  props: mentionProps,\n  setup(props) {\n    const {\n      namespaceRef,\n      mergedClsPrefixRef,\n      mergedBorderedRef,\n      inlineThemeDisabled\n    } = useConfig(props);\n    const themeRef = useTheme('Mention', '-mention', style, mentionLight, props, mergedClsPrefixRef);\n    const formItem = useFormItem(props);\n    const inputInstRef = ref(null);\n    const cursorRef = ref(null);\n    const followerRef = ref(null);\n    const partialPatternRef = ref('');\n    let cachedPrefix = null;\n    // cached pattern end is for partial pattern\n    // for example @abc|def\n    // end is after `c`\n    let cachedPartialPatternStart = null;\n    let cachedPartialPatternEnd = null;\n    const filteredOptionsRef = computed(() => {\n      const {\n        value: pattern\n      } = partialPatternRef;\n      return props.options.filter(option => props.filter(pattern, option));\n    });\n    const treeMateRef = computed(() => {\n      return createTreeMate(filteredOptionsRef.value, {\n        getKey: v => {\n          return v.value;\n        }\n      });\n    });\n    const selectMenuInstRef = ref(null);\n    const showMenuRef = ref(false);\n    const uncontrolledValueRef = ref(props.defaultValue);\n    const controlledValueRef = toRef(props, 'value');\n    const mergedValueRef = useMergedState(controlledValueRef, uncontrolledValueRef);\n    const cssVarsRef = computed(() => {\n      const {\n        self: {\n          menuBoxShadow\n        }\n      } = themeRef.value;\n      return {\n        '--n-menu-box-shadow': menuBoxShadow\n      };\n    });\n    const themeClassHandle = inlineThemeDisabled ? useThemeClass('mention', undefined, cssVarsRef, props) : undefined;\n    function doUpdateShowMenu(show) {\n      if (props.disabled) return;\n      const {\n        onUpdateShow,\n        'onUpdate:show': _onUpdateShow\n      } = props;\n      if (onUpdateShow) call(onUpdateShow, show);\n      if (_onUpdateShow) call(_onUpdateShow, show);\n      if (!show) {\n        cachedPrefix = null;\n        cachedPartialPatternStart = null;\n        cachedPartialPatternEnd = null;\n      }\n      showMenuRef.value = show;\n    }\n    function doUpdateValue(value) {\n      const {\n        onUpdateValue,\n        'onUpdate:value': _onUpdateValue\n      } = props;\n      const {\n        nTriggerFormChange,\n        nTriggerFormInput\n      } = formItem;\n      if (_onUpdateValue) {\n        call(_onUpdateValue, value);\n      }\n      if (onUpdateValue) {\n        call(onUpdateValue, value);\n      }\n      nTriggerFormInput();\n      nTriggerFormChange();\n      uncontrolledValueRef.value = value;\n    }\n    function getInputEl() {\n      return props.type === 'text' ? inputInstRef.value.inputElRef : inputInstRef.value.textareaElRef;\n    }\n    function deriveShowMenu() {\n      var _a;\n      const inputEl = getInputEl();\n      if (document.activeElement !== inputEl) {\n        doUpdateShowMenu(false);\n        return;\n      }\n      const {\n        selectionEnd\n      } = inputEl;\n      if (selectionEnd === null) {\n        doUpdateShowMenu(false);\n        return;\n      }\n      const inputValue = inputEl.value;\n      const {\n        separator\n      } = props;\n      const {\n        prefix\n      } = props;\n      const prefixArray = typeof prefix === 'string' ? [prefix] : prefix;\n      for (let i = selectionEnd - 1; i >= 0; --i) {\n        const char = inputValue[i];\n        if (char === separator || char === '\\n' || char === '\\r') {\n          doUpdateShowMenu(false);\n          return;\n        }\n        if (prefixArray.includes(char)) {\n          const partialPattern = inputValue.slice(i + 1, selectionEnd);\n          doUpdateShowMenu(true);\n          (_a = props.onSearch) === null || _a === void 0 ? void 0 : _a.call(props, partialPattern, char);\n          partialPatternRef.value = partialPattern;\n          cachedPrefix = char;\n          cachedPartialPatternStart = i + 1;\n          cachedPartialPatternEnd = selectionEnd;\n          return;\n        }\n      }\n      doUpdateShowMenu(false);\n    }\n    function syncCursor() {\n      const {\n        value: cursorAnchor\n      } = cursorRef;\n      if (!cursorAnchor) return;\n      const inputEl = getInputEl();\n      const cursorPos = getRelativePosition(inputEl);\n      cursorPos.left += inputEl.parentElement.offsetLeft;\n      cursorAnchor.style.left = `${cursorPos.left}px`;\n      cursorAnchor.style.top = `${cursorPos.top + cursorPos.height}px`;\n    }\n    function syncPosition() {\n      var _a;\n      if (!showMenuRef.value) return;\n      (_a = followerRef.value) === null || _a === void 0 ? void 0 : _a.syncPosition();\n    }\n    function handleInputUpdateValue(value) {\n      doUpdateValue(value);\n      // Vue update is mirco task.\n      // So DOM must have been done when sync start in marco task.\n      // I can't use nextTick(), Chrome doesn't update scrollLeft of INPUT\n      // element is immediatelly updated. The behavior is wired but that's what\n      // happens.\n      syncAfterCursorMove();\n    }\n    function syncAfterCursorMove() {\n      setTimeout(() => {\n        syncCursor();\n        deriveShowMenu();\n        void nextTick().then(syncPosition);\n      }, 0);\n    }\n    function handleInputKeyDown(e) {\n      var _a, _b;\n      if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {\n        if ((_a = inputInstRef.value) === null || _a === void 0 ? void 0 : _a.isCompositing) return;\n        syncAfterCursorMove();\n      } else if (e.key === 'ArrowUp' || e.key === 'ArrowDown' || e.key === 'Enter') {\n        if ((_b = inputInstRef.value) === null || _b === void 0 ? void 0 : _b.isCompositing) return;\n        const {\n          value: selectMenuInst\n        } = selectMenuInstRef;\n        if (showMenuRef.value) {\n          if (selectMenuInst) {\n            e.preventDefault();\n            if (e.key === 'ArrowUp') {\n              selectMenuInst.prev();\n            } else if (e.key === 'ArrowDown') {\n              selectMenuInst.next();\n            } else {\n              // Enter\n              const pendingOptionTmNode = selectMenuInst.getPendingTmNode();\n              if (pendingOptionTmNode) {\n                handleSelect(pendingOptionTmNode);\n              } else {\n                doUpdateShowMenu(false);\n              }\n            }\n          }\n        } else {\n          syncAfterCursorMove();\n        }\n      }\n    }\n    function handleInputFocus(e) {\n      const {\n        onFocus\n      } = props;\n      onFocus === null || onFocus === void 0 ? void 0 : onFocus(e);\n      const {\n        nTriggerFormFocus\n      } = formItem;\n      nTriggerFormFocus();\n      syncAfterCursorMove();\n    }\n    function focus() {\n      var _a;\n      (_a = inputInstRef.value) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n    function blur() {\n      var _a;\n      (_a = inputInstRef.value) === null || _a === void 0 ? void 0 : _a.blur();\n    }\n    function handleInputBlur(e) {\n      const {\n        onBlur\n      } = props;\n      onBlur === null || onBlur === void 0 ? void 0 : onBlur(e);\n      const {\n        nTriggerFormBlur\n      } = formItem;\n      nTriggerFormBlur();\n      doUpdateShowMenu(false);\n    }\n    function handleSelect(tmNode) {\n      var _a;\n      if (cachedPrefix === null || cachedPartialPatternStart === null || cachedPartialPatternEnd === null) {\n        if (process.env.NODE_ENV !== 'production') {\n          warn('mention', 'Cache works unexpectly, this is probably a bug. Please create an issue.');\n        }\n        return;\n      }\n      const {\n        rawNode: {\n          value = ''\n        }\n      } = tmNode;\n      const inputEl = getInputEl();\n      const inputValue = inputEl.value;\n      const {\n        separator\n      } = props;\n      const nextEndPart = inputValue.slice(cachedPartialPatternEnd);\n      const alreadySeparated = nextEndPart.startsWith(separator);\n      const nextMiddlePart = `${value}${alreadySeparated ? '' : separator}`;\n      doUpdateValue(inputValue.slice(0, cachedPartialPatternStart) + nextMiddlePart + nextEndPart);\n      (_a = props.onSelect) === null || _a === void 0 ? void 0 : _a.call(props, tmNode.rawNode, cachedPrefix);\n      const nextSelectionEnd = cachedPartialPatternStart + nextMiddlePart.length + (alreadySeparated ? 1 : 0);\n      void nextTick().then(() => {\n        // input value is updated\n        inputEl.selectionStart = nextSelectionEnd;\n        inputEl.selectionEnd = nextSelectionEnd;\n        deriveShowMenu();\n      });\n    }\n    function handleInputMouseDown() {\n      if (!props.disabled) {\n        syncAfterCursorMove();\n      }\n    }\n    return {\n      namespace: namespaceRef,\n      mergedClsPrefix: mergedClsPrefixRef,\n      mergedBordered: mergedBorderedRef,\n      mergedSize: formItem.mergedSizeRef,\n      mergedStatus: formItem.mergedStatusRef,\n      mergedTheme: themeRef,\n      treeMate: treeMateRef,\n      selectMenuInstRef,\n      inputInstRef,\n      cursorRef,\n      followerRef,\n      showMenu: showMenuRef,\n      adjustedTo: useAdjustedTo(props),\n      isMounted: useIsMounted(),\n      mergedValue: mergedValueRef,\n      handleInputFocus,\n      handleInputBlur,\n      handleInputUpdateValue,\n      handleInputKeyDown,\n      handleSelect,\n      handleInputMouseDown,\n      focus,\n      blur,\n      cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n      themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n      onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender\n    };\n  },\n  render() {\n    const {\n      mergedTheme,\n      mergedClsPrefix,\n      $slots\n    } = this;\n    return h(\"div\", {\n      class: `${mergedClsPrefix}-mention`\n    }, h(NInput, {\n      status: this.mergedStatus,\n      themeOverrides: mergedTheme.peerOverrides.Input,\n      theme: mergedTheme.peers.Input,\n      size: this.mergedSize,\n      autosize: this.autosize,\n      type: this.type,\n      ref: \"inputInstRef\",\n      placeholder: this.placeholder,\n      onMousedown: this.handleInputMouseDown,\n      onUpdateValue: this.handleInputUpdateValue,\n      onKeydown: this.handleInputKeyDown,\n      onFocus: this.handleInputFocus,\n      onBlur: this.handleInputBlur,\n      bordered: this.mergedBordered,\n      disabled: this.disabled,\n      value: this.mergedValue\n    }), h(VBinder, null, {\n      default: () => [h(VTarget, null, {\n        default: () => {\n          const style = {\n            position: 'absolute',\n            width: 0,\n            height: 0\n          };\n          if (process.env.NODE_ENV !== 'production' && this.internalDebug) {\n            style.width = '1px';\n            style.height = '1px';\n            style.background = 'red';\n          }\n          return h(\"div\", {\n            style: style,\n            ref: \"cursorRef\"\n          });\n        }\n      }), h(VFollower, {\n        ref: \"followerRef\",\n        placement: this.placement,\n        show: this.showMenu,\n        containerClass: this.namespace,\n        to: this.adjustedTo,\n        teleportDisabled: this.adjustedTo === useAdjustedTo.tdkey\n      }, {\n        default: () => h(Transition, {\n          name: \"fade-in-scale-up-transition\",\n          appear: this.isMounted\n        }, {\n          default: () => {\n            const {\n              mergedTheme,\n              onRender\n            } = this;\n            onRender === null || onRender === void 0 ? void 0 : onRender();\n            return this.showMenu ? h(NInternalSelectMenu, {\n              clsPrefix: mergedClsPrefix,\n              theme: mergedTheme.peers.InternalSelectMenu,\n              themeOverrides: mergedTheme.peerOverrides.InternalSelectMenu,\n              autoPending: true,\n              ref: \"selectMenuInstRef\",\n              class: [`${mergedClsPrefix}-mention-menu`, this.themeClass],\n              loading: this.loading,\n              treeMate: this.treeMate,\n              virtualScroll: false,\n              style: this.cssVars,\n              onToggle: this.handleSelect,\n              renderLabel: this.renderLabel\n            }, $slots) : null;\n          }\n        })\n      })]\n    }));\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}