{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { h, defineComponent, TransitionGroup, computed, ref, watch, toRef } from 'vue';\nimport NFadeInExpandTransition from \"../../fade-in-expand-transition/index.mjs\";\nimport { useStyle } from \"../../../_mixins/index.mjs\";\nimport SlotMachineNumber from \"./SlotMachineNumber.mjs\";\nimport style from \"./styles/index.cssr.mjs\";\nexport default defineComponent({\n  name: 'BaseSlotMachine',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    value: {\n      type: [Number, String],\n      default: 0\n    },\n    max: {\n      type: Number,\n      default: undefined\n    },\n    appeared: {\n      type: Boolean,\n      required: true\n    }\n  },\n  setup(props) {\n    useStyle('-base-slot-machine', style, toRef(props, 'clsPrefix'));\n    const oldValueRef = ref();\n    const newValueRef = ref();\n    const numbersRef = computed(() => {\n      if (typeof props.value === 'string') return [];\n      if (props.value < 1) return [0];\n      const numbers = [];\n      let value = props.value;\n      if (props.max !== undefined) {\n        value = Math.min(props.max, value);\n      }\n      while (value >= 1) {\n        numbers.push(value % 10);\n        value /= 10;\n        value = Math.floor(value);\n      }\n      numbers.reverse();\n      return numbers;\n    });\n    watch(toRef(props, 'value'), (value, oldValue) => {\n      if (typeof value === 'string') {\n        newValueRef.value = undefined;\n        oldValueRef.value = undefined;\n      } else {\n        if (typeof oldValue === 'string') {\n          newValueRef.value = value;\n          oldValueRef.value = undefined;\n        } else {\n          newValueRef.value = value;\n          oldValueRef.value = oldValue;\n        }\n      }\n    });\n    return () => {\n      const {\n        value,\n        clsPrefix\n      } = props;\n      return typeof value === 'number' ? h(\"span\", {\n        class: `${clsPrefix}-base-slot-machine`\n      }, h(TransitionGroup, {\n        name: \"fade-up-width-expand-transition\",\n        tag: \"span\"\n      }, {\n        default: () => numbersRef.value.map((number, i) => h(SlotMachineNumber, {\n          clsPrefix: clsPrefix,\n          key: numbersRef.value.length - i - 1,\n          oldOriginalNumber: oldValueRef.value,\n          newOriginalNumber: newValueRef.value,\n          value: number\n        }))\n      }), h(NFadeInExpandTransition, {\n        key: \"+\",\n        width: true\n      }, {\n        default: () => props.max !== undefined && props.max < value ? h(SlotMachineNumber, {\n          clsPrefix: clsPrefix,\n          value: \"+\"\n        }) : null\n      })) : h(\"span\", {\n        class: `${clsPrefix}-base-slot-machine`\n      }, value);\n    };\n  }\n});","map":{"version":3,"names":["h","defineComponent","TransitionGroup","computed","ref","watch","toRef","NFadeInExpandTransition","useStyle","SlotMachineNumber","style","name","props","clsPrefix","type","String","required","value","Number","default","max","undefined","appeared","Boolean","setup","oldValueRef","newValueRef","numbersRef","numbers","Math","min","push","floor","reverse","oldValue","class","tag","map","number","i","key","length","oldOriginalNumber","newOriginalNumber","width"],"sources":["/Users/wangjohnson/ai_marketing/frontend/node_modules/naive-ui/es/_internal/slot-machine/src/SlotMachine.mjs"],"sourcesContent":["import { h, defineComponent, TransitionGroup, computed, ref, watch, toRef } from 'vue';\nimport NFadeInExpandTransition from \"../../fade-in-expand-transition/index.mjs\";\nimport { useStyle } from \"../../../_mixins/index.mjs\";\nimport SlotMachineNumber from \"./SlotMachineNumber.mjs\";\nimport style from \"./styles/index.cssr.mjs\";\nexport default defineComponent({\n  name: 'BaseSlotMachine',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    value: {\n      type: [Number, String],\n      default: 0\n    },\n    max: {\n      type: Number,\n      default: undefined\n    },\n    appeared: {\n      type: Boolean,\n      required: true\n    }\n  },\n  setup(props) {\n    useStyle('-base-slot-machine', style, toRef(props, 'clsPrefix'));\n    const oldValueRef = ref();\n    const newValueRef = ref();\n    const numbersRef = computed(() => {\n      if (typeof props.value === 'string') return [];\n      if (props.value < 1) return [0];\n      const numbers = [];\n      let value = props.value;\n      if (props.max !== undefined) {\n        value = Math.min(props.max, value);\n      }\n      while (value >= 1) {\n        numbers.push(value % 10);\n        value /= 10;\n        value = Math.floor(value);\n      }\n      numbers.reverse();\n      return numbers;\n    });\n    watch(toRef(props, 'value'), (value, oldValue) => {\n      if (typeof value === 'string') {\n        newValueRef.value = undefined;\n        oldValueRef.value = undefined;\n      } else {\n        if (typeof oldValue === 'string') {\n          newValueRef.value = value;\n          oldValueRef.value = undefined;\n        } else {\n          newValueRef.value = value;\n          oldValueRef.value = oldValue;\n        }\n      }\n    });\n    return () => {\n      const {\n        value,\n        clsPrefix\n      } = props;\n      return typeof value === 'number' ? h(\"span\", {\n        class: `${clsPrefix}-base-slot-machine`\n      }, h(TransitionGroup, {\n        name: \"fade-up-width-expand-transition\",\n        tag: \"span\"\n      }, {\n        default: () => numbersRef.value.map((number, i) => h(SlotMachineNumber, {\n          clsPrefix: clsPrefix,\n          key: numbersRef.value.length - i - 1,\n          oldOriginalNumber: oldValueRef.value,\n          newOriginalNumber: newValueRef.value,\n          value: number\n        }))\n      }), h(NFadeInExpandTransition, {\n        key: \"+\",\n        width: true\n      }, {\n        default: () => props.max !== undefined && props.max < value ? h(SlotMachineNumber, {\n          clsPrefix: clsPrefix,\n          value: \"+\"\n        }) : null\n      })) : h(\"span\", {\n        class: `${clsPrefix}-base-slot-machine`\n      }, value);\n    };\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}