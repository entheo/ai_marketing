{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createBlock($setup[\"NTabs\"], {\n    class: \"card-tabs\",\n    \"default-value\": \"login\",\n    size: \"large\",\n    animated: \"\",\n    \"pane-wrapper-style\": \"margin: 0 -4px\",\n    \"pane-style\": \"padding-left: 4px; padding-right: 4px; box-sizing: border-box;\"\n  }, {\n    default: _withCtx(() => [_createVNode($setup[\"NTabPane\"], {\n      name: \"login\",\n      tab: \"登录\"\n    }, {\n      default: _withCtx(() => [_createCommentVNode(\"\\n            <login-form/>\\n          \"), _createVNode($setup[\"NForm\"], null, {\n        default: _withCtx(() => [_createVNode($setup[\"NFormItemRow\"], {\n          label: \"用户名\"\n        }, {\n          default: _withCtx(() => [_createVNode($setup[\"NInput\"], {\n            value: $setup.loginUsername,\n            \"onUpdate:value\": _cache[0] || (_cache[0] = $event => $setup.loginUsername = $event),\n            placeholder: \"\"\n          }, null, 8 /* PROPS */, [\"value\"])]),\n          _: 1 /* STABLE */\n        }), _createVNode($setup[\"NFormItemRow\"], {\n          label: \"密码\"\n        }, {\n          default: _withCtx(() => [_createVNode($setup[\"NInput\"], {\n            value: $setup.loginPassword,\n            \"onUpdate:value\": _cache[1] || (_cache[1] = $event => $setup.loginPassword = $event),\n            placeholder: \"\",\n            type: \"password\",\n            \"show-password-on\": \"click\",\n            maxlength: 15\n          }, null, 8 /* PROPS */, [\"value\"])]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      }), _createVNode($setup[\"NButton\"], {\n        onClick: $setup.login,\n        type: \"primary\",\n        block: \"\",\n        secondary: \"\",\n        strong: \"\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\" 登录 \")]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }), _createVNode($setup[\"NTabPane\"], {\n      name: \"register\",\n      tab: \"注册\"\n    }, {\n      default: _withCtx(() => [_createCommentVNode(\"\\n        <register-form/>\\n        \"), _createVNode($setup[\"NForm\"], null, {\n        default: _withCtx(() => [_createVNode($setup[\"NFormItemRow\"], {\n          label: \"用户名\"\n        }, {\n          default: _withCtx(() => [_createVNode($setup[\"NInput\"], {\n            value: _ctx.registerUsername,\n            \"onUpdate:value\": _cache[2] || (_cache[2] = $event => _ctx.registerUsername = $event),\n            placeholder: \"\"\n          }, null, 8 /* PROPS */, [\"value\"])]),\n          _: 1 /* STABLE */\n        }), _createVNode($setup[\"NFormItemRow\"], {\n          label: \"密码\"\n        }, {\n          default: _withCtx(() => [_createVNode($setup[\"NInput\"], {\n            value: _ctx.registerPassword,\n            \"onUpdate:value\": _cache[3] || (_cache[3] = $event => _ctx.registerPassword = $event),\n            placeholder: \"\"\n          }, null, 8 /* PROPS */, [\"value\"])]),\n          _: 1 /* STABLE */\n        }), _createVNode($setup[\"NFormItemRow\"], {\n          label: \"重复密码\"\n        }, {\n          default: _withCtx(() => [_createVNode($setup[\"NInput\"], {\n            value: _ctx.registerRePassword,\n            \"onUpdate:value\": _cache[4] || (_cache[4] = $event => _ctx.registerRePassword = $event),\n            placeholder: \"\"\n          }, null, 8 /* PROPS */, [\"value\"])]),\n          _: 1 /* STABLE */\n        }), _createVNode($setup[\"NFormItemRow\"], {\n          label: \"邀请码\"\n        }, {\n          default: _withCtx(() => [_createVNode($setup[\"NInput\"], {\n            value: _ctx.invitation_code,\n            \"onUpdate:value\": _cache[5] || (_cache[5] = $event => _ctx.invitation_code = $event),\n            placeholder: \"\"\n          }, null, 8 /* PROPS */, [\"value\"])]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      }), _createVNode($setup[\"NButton\"], {\n        onClick: _ctx.register,\n        type: \"primary\",\n        block: \"\",\n        secondary: \"\",\n        strong: \"\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\" 注册 \")]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["_createBlock","$setup","class","size","animated","default","_withCtx","_createVNode","name","tab","_createCommentVNode","label","value","loginUsername","_cache","$event","placeholder","_","loginPassword","type","maxlength","onClick","login","block","secondary","strong","_createTextVNode","_ctx","registerUsername","registerPassword","registerRePassword","invitation_code","register"],"sources":["/Users/wangjohnson/ai_marketing/frontend/src/components/LoginRegister.vue"],"sourcesContent":["<template>\n\n    <n-tabs\n      class=\"card-tabs\"\n      default-value=\"login\"\n      size=\"large\"\n      animated\n      pane-wrapper-style=\"margin: 0 -4px\"\n      pane-style=\"padding-left: 4px; padding-right: 4px; box-sizing: border-box;\"\n    >\n\n      <n-tab-pane name=\"login\" tab=\"登录\">\n          <!--\n            <login-form/>\n          -->\n\n        <n-form>\n          <n-form-item-row label=\"用户名\">\n            <n-input v-model:value=\"loginUsername\" placeholder=\"\"/>\n          </n-form-item-row>\n          <n-form-item-row label=\"密码\">\n            <n-input v-model:value=\"loginPassword\" placeholder=\"\" type=\"password\" show-password-on=\"click\" :maxlength=\"15\"/>\n          </n-form-item-row>\n        </n-form>\n        <n-button @click=\"login\" type=\"primary\" block secondary strong>\n          登录\n        </n-button>\n        \n      </n-tab-pane>\n\n      <n-tab-pane name=\"register\" tab=\"注册\">\n        \n        <!--\n        <register-form/>\n        -->\n\n        <n-form>\n          <n-form-item-row label=\"用户名\">\n            <n-input v-model:value=\"registerUsername\" placeholder=\"\" />\n          </n-form-item-row>\n          <n-form-item-row label=\"密码\">\n            <n-input v-model:value=\"registerPassword\" placeholder=\"\"/>\n          </n-form-item-row>\n          <n-form-item-row label=\"重复密码\">\n            <n-input v-model:value=\"registerRePassword\" placeholder=\"\"/>\n          </n-form-item-row>\n          <n-form-item-row label=\"邀请码\">\n            <n-input v-model:value=\"invitation_code\" placeholder=\"\"/>\n          </n-form-item-row>\n        </n-form>\n        <n-button @click=\"register\" type=\"primary\" block secondary strong>\n          注册\n        </n-button>\n        \n      </n-tab-pane>\n    </n-tabs>\n \n</template>\n\n<script setup>\nimport {NButton,NInput,NForm,NFormItemRow,NCard,NTabs,NTabPane} from 'naive-ui'\nimport {ref,defineExpose} from 'vue';\nimport {useStore} from 'vuex';\nimport {useRouter} from 'vue-router';\nimport axios from 'axios';\nimport RegisterForm from './RegisterForm.vue';\nimport LoginForm from './LoginForm.vue';\n\n\n//通用变量\nconst authStore = useStore();\nconst router = useRouter();\n\n//登录表单操作\nconst loginUsername = ref('');\nconst loginPassword = ref('');\nconst keepLoggedInForDays = ref('7'); // 默认设置为7天，通过select控件让用户可选择\n\nconst login = async () => {\n    try{\n        const response = await axios.post('/account/login/', \n        {   \n          username: loginUsername.value,\n          password: loginPassword.value,\n          keep_logged_in_for_days: keepLoggedInForDays.value\n        },  \n        {   \n          withCredentials: true,\n          headers: {\n            //先注销'X-CSRFToken': csrfToken.value,\n          }   \n        });\n        const token = response.data.token.access;\n        const user = response.data.username;\n        const csrf_token = response.data.csrf_token;\n        console.log('csrf_token:',csrf_token);\n        localStorage.setItem('token', token);\n        await authStore.commit('auth_success', { token, user });\n        console.log(\"登录成功：\",loginUsername.value); \n        await router.push('/dashboard');\n        \n        }catch(err){\n            console.log(\"登录失败：\",err)\n        }\n    }\n\n\n\n//暴露方法\ndefineExpose({login});\n</script>\n\n<style>\n.n-input{\n    text-align:left}\n</style>\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}