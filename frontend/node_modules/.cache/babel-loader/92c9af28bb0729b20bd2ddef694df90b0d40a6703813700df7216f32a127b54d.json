{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, vShow as _vShow, withDirectives as _withDirectives, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nexport function render(_ctx, _cache) {\n  const _component_n_step = _resolveComponent(\"n-step\");\n  const _component_n_steps = _resolveComponent(\"n-steps\");\n  const _component_n_space = _resolveComponent(\"n-space\");\n  const _component_create_senario_form = _resolveComponent(\"create-senario-form\");\n  const _component_n_button = _resolveComponent(\"n-button\");\n  const _component_n_flex = _resolveComponent(\"n-flex\");\n  const _component_n_card = _resolveComponent(\"n-card\");\n  const _component_simple_product_form = _resolveComponent(\"simple-product-form\");\n  const _component_create_persona_form = _resolveComponent(\"create-persona-form\");\n  const _component_simple_campaign_form = _resolveComponent(\"simple-campaign-form\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_n_space, {\n    class: \"guide\",\n    vertical: \"\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_n_steps, {\n      current: Number(_ctx.current),\n      status: _ctx.currentStatus\n    }, {\n      default: _withCtx(() => [_createVNode(_component_n_step, {\n        title: \"场景&情绪\",\n        description: \"营造恰当的场景情绪可以极大地影响客户的感知和行为，促\\n使目标客户采取行动\"\n      }), _createVNode(_component_n_step, {\n        title: \"产品描述\",\n        description: \"好的产品描述能够激发潜在客户的购买欲望，并建立产品与\\n客户之间的情感联系\"\n      }), _createVNode(_component_n_step, {\n        title: \"客户画像\",\n        description: \"勾勒目标客户画像可以更精准地定位市场，并制定出能够引起目标客户共鸣的营销信息\"\n      }), _createVNode(_component_n_step, {\n        title: \"营销目标\",\n        description: \"设定清晰的营销目标是成功的第一步,要尽力确保营销工作>的重要环节都能做到有的放矢\"\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"current\", \"status\"]), _createCommentVNode(\"\\n    <n-space>\\n      <n-button-group>\\n        <n-button @click=\\\"prev\\\">\\n          <template #icon>\\n            <n-icon>\\n              <md-arrow-round-back />\\n            </n-icon>\\n          </template>\\n        </n-button>\\n        <n-button @click=\\\"next\\\">\\n          <template #icon>\\n            <n-icon>\\n              <md-arrow-round-forward />\\n            </n-icon>\\n          </template>\\n        </n-button>\\n      </n-button-group>\\n      <n-radio-group v-model:value=\\\"currentStatus\\\" size=\\\"medium\\\" name=\\\"basic\\\">\\n        <n-radio-button value=\\\"error\\\">\\n          Error\\n        </n-radio-button>\\n        <n-radio-button value=\\\"process\\\">\\n          Process\\n        </n-radio-button>\\n        <n-radio-button value=\\\"wait\\\">\\n          Wait\\n        </n-radio-button>\\n        <n-radio-button value=\\\"finish\\\">\\n          Finish\\n        </n-radio-button>\\n      </n-radio-group>\\n    </n-space>\\n  \")]),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\"场景&情绪\"), _withDirectives(_createVNode(_component_n_card, {\n    bordered: false\n  }, {\n    default: _withCtx(() => [_createVNode(_component_create_senario_form, {\n      onSenarioInfoCreated: _ctx.updateSenarioData,\n      ref: \"senarioForm\"\n    }, null, 8 /* PROPS */, [\"onSenarioInfoCreated\"]), _createVNode(_component_n_flex, {\n      justify: \"center\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_n_button, {\n        onClick: _ctx.prev\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"上一步\")]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_n_button, {\n        type: \"primary\",\n        onClick: _ctx.submitGuideForm\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"保存并提交\")]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 512 /* NEED_PATCH */), [[_vShow, _ctx.currentRef == 4]]), _createCommentVNode(\"产品信息\"), _withDirectives(_createVNode(_component_n_card, {\n    bordered: false\n  }, {\n    default: _withCtx(() => [_createVNode(_component_simple_product_form, {\n      onCreatedProductInfo: _ctx.updateProductData,\n      ref: \"productForm\"\n    }, null, 8 /* PROPS */, [\"onCreatedProductInfo\"]), _createVNode(_component_n_flex, {\n      justify: \"center\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_n_button, {\n        onClick: _ctx.prev\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"上一步\")]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_n_button, {\n        type: \"info\",\n        onClick: _ctx.saveProductForm\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"保存并下一步\")]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 512 /* NEED_PATCH */), [[_vShow, _ctx.currentRef == 3]]), _createCommentVNode(\"受众画像\"), _withDirectives(_createVNode(_component_n_card, {\n    bordered: false\n  }, {\n    default: _withCtx(() => [_createVNode(_component_create_persona_form, {\n      onCreatedPersonaInfo: _ctx.updatePersonaData,\n      ref: \"personaForm\"\n    }, null, 8 /* PROPS */, [\"onCreatedPersonaInfo\"]), _createVNode(_component_n_flex, {\n      justify: \"center\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_n_button, {\n        onClick: _ctx.prev\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"上一步\")]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_n_button, {\n        type: \"info\",\n        onClick: _ctx.savePersonaForm\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"保存并下一步\")]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 512 /* NEED_PATCH */), [[_vShow, _ctx.currentRef == 2]]), _createTextVNode(\" <--营销目标--> \"), _withDirectives(_createVNode(_component_n_card, {\n    bordered: false\n  }, {\n    default: _withCtx(() => [_createVNode(_component_simple_campaign_form, {\n      onCreatedCampaignInfo: _ctx.updateCampaignData,\n      ref: \"campaignForm\"\n    }, null, 8 /* PROPS */, [\"onCreatedCampaignInfo\"]), _createVNode(_component_n_flex, {\n      justify: \"center\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_n_button, {\n        type: \"info\",\n        onClick: _ctx.submitGuideForm\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"保存并下一步\")]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 512 /* NEED_PATCH */), [[_vShow, _ctx.currentRef == 1]])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementBlock","_Fragment","_createVNode","_component_n_space","class","vertical","default","_withCtx","_component_n_steps","current","Number","_ctx","status","currentStatus","_component_n_step","title","description","_","_createCommentVNode","_component_n_card","bordered","_component_create_senario_form","onSenarioInfoCreated","updateSenarioData","ref","_component_n_flex","justify","_component_n_button","onClick","prev","_createTextVNode","type","submitGuideForm","currentRef","_component_simple_product_form","onCreatedProductInfo","updateProductData","saveProductForm","_component_create_persona_form","onCreatedPersonaInfo","updatePersonaData","savePersonaForm","_component_simple_campaign_form","onCreatedCampaignInfo","updateCampaignData"],"sources":["/Users/wangjohnson/ai_marketing/frontend/src/components/GuidePage.vue"],"sourcesContent":["<template>\n  <n-space class=\"guide\" vertical>\n    <n-steps :current=\"Number(current)\" :status=\"currentStatus\">\n      \n      <n-step\n        title=\"场景&情绪\"\n        description=\"营造恰当的场景情绪可以极大地影响客户的感知和行为，促\n使目标客户采取行动\"\n      />\n\n      <n-step\n        title=\"产品描述\"\n        description=\"好的产品描述能够激发潜在客户的购买欲望，并建立产品与\n客户之间的情感联系\"\n      />\n\n      <n-step\n        title=\"客户画像\"\n        description=\"勾勒目标客户画像可以更精准地定位市场，并制定出能够引起目标客户共鸣的营销信息\"\n      />\n\n      <n-step\n        title=\"营销目标\"\n        description=\"设定清晰的营销目标是成功的第一步,要尽力确保营销工作>的重要环节都能做到有的放矢\"\n      />\n\n    </n-steps>\n    \n    \n    <!--\n    <n-space>\n      <n-button-group>\n        <n-button @click=\"prev\">\n          <template #icon>\n            <n-icon>\n              <md-arrow-round-back />\n            </n-icon>\n          </template>\n        </n-button>\n        <n-button @click=\"next\">\n          <template #icon>\n            <n-icon>\n              <md-arrow-round-forward />\n            </n-icon>\n          </template>\n        </n-button>\n      </n-button-group>\n      <n-radio-group v-model:value=\"currentStatus\" size=\"medium\" name=\"basic\">\n        <n-radio-button value=\"error\">\n          Error\n        </n-radio-button>\n        <n-radio-button value=\"process\">\n          Process\n        </n-radio-button>\n        <n-radio-button value=\"wait\">\n          Wait\n        </n-radio-button>\n        <n-radio-button value=\"finish\">\n          Finish\n        </n-radio-button>\n      </n-radio-group>\n    </n-space>\n  -->\n</n-space>\n\n<!--场景&情绪-->\n<n-card :bordered=\"false\" v-show=\"currentRef==4\">\n    <create-senario-form @senarioInfoCreated=\"updateSenarioData\" ref=\"senarioForm\"/>\n    <n-flex justify=\"center\">\n        <n-button @click=\"prev\">上一步</n-button>\n        <n-button type=\"primary\" @click=\"submitGuideForm\">保存并提交</n-button>\n    </n-flex>\n</n-card>\n\n<!--产品信息-->\n<n-card :bordered=\"false\" v-show=\"currentRef==3\">\n    <simple-product-form @createdProductInfo = \"updateProductData\" ref=\"productForm\"/>\n    <n-flex justify=\"center\">\n        <n-button @click=\"prev\">上一步</n-button>\n        <n-button type=\"info\" @click=\"saveProductForm\">保存并下一步</n-button>\n    </n-flex>\n</n-card>\n\n<!--受众画像-->\n<n-card :bordered=\"false\" v-show=\"currentRef==2\">\n    <create-persona-form @createdPersonaInfo = \"updatePersonaData\" ref=\"personaForm\"/>\n    <n-flex justify=\"center\">\n        <n-button @click=\"prev\">上一步</n-button>\n        <n-button type=\"info\" @click=\"savePersonaForm\">保存并下一步</n-button>\n    </n-flex>\n</n-card>\n\n<--营销目标-->\n<n-card :bordered=\"false\" v-show=\"currentRef==1\">\n    <simple-campaign-form @createdCampaignInfo=\"updateCampaignData\" ref=\"campaignForm\"/>\n\n    <n-flex justify=\"center\">\n        <n-button type=\"info\" @click=\"submitGuideForm\">保存并下一步</n-button>\n    </n-flex>\n</n-card>\n\n</template>\n\n<script setup>\nimport {ref,defineProps,watch} from 'vue';\nimport axios from 'axios';\n//import { MdArrowRoundBack, MdArrowRoundForward } from '@vicons/ionicons4';\nimport { NFlex, NCard,  NStep, NSpace, NButton,NSteps} from 'naive-ui';\n//import CreateCampaignForm from './CreateCampaignForm.vue';\nimport SimpleCampaignForm from './SimpleCampaignForm.vue';\nimport CreatePersonaForm from './CreatePersonaForm.vue';\n//import CreateProductForm from './CreateProductForm.vue';\nimport SimpleProductForm from './SimpleProductForm.vue';\nimport CreateSenarioForm from './CreateSenarioForm.vue';\n\n\nconst getCsrfToken = () => {\n  return document.cookie.split('; ')\n    .find(row => row.startsWith('csrftoken'))\n    ?.split('=')[1];\n};\n\nconst props = defineProps({\n    modifyMode:Boolean,\n    });\n\n watch(() => props.modifyMode, (newValue) => {\n  console.log(newValue); // 应该在 DashboardPage 更新后输出 true\n},{\n    immediate: true\n    },\n);\n\nconst formData = ref({\n    campaignData:null,\n    personaData:null,\n    productData:null,\n    senarioData:null\n    });\nconst currentRef = ref(1);\nconst currentStatus = ref('process');\nconst current = currentRef;\nconst next = () => {\n  console.log(currentRef.value);\n  if (currentRef.value === null)\n    currentRef.value = 1;\n  else if (currentRef.value >= 4)\n    currentRef.value =4 ;\n  else\n    currentRef.value++;\n console.log(currentRef.value);\n}\n\nconst prev = () => {\n  console.log(currentRef.value);\n  if (currentRef.value === 0)\n    currentRef.value = null ;\n  else if (currentRef.value === null)\n    currentRef.value = 4;\n  else\n    currentRef.value--;\n    if (currentRef.value <1)\n        currentRef.value =1;\n  console.log(currentRef.value);\n};\n\nconst campaignForm = ref(null);\nconst saveCampaignForm = () =>{\n    campaignForm.value.createCampaign();   \n    }\nconst updateCampaignData = (message) => {\n    console.log('Update Campaign');\n    formData.value.campaignData = message;\n    console.log(formData);\n    next();\n    };\n\n//画像表单\nconst personaForm = ref(null);\nconst savePersonaForm = () => {\n    personaForm.value.createPersona();\n    }\nconst updatePersonaData = (message) => {\n    console.log('Update Persona');\n    formData.value.personaData = message;\n    console.log(formData);\n    next();\n    };\n\n//产品表单\nconst productForm = ref(null);\nconst saveProductForm = () => {\n    productForm.value.createProduct();\n    }\nconst updateProductData = (message) => {\n    console.log('Update Product');\n    formData.value.productData = message;\n    console.log(formData);\n    next();\n    };\n\n//场景情绪表单\nconst senarioForm = ref(null);\nconst saveSenarioForm = () => {\n    senarioForm.value.createSenario();}\nconst updateSenarioData = (message) => {\n    console.log('Update Senario');\n    formData.value.senarioData = message;\n    console.log(formData);\n    }\n\n//最终提交Guide收集的表单formData\n//其中包含触发最后一步对应的表单\nconst campaignForm = ref(null);\nconst updateCampaignData = (message) => {\n    console.log('Update Campaign');\n    formData.value.campaignData = message;\n    console.log(formData);\n    next();\n    };\n\nconst submitGuideForm = async() =>{\n    const token = localStorage.getItem('token');\n    const csrfToken= ref(getCsrfToken());\n    //senarioForm.value.createSenario();\n    campaignForm.value.createCampaign()\n    console.log('最终表单');\n    console.log(formData);\n    try{\n          const resp =  await axios.post('/api/assistant/',formData,{\n            headers: {\n                'Authorization': `Bearer ${token}`, // 设置请求头\n                'X-CSRFToken': csrfToken.value,\n                },\n            withCredentials: true,});\n          console.log(resp);\n         }catch (error) {\n        console.error('Failed to get info:', error);\n        }\n    }\nconst updateSenarioData = (message) => {\n    console.log('Update Senario');\n    formData.value.senarioData = message;\n    console.log(formData);\n    }\n\n</script>\n<style>\n\n.n-space .guide{\n    margin:1.5em;}\n\n.n-card-header{\n    font-size:1.5em;\n    margin-left:1.2em;\n    margin-top:0.8em\n    }\n.n-card{\n    max-width:800px}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}