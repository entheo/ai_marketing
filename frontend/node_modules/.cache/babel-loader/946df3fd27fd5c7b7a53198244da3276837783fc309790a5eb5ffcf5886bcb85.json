{"ast":null,"code":"import { computed, defineComponent, h, ref } from 'vue';\nimport { off, on } from 'evtd';\nimport { toRgbaString } from 'seemly';\nimport { normalizeAlpha } from \"./utils.mjs\";\nconst HANDLE_SIZE = '12px';\nconst HANDLE_SIZE_NUM = 12;\nconst RADIUS = '6px';\nexport default defineComponent({\n  name: 'AlphaSlider',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    rgba: {\n      type: Array,\n      default: null\n    },\n    alpha: {\n      type: Number,\n      default: 0\n    },\n    onUpdateAlpha: {\n      type: Function,\n      required: true\n    },\n    onComplete: Function\n  },\n  setup(props) {\n    const railRef = ref(null);\n    function handleMouseDown(e) {\n      if (!railRef.value || !props.rgba) return;\n      on('mousemove', document, handleMouseMove);\n      on('mouseup', document, handleMouseUp);\n      handleMouseMove(e);\n    }\n    function handleMouseMove(e) {\n      const {\n        value: railEl\n      } = railRef;\n      if (!railEl) return;\n      const {\n        width,\n        left\n      } = railEl.getBoundingClientRect();\n      const newAlpha = (e.clientX - left) / (width - HANDLE_SIZE_NUM);\n      props.onUpdateAlpha(normalizeAlpha(newAlpha));\n    }\n    function handleMouseUp() {\n      var _a;\n      off('mousemove', document, handleMouseMove);\n      off('mouseup', document, handleMouseUp);\n      (_a = props.onComplete) === null || _a === void 0 ? void 0 : _a.call(props);\n    }\n    return {\n      railRef,\n      railBackgroundImage: computed(() => {\n        const {\n          rgba\n        } = props;\n        if (!rgba) return '';\n        return `linear-gradient(to right, rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, 0) 0%, rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, 1) 100%)`;\n      }),\n      handleMouseDown\n    };\n  },\n  render() {\n    const {\n      clsPrefix\n    } = this;\n    return h(\"div\", {\n      class: `${clsPrefix}-color-picker-slider`,\n      ref: \"railRef\",\n      style: {\n        height: HANDLE_SIZE,\n        borderRadius: RADIUS\n      },\n      onMousedown: this.handleMouseDown\n    }, h(\"div\", {\n      style: {\n        borderRadius: RADIUS,\n        position: 'absolute',\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0,\n        overflow: 'hidden'\n      }\n    }, h(\"div\", {\n      class: `${clsPrefix}-color-picker-checkboard`\n    }), h(\"div\", {\n      class: `${clsPrefix}-color-picker-slider__image`,\n      style: {\n        backgroundImage: this.railBackgroundImage\n      }\n    })), this.rgba && h(\"div\", {\n      style: {\n        position: 'absolute',\n        left: RADIUS,\n        right: RADIUS,\n        top: 0,\n        bottom: 0\n      }\n    }, h(\"div\", {\n      class: `${clsPrefix}-color-picker-handle`,\n      style: {\n        left: `calc(${this.alpha * 100}% - ${RADIUS})`,\n        borderRadius: RADIUS,\n        width: HANDLE_SIZE,\n        height: HANDLE_SIZE\n      }\n    }, h(\"div\", {\n      class: `${clsPrefix}-color-picker-handle__fill`,\n      style: {\n        backgroundColor: toRgbaString(this.rgba),\n        borderRadius: RADIUS,\n        width: HANDLE_SIZE,\n        height: HANDLE_SIZE\n      }\n    }))));\n  }\n});","map":{"version":3,"names":["computed","defineComponent","h","ref","off","on","toRgbaString","normalizeAlpha","HANDLE_SIZE","HANDLE_SIZE_NUM","RADIUS","name","props","clsPrefix","type","String","required","rgba","Array","default","alpha","Number","onUpdateAlpha","Function","onComplete","setup","railRef","handleMouseDown","e","value","document","handleMouseMove","handleMouseUp","railEl","width","left","getBoundingClientRect","newAlpha","clientX","_a","call","railBackgroundImage","render","class","style","height","borderRadius","onMousedown","position","right","top","bottom","overflow","backgroundImage","backgroundColor"],"sources":["/Users/wangjohnson/ai_marketing/frontend/node_modules/naive-ui/es/color-picker/src/AlphaSlider.mjs"],"sourcesContent":["import { computed, defineComponent, h, ref } from 'vue';\nimport { off, on } from 'evtd';\nimport { toRgbaString } from 'seemly';\nimport { normalizeAlpha } from \"./utils.mjs\";\nconst HANDLE_SIZE = '12px';\nconst HANDLE_SIZE_NUM = 12;\nconst RADIUS = '6px';\nexport default defineComponent({\n  name: 'AlphaSlider',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    rgba: {\n      type: Array,\n      default: null\n    },\n    alpha: {\n      type: Number,\n      default: 0\n    },\n    onUpdateAlpha: {\n      type: Function,\n      required: true\n    },\n    onComplete: Function\n  },\n  setup(props) {\n    const railRef = ref(null);\n    function handleMouseDown(e) {\n      if (!railRef.value || !props.rgba) return;\n      on('mousemove', document, handleMouseMove);\n      on('mouseup', document, handleMouseUp);\n      handleMouseMove(e);\n    }\n    function handleMouseMove(e) {\n      const {\n        value: railEl\n      } = railRef;\n      if (!railEl) return;\n      const {\n        width,\n        left\n      } = railEl.getBoundingClientRect();\n      const newAlpha = (e.clientX - left) / (width - HANDLE_SIZE_NUM);\n      props.onUpdateAlpha(normalizeAlpha(newAlpha));\n    }\n    function handleMouseUp() {\n      var _a;\n      off('mousemove', document, handleMouseMove);\n      off('mouseup', document, handleMouseUp);\n      (_a = props.onComplete) === null || _a === void 0 ? void 0 : _a.call(props);\n    }\n    return {\n      railRef,\n      railBackgroundImage: computed(() => {\n        const {\n          rgba\n        } = props;\n        if (!rgba) return '';\n        return `linear-gradient(to right, rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, 0) 0%, rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, 1) 100%)`;\n      }),\n      handleMouseDown\n    };\n  },\n  render() {\n    const {\n      clsPrefix\n    } = this;\n    return h(\"div\", {\n      class: `${clsPrefix}-color-picker-slider`,\n      ref: \"railRef\",\n      style: {\n        height: HANDLE_SIZE,\n        borderRadius: RADIUS\n      },\n      onMousedown: this.handleMouseDown\n    }, h(\"div\", {\n      style: {\n        borderRadius: RADIUS,\n        position: 'absolute',\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0,\n        overflow: 'hidden'\n      }\n    }, h(\"div\", {\n      class: `${clsPrefix}-color-picker-checkboard`\n    }), h(\"div\", {\n      class: `${clsPrefix}-color-picker-slider__image`,\n      style: {\n        backgroundImage: this.railBackgroundImage\n      }\n    })), this.rgba && h(\"div\", {\n      style: {\n        position: 'absolute',\n        left: RADIUS,\n        right: RADIUS,\n        top: 0,\n        bottom: 0\n      }\n    }, h(\"div\", {\n      class: `${clsPrefix}-color-picker-handle`,\n      style: {\n        left: `calc(${this.alpha * 100}% - ${RADIUS})`,\n        borderRadius: RADIUS,\n        width: HANDLE_SIZE,\n        height: HANDLE_SIZE\n      }\n    }, h(\"div\", {\n      class: `${clsPrefix}-color-picker-handle__fill`,\n      style: {\n        backgroundColor: toRgbaString(this.rgba),\n        borderRadius: RADIUS,\n        width: HANDLE_SIZE,\n        height: HANDLE_SIZE\n      }\n    }))));\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}