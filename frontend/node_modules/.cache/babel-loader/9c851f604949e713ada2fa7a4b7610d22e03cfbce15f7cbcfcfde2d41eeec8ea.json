{"ast":null,"code":"import { defineComponent, h, inject, ref, watchEffect } from 'vue';\nimport { NInput } from \"../../input/index.mjs\";\nimport { colorPickerInjectionKey } from \"./context.mjs\";\n// 0 - 255\nfunction normalizeRgbUnit(value) {\n  if (/^\\d{1,3}\\.?\\d*$/.test(value.trim())) {\n    return Math.max(0, Math.min(parseInt(value), 255));\n  }\n  return false;\n}\n// 0 - 360\nfunction normalizeHueUnit(value) {\n  if (/^\\d{1,3}\\.?\\d*$/.test(value.trim())) {\n    return Math.max(0, Math.min(parseInt(value), 360));\n  }\n  return false;\n}\n// 0 - 100\nfunction normalizeSlvUnit(value) {\n  if (/^\\d{1,3}\\.?\\d*$/.test(value.trim())) {\n    return Math.max(0, Math.min(parseInt(value), 100));\n  }\n  return false;\n}\nfunction normalizeHexaUnit(value) {\n  const trimmedValue = value.trim();\n  if (/^#[0-9a-fA-F]+$/.test(trimmedValue)) {\n    return [4, 5, 7, 9].includes(trimmedValue.length);\n  }\n  return false;\n}\n// 0 - 100%\nfunction normalizeAlphaUnit(value) {\n  if (/^\\d{1,3}\\.?\\d*%$/.test(value.trim())) {\n    return Math.max(0, Math.min(parseInt(value) / 100, 100));\n  }\n  return false;\n}\nconst inputThemeOverrides = {\n  paddingSmall: '0 4px'\n};\nexport default defineComponent({\n  name: 'ColorInputUnit',\n  props: {\n    label: {\n      type: String,\n      required: true\n    },\n    value: {\n      type: [Number, String],\n      default: null\n    },\n    showAlpha: Boolean,\n    onUpdateValue: {\n      type: Function,\n      required: true\n    }\n  },\n  setup(props) {\n    const inputValueRef = ref('');\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const {\n      themeRef\n    } = inject(colorPickerInjectionKey, null);\n    watchEffect(() => {\n      inputValueRef.value = getInputString();\n    });\n    function getInputString() {\n      const {\n        value\n      } = props;\n      if (value === null) return '';\n      const {\n        label\n      } = props;\n      if (label === 'HEX') {\n        return value;\n      }\n      if (label === 'A') {\n        return `${Math.floor(value * 100)}%`;\n      }\n      return String(Math.floor(value));\n    }\n    function handleInputUpdateValue(value) {\n      inputValueRef.value = value;\n    }\n    function handleInputChange(value) {\n      let unit;\n      let valid;\n      switch (props.label) {\n        case 'HEX':\n          valid = normalizeHexaUnit(value);\n          if (valid) {\n            props.onUpdateValue(value);\n          }\n          inputValueRef.value = getInputString(); // to normalized new value\n          break;\n        case 'H':\n          unit = normalizeHueUnit(value);\n          if (unit === false) {\n            inputValueRef.value = getInputString();\n          } else {\n            props.onUpdateValue(unit);\n          }\n          break;\n        case 'S':\n        case 'L':\n        case 'V':\n          unit = normalizeSlvUnit(value);\n          if (unit === false) {\n            inputValueRef.value = getInputString();\n          } else {\n            props.onUpdateValue(unit);\n          }\n          break;\n        case 'A':\n          unit = normalizeAlphaUnit(value);\n          if (unit === false) {\n            inputValueRef.value = getInputString();\n          } else {\n            props.onUpdateValue(unit);\n          }\n          break;\n        case 'R':\n        case 'G':\n        case 'B':\n          unit = normalizeRgbUnit(value);\n          if (unit === false) {\n            inputValueRef.value = getInputString();\n          } else {\n            props.onUpdateValue(unit);\n          }\n          break;\n      }\n    }\n    return {\n      mergedTheme: themeRef,\n      inputValue: inputValueRef,\n      handleInputChange,\n      handleInputUpdateValue\n    };\n  },\n  render() {\n    const {\n      mergedTheme\n    } = this;\n    return h(NInput, {\n      size: \"small\",\n      placeholder: this.label,\n      theme: mergedTheme.peers.Input,\n      themeOverrides: mergedTheme.peerOverrides.Input,\n      builtinThemeOverrides: inputThemeOverrides,\n      value: this.inputValue,\n      onUpdateValue: this.handleInputUpdateValue,\n      onChange: this.handleInputChange,\n      // add more space for xxx% input\n      style: this.label === 'A' ? 'flex-grow: 1.25;' : ''\n    });\n  }\n});","map":{"version":3,"names":["defineComponent","h","inject","ref","watchEffect","NInput","colorPickerInjectionKey","normalizeRgbUnit","value","test","trim","Math","max","min","parseInt","normalizeHueUnit","normalizeSlvUnit","normalizeHexaUnit","trimmedValue","includes","length","normalizeAlphaUnit","inputThemeOverrides","paddingSmall","name","props","label","type","String","required","Number","default","showAlpha","Boolean","onUpdateValue","Function","setup","inputValueRef","themeRef","getInputString","floor","handleInputUpdateValue","handleInputChange","unit","valid","mergedTheme","inputValue","render","size","placeholder","theme","peers","Input","themeOverrides","peerOverrides","builtinThemeOverrides","onChange","style"],"sources":["/Users/wangjohnson/ai_marketing/frontend/node_modules/naive-ui/es/color-picker/src/ColorInputUnit.mjs"],"sourcesContent":["import { defineComponent, h, inject, ref, watchEffect } from 'vue';\nimport { NInput } from \"../../input/index.mjs\";\nimport { colorPickerInjectionKey } from \"./context.mjs\";\n// 0 - 255\nfunction normalizeRgbUnit(value) {\n  if (/^\\d{1,3}\\.?\\d*$/.test(value.trim())) {\n    return Math.max(0, Math.min(parseInt(value), 255));\n  }\n  return false;\n}\n// 0 - 360\nfunction normalizeHueUnit(value) {\n  if (/^\\d{1,3}\\.?\\d*$/.test(value.trim())) {\n    return Math.max(0, Math.min(parseInt(value), 360));\n  }\n  return false;\n}\n// 0 - 100\nfunction normalizeSlvUnit(value) {\n  if (/^\\d{1,3}\\.?\\d*$/.test(value.trim())) {\n    return Math.max(0, Math.min(parseInt(value), 100));\n  }\n  return false;\n}\nfunction normalizeHexaUnit(value) {\n  const trimmedValue = value.trim();\n  if (/^#[0-9a-fA-F]+$/.test(trimmedValue)) {\n    return [4, 5, 7, 9].includes(trimmedValue.length);\n  }\n  return false;\n}\n// 0 - 100%\nfunction normalizeAlphaUnit(value) {\n  if (/^\\d{1,3}\\.?\\d*%$/.test(value.trim())) {\n    return Math.max(0, Math.min(parseInt(value) / 100, 100));\n  }\n  return false;\n}\nconst inputThemeOverrides = {\n  paddingSmall: '0 4px'\n};\nexport default defineComponent({\n  name: 'ColorInputUnit',\n  props: {\n    label: {\n      type: String,\n      required: true\n    },\n    value: {\n      type: [Number, String],\n      default: null\n    },\n    showAlpha: Boolean,\n    onUpdateValue: {\n      type: Function,\n      required: true\n    }\n  },\n  setup(props) {\n    const inputValueRef = ref('');\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const {\n      themeRef\n    } = inject(colorPickerInjectionKey, null);\n    watchEffect(() => {\n      inputValueRef.value = getInputString();\n    });\n    function getInputString() {\n      const {\n        value\n      } = props;\n      if (value === null) return '';\n      const {\n        label\n      } = props;\n      if (label === 'HEX') {\n        return value;\n      }\n      if (label === 'A') {\n        return `${Math.floor(value * 100)}%`;\n      }\n      return String(Math.floor(value));\n    }\n    function handleInputUpdateValue(value) {\n      inputValueRef.value = value;\n    }\n    function handleInputChange(value) {\n      let unit;\n      let valid;\n      switch (props.label) {\n        case 'HEX':\n          valid = normalizeHexaUnit(value);\n          if (valid) {\n            props.onUpdateValue(value);\n          }\n          inputValueRef.value = getInputString(); // to normalized new value\n          break;\n        case 'H':\n          unit = normalizeHueUnit(value);\n          if (unit === false) {\n            inputValueRef.value = getInputString();\n          } else {\n            props.onUpdateValue(unit);\n          }\n          break;\n        case 'S':\n        case 'L':\n        case 'V':\n          unit = normalizeSlvUnit(value);\n          if (unit === false) {\n            inputValueRef.value = getInputString();\n          } else {\n            props.onUpdateValue(unit);\n          }\n          break;\n        case 'A':\n          unit = normalizeAlphaUnit(value);\n          if (unit === false) {\n            inputValueRef.value = getInputString();\n          } else {\n            props.onUpdateValue(unit);\n          }\n          break;\n        case 'R':\n        case 'G':\n        case 'B':\n          unit = normalizeRgbUnit(value);\n          if (unit === false) {\n            inputValueRef.value = getInputString();\n          } else {\n            props.onUpdateValue(unit);\n          }\n          break;\n      }\n    }\n    return {\n      mergedTheme: themeRef,\n      inputValue: inputValueRef,\n      handleInputChange,\n      handleInputUpdateValue\n    };\n  },\n  render() {\n    const {\n      mergedTheme\n    } = this;\n    return h(NInput, {\n      size: \"small\",\n      placeholder: this.label,\n      theme: mergedTheme.peers.Input,\n      themeOverrides: mergedTheme.peerOverrides.Input,\n      builtinThemeOverrides: inputThemeOverrides,\n      value: this.inputValue,\n      onUpdateValue: this.handleInputUpdateValue,\n      onChange: this.handleInputChange,\n      // add more space for xxx% input\n      style: this.label === 'A' ? 'flex-grow: 1.25;' : ''\n    });\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}