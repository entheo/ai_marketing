{"ast":null,"code":"import { createVNode as _createVNode, withCtx as _withCtx, withModifiers as _withModifiers, withKeys as _withKeys, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_n_form_item = _resolveComponent(\"n-form-item\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode($setup[\"NForm\"], {\n    ref: $setup.formRef,\n    rules: $setup.rules,\n    model: \"model\"\n  }, {\n    default: _withCtx(() => [_createVNode($setup[\"NFormItemRow\"], {\n      label: \"用户名\"\n    }, {\n      default: _withCtx(() => [_createVNode($setup[\"NInput\"], {\n        value: $setup.registerUsername,\n        \"onUpdate:value\": _cache[0] || (_cache[0] = $event => $setup.registerUsername = $event),\n        placeholder: \"\"\n      }, null, 8 /* PROPS */, [\"value\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode($setup[\"NFormItemRow\"], {\n      label: \"密码\"\n    }, {\n      default: _withCtx(() => [_createVNode($setup[\"NInput\"], {\n        value: $setup.registerPassword,\n        \"onUpdate:value\": _cache[1] || (_cache[1] = $event => $setup.registerPassword = $event),\n        placeholder: \"\"\n      }, null, 8 /* PROPS */, [\"value\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode($setup[\"NFormItemRow\"], {\n      label: \"重复密码\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(\" //\"), _createVNode($setup[\"NInput\"], {\n        \"passively-activated\": \"\",\n        onInput: _ctx.checkRePassword,\n        value: _ctx.rePassword,\n        \"onUpdate:value\": _cache[2] || (_cache[2] = $event => _ctx.rePassword = $event),\n        placeholder: \"\"\n      }, null, 8 /* PROPS */, [\"onInput\", \"value\"]), _createVNode($setup[\"NInput\"], {\n        value: _ctx.rePassword,\n        \"onUpdate:value\": _cache[3] || (_cache[3] = $event => _ctx.rePassword = $event),\n        disabled: !$setup.model.password,\n        type: \"password\",\n        onKeydown: _cache[4] || (_cache[4] = _withKeys(_withModifiers(() => {}, [\"prevent\"]), [\"enter\"]))\n      }, null, 8 /* PROPS */, [\"value\", \"disabled\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_n_form_item, {\n      path: \"password\",\n      label: \"密码\"\n    }, {\n      default: _withCtx(() => [_createVNode($setup[\"NInput\"], {\n        value: $setup.model.password,\n        \"onUpdate:value\": _cache[5] || (_cache[5] = $event => $setup.model.password = $event),\n        type: \"password\",\n        onInput: _ctx.handlePasswordInput,\n        onKeydown: _cache[6] || (_cache[6] = _withKeys(_withModifiers(() => {}, [\"prevent\"]), [\"enter\"]))\n      }, null, 8 /* PROPS */, [\"value\", \"onInput\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_n_form_item, {\n      ref: \"rPasswordFormItemRef\",\n      first: \"\",\n      path: \"reenteredPassword\",\n      label: \"重复密码\"\n    }, {\n      default: _withCtx(() => [_createVNode($setup[\"NInput\"], {\n        value: $setup.model.reenteredPassword,\n        \"onUpdate:value\": _cache[7] || (_cache[7] = $event => $setup.model.reenteredPassword = $event),\n        disabled: !$setup.model.password,\n        type: \"password\",\n        onKeydown: _cache[8] || (_cache[8] = _withKeys(_withModifiers(() => {}, [\"prevent\"]), [\"enter\"]))\n      }, null, 8 /* PROPS */, [\"value\", \"disabled\"])]),\n      _: 1 /* STABLE */\n    }, 512 /* NEED_PATCH */), _createVNode($setup[\"NFormItemRow\"], {\n      label: \"邀请码\"\n    }, {\n      default: _withCtx(() => [_createVNode($setup[\"NInput\"], {\n        value: _ctx.invitation_code,\n        \"onUpdate:value\": _cache[9] || (_cache[9] = $event => _ctx.invitation_code = $event),\n        placeholder: \"\"\n      }, null, 8 /* PROPS */, [\"value\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 512 /* NEED_PATCH */), _createVNode($setup[\"NButton\"], {\n    onClick: $setup.register,\n    type: \"primary\",\n    block: \"\",\n    secondary: \"\",\n    strong: \"\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\" 注册 \")]),\n    _: 1 /* STABLE */\n  })], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementBlock","_Fragment","_createVNode","$setup","ref","formRef","rules","model","default","_withCtx","label","value","registerUsername","_cache","$event","placeholder","_","registerPassword","_createTextVNode","onInput","_ctx","checkRePassword","rePassword","disabled","password","type","onKeydown","_withKeys","_withModifiers","_component_n_form_item","path","handlePasswordInput","first","reenteredPassword","invitation_code","onClick","register","block","secondary","strong"],"sources":["/Users/wangjohnson/ai_marketing/frontend/src/components/RegisterForm.vue"],"sourcesContent":["<template>\n    <n-form :ref=\"formRef\" :rules=\"rules\"  model=\"model\">\n        <n-form-item-row label=\"用户名\">\n            <n-input v-model:value=\"registerUsername\" placeholder=\"\" />\n        </n-form-item-row>\n        \n        <n-form-item-row label=\"密码\">\n            <n-input v-model:value=\"registerPassword\" placeholder=\"\"/>\n        </n-form-item-row>\n          \n        <n-form-item-row label=\"重复密码\">\n            //<n-input passively-activated @input=\"checkRePassword\" v-model:value=\"rePassword\" placeholder=\"\"/>\n            <n-input\n                v-model:value=\"rePassword\"\n                :disabled=\"!model.password\"\n                type=\"password\"\n                @keydown.enter.prevent/>\n        </n-form-item-row>\n       \n        <n-form-item path=\"password\" label=\"密码\">\n          <n-input\n            v-model:value=\"model.password\"\n            type=\"password\"\n            @input=\"handlePasswordInput\"\n            @keydown.enter.prevent/>\n        </n-form-item>\n    \n        <n-form-item\n          ref=\"rPasswordFormItemRef\"\n          first\n          path=\"reenteredPassword\"\n          label=\"重复密码\">\n\n          <n-input\n            v-model:value=\"model.reenteredPassword\"\n            :disabled=\"!model.password\"\n            type=\"password\"\n            @keydown.enter.prevent/>\n\n        </n-form-item>\n\n\n\n\n\n\n        <n-form-item-row label=\"邀请码\">\n            <n-input v-model:value=\"invitation_code\" placeholder=\"\"/>\n        </n-form-item-row>\n        \n    </n-form>\n    <n-button @click=\"register\" type=\"primary\" block secondary strong>\n          注册\n    </n-button>\n\n</template>\n\n\n<script setup>\nimport {NFormItemRow,NForm,NButton,NInput} from 'naive-ui';\nimport {ref,defineExpose} from 'vue';\nimport {useRoute} from 'vue-router';\nimport axios from 'axios';\n\n//注册表单操作\nconst registerUsername=ref('');\nconst registerPassword=ref('');\n//const registerRePassword=ref('');\nconst invitationCode = ref('');\nconst router=useRoute();\nconst registeredNextPath = ref('');\n\nconst register=async()=>{\n    try{\n      const response = axios.post('/account/register/',\n      {\n        username:registerUsername,\n        password:registerPassword,\n        invitation_code:invitationCode,\n        },\n      {\n            headers:{\n                //'X-CSRFToken': csrfToken.value,\n                }\n      });\n      console.log(response);\n      console.log('注册成功！');\n      await router.push(registeredNextPath.value);\n    }\n    catch(err){\n        console.log('注册失败:',err)}\n    \n }\n\n//密码验证\nconst formRef = ref(null);\nconst rPasswordFormItemRef = ref(null);\nconst modelRef = ref({\n      age: null,\n      password: null,\n      reenteredPassword: null\n    });\nconst model = modelRef;\nconst validatePasswordStartWith=(rule, value)=> {\n      return !!modelRef.value.password && modelRef.value.password.startsWith(value) && modelRef.value.password.length >= value.length;};\nconst validatePasswordSame=(rule, value)=> {\n      return value === modelRef.value.password;\n    };\nconst rules = {\n    password: [\n        {\n          required: true,\n          message: \"请输入密码\"\n        }\n      ],\n      reenteredPassword: [\n        {\n          required: true,\n          message: \"请再次输入密码\",\n          trigger: [\"input\", \"blur\"]\n        },\n        {\n          validator: validatePasswordStartWith,\n          message: \"两次密码输入不一致\",\n          trigger: \"input\"\n        },\n        {\n          validator: validatePasswordSame,\n          message: \"两次密码输入不一致\",\n          trigger: [\"blur\", \"password-input\"]\n        }\n      ]\n    }\n\ndefineExpose({register});\n</script>\n<style>\n.n-input{\n    text-align:left}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}