{"ast":null,"code":"import { defineComponent, computed, onMounted, ref, watchEffect } from 'vue';\nimport { round } from 'lodash-es';\nimport { tween } from \"./utils.mjs\";\nimport { useLocale } from \"../../_mixins/index.mjs\";\nexport const numberAnimationProps = {\n  to: {\n    type: Number,\n    default: 0\n  },\n  precision: {\n    type: Number,\n    default: 0\n  },\n  showSeparator: Boolean,\n  locale: String,\n  from: {\n    type: Number,\n    default: 0\n  },\n  active: {\n    type: Boolean,\n    default: true\n  },\n  duration: {\n    type: Number,\n    default: 2000\n  },\n  onFinish: Function\n};\nexport default defineComponent({\n  name: 'NumberAnimation',\n  props: numberAnimationProps,\n  setup(props) {\n    const {\n      localeRef\n    } = useLocale('name');\n    const {\n      duration\n    } = props;\n    const displayedValueRef = ref(props.from);\n    const mergedLocaleRef = computed(() => {\n      const {\n        locale\n      } = props;\n      if (locale !== undefined) return locale;\n      return localeRef.value;\n    });\n    let animating = false;\n    const onUpdate = currentValue => {\n      displayedValueRef.value = currentValue;\n    };\n    const onFinish = () => {\n      var _a;\n      displayedValueRef.value = props.to;\n      animating = false;\n      (_a = props.onFinish) === null || _a === void 0 ? void 0 : _a.call(props);\n    };\n    const animate = (from = props.from, to = props.to) => {\n      animating = true;\n      displayedValueRef.value = props.from;\n      if (from !== to) {\n        tween({\n          from,\n          to,\n          duration,\n          onUpdate,\n          onFinish\n        });\n      }\n    };\n    const formattedValueRef = computed(() => {\n      var _a;\n      const formatted = round(displayedValueRef.value, props.precision).toFixed(props.precision);\n      const splitValue = formatted.split('.');\n      const numberFormatter = new Intl.NumberFormat(mergedLocaleRef.value);\n      const decimalSeparator = (_a = numberFormatter.formatToParts(0.5).find(part => part.type === 'decimal')) === null || _a === void 0 ? void 0 : _a.value;\n      const integer = props.showSeparator ? numberFormatter.format(Number(splitValue[0])) : splitValue[0];\n      const decimal = splitValue[1];\n      return {\n        integer,\n        decimal,\n        decimalSeparator\n      };\n    });\n    function play() {\n      if (animating) return;\n      animate();\n    }\n    onMounted(() => {\n      watchEffect(() => {\n        if (props.active) animate();\n      });\n    });\n    const exposedMethods = {\n      play\n    };\n    return Object.assign({\n      formattedValue: formattedValueRef\n    }, exposedMethods);\n  },\n  render() {\n    const {\n      formattedValue: {\n        integer,\n        decimal,\n        decimalSeparator\n      }\n    } = this;\n    return [integer, decimal ? decimalSeparator : null, decimal];\n  }\n});","map":{"version":3,"names":["defineComponent","computed","onMounted","ref","watchEffect","round","tween","useLocale","numberAnimationProps","to","type","Number","default","precision","showSeparator","Boolean","locale","String","from","active","duration","onFinish","Function","name","props","setup","localeRef","displayedValueRef","mergedLocaleRef","undefined","value","animating","onUpdate","currentValue","_a","call","animate","formattedValueRef","formatted","toFixed","splitValue","split","numberFormatter","Intl","NumberFormat","decimalSeparator","formatToParts","find","part","integer","format","decimal","play","exposedMethods","Object","assign","formattedValue","render"],"sources":["/Users/wangjohnson/ai_marketing/frontend/node_modules/naive-ui/es/number-animation/src/NumberAnimation.mjs"],"sourcesContent":["import { defineComponent, computed, onMounted, ref, watchEffect } from 'vue';\nimport { round } from 'lodash-es';\nimport { tween } from \"./utils.mjs\";\nimport { useLocale } from \"../../_mixins/index.mjs\";\nexport const numberAnimationProps = {\n  to: {\n    type: Number,\n    default: 0\n  },\n  precision: {\n    type: Number,\n    default: 0\n  },\n  showSeparator: Boolean,\n  locale: String,\n  from: {\n    type: Number,\n    default: 0\n  },\n  active: {\n    type: Boolean,\n    default: true\n  },\n  duration: {\n    type: Number,\n    default: 2000\n  },\n  onFinish: Function\n};\nexport default defineComponent({\n  name: 'NumberAnimation',\n  props: numberAnimationProps,\n  setup(props) {\n    const {\n      localeRef\n    } = useLocale('name');\n    const {\n      duration\n    } = props;\n    const displayedValueRef = ref(props.from);\n    const mergedLocaleRef = computed(() => {\n      const {\n        locale\n      } = props;\n      if (locale !== undefined) return locale;\n      return localeRef.value;\n    });\n    let animating = false;\n    const onUpdate = currentValue => {\n      displayedValueRef.value = currentValue;\n    };\n    const onFinish = () => {\n      var _a;\n      displayedValueRef.value = props.to;\n      animating = false;\n      (_a = props.onFinish) === null || _a === void 0 ? void 0 : _a.call(props);\n    };\n    const animate = (from = props.from, to = props.to) => {\n      animating = true;\n      displayedValueRef.value = props.from;\n      if (from !== to) {\n        tween({\n          from,\n          to,\n          duration,\n          onUpdate,\n          onFinish\n        });\n      }\n    };\n    const formattedValueRef = computed(() => {\n      var _a;\n      const formatted = round(displayedValueRef.value, props.precision).toFixed(props.precision);\n      const splitValue = formatted.split('.');\n      const numberFormatter = new Intl.NumberFormat(mergedLocaleRef.value);\n      const decimalSeparator = (_a = numberFormatter.formatToParts(0.5).find(part => part.type === 'decimal')) === null || _a === void 0 ? void 0 : _a.value;\n      const integer = props.showSeparator ? numberFormatter.format(Number(splitValue[0])) : splitValue[0];\n      const decimal = splitValue[1];\n      return {\n        integer,\n        decimal,\n        decimalSeparator\n      };\n    });\n    function play() {\n      if (animating) return;\n      animate();\n    }\n    onMounted(() => {\n      watchEffect(() => {\n        if (props.active) animate();\n      });\n    });\n    const exposedMethods = {\n      play\n    };\n    return Object.assign({\n      formattedValue: formattedValueRef\n    }, exposedMethods);\n  },\n  render() {\n    const {\n      formattedValue: {\n        integer,\n        decimal,\n        decimalSeparator\n      }\n    } = this;\n    return [integer, decimal ? decimalSeparator : null, decimal];\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}