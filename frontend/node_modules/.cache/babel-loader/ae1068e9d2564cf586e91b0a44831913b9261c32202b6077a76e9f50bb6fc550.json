{"ast":null,"code":"import { h, inject, defineComponent, Transition } from 'vue';\nimport { useMemo } from 'vooks';\nimport { render, mergeEventHandlers } from \"../../../_utils/index.mjs\";\nimport { CheckmarkIcon } from \"../../icons/index.mjs\";\nimport { NBaseIcon } from \"../../icon/index.mjs\";\nimport { internalSelectionMenuInjectionKey } from \"./interface.mjs\";\nfunction renderCheckMark(show, clsPrefix) {\n  return h(Transition, {\n    name: \"fade-in-scale-up-transition\"\n  }, {\n    default: () => show ? h(NBaseIcon, {\n      clsPrefix: clsPrefix,\n      class: `${clsPrefix}-base-select-option__check`\n    }, {\n      default: () => h(CheckmarkIcon)\n    }) : null\n  });\n}\nexport default defineComponent({\n  name: 'NBaseSelectOption',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    tmNode: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const {\n      valueRef,\n      pendingTmNodeRef,\n      multipleRef,\n      valueSetRef,\n      renderLabelRef,\n      renderOptionRef,\n      labelFieldRef,\n      valueFieldRef,\n      showCheckmarkRef,\n      nodePropsRef,\n      handleOptionClick,\n      handleOptionMouseEnter\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    } = inject(internalSelectionMenuInjectionKey);\n    const isPendingRef = useMemo(() => {\n      const {\n        value: pendingTmNode\n      } = pendingTmNodeRef;\n      if (!pendingTmNode) return false;\n      return props.tmNode.key === pendingTmNode.key;\n    });\n    function handleClick(e) {\n      const {\n        tmNode\n      } = props;\n      if (tmNode.disabled) return;\n      handleOptionClick(e, tmNode);\n    }\n    function handleMouseEnter(e) {\n      const {\n        tmNode\n      } = props;\n      if (tmNode.disabled) return;\n      handleOptionMouseEnter(e, tmNode);\n    }\n    function handleMouseMove(e) {\n      const {\n        tmNode\n      } = props;\n      const {\n        value: isPending\n      } = isPendingRef;\n      if (tmNode.disabled || isPending) return;\n      handleOptionMouseEnter(e, tmNode);\n    }\n    return {\n      multiple: multipleRef,\n      isGrouped: useMemo(() => {\n        const {\n          tmNode\n        } = props;\n        const {\n          parent\n        } = tmNode;\n        return parent && parent.rawNode.type === 'group';\n      }),\n      showCheckmark: showCheckmarkRef,\n      nodeProps: nodePropsRef,\n      isPending: isPendingRef,\n      isSelected: useMemo(() => {\n        const {\n          value\n        } = valueRef;\n        const {\n          value: multiple\n        } = multipleRef;\n        if (value === null) return false;\n        const optionValue = props.tmNode.rawNode[valueFieldRef.value];\n        if (multiple) {\n          const {\n            value: valueSet\n          } = valueSetRef;\n          return valueSet.has(optionValue);\n        } else {\n          return value === optionValue;\n        }\n      }),\n      labelField: labelFieldRef,\n      renderLabel: renderLabelRef,\n      renderOption: renderOptionRef,\n      handleMouseMove,\n      handleMouseEnter,\n      handleClick\n    };\n  },\n  render() {\n    const {\n      clsPrefix,\n      tmNode: {\n        rawNode\n      },\n      isSelected,\n      isPending,\n      isGrouped,\n      showCheckmark,\n      nodeProps,\n      renderOption,\n      renderLabel,\n      handleClick,\n      handleMouseEnter,\n      handleMouseMove\n    } = this;\n    const checkmark = renderCheckMark(isSelected, clsPrefix);\n    const children = renderLabel ? [renderLabel(rawNode, isSelected), showCheckmark && checkmark] : [render(rawNode[this.labelField], rawNode, isSelected), showCheckmark && checkmark];\n    const attrs = nodeProps === null || nodeProps === void 0 ? void 0 : nodeProps(rawNode);\n    const node = h(\"div\", Object.assign({}, attrs, {\n      class: [`${clsPrefix}-base-select-option`, rawNode.class, attrs === null || attrs === void 0 ? void 0 : attrs.class, {\n        [`${clsPrefix}-base-select-option--disabled`]: rawNode.disabled,\n        [`${clsPrefix}-base-select-option--selected`]: isSelected,\n        [`${clsPrefix}-base-select-option--grouped`]: isGrouped,\n        [`${clsPrefix}-base-select-option--pending`]: isPending,\n        [`${clsPrefix}-base-select-option--show-checkmark`]: showCheckmark\n      }],\n      style: [(attrs === null || attrs === void 0 ? void 0 : attrs.style) || '', rawNode.style || ''],\n      onClick: mergeEventHandlers([handleClick, attrs === null || attrs === void 0 ? void 0 : attrs.onClick]),\n      onMouseenter: mergeEventHandlers([handleMouseEnter, attrs === null || attrs === void 0 ? void 0 : attrs.onMouseenter]),\n      onMousemove: mergeEventHandlers([handleMouseMove, attrs === null || attrs === void 0 ? void 0 : attrs.onMousemove])\n    }), h(\"div\", {\n      class: `${clsPrefix}-base-select-option__content`\n    }, children));\n    return rawNode.render ? rawNode.render({\n      node,\n      option: rawNode,\n      selected: isSelected\n    }) : renderOption ? renderOption({\n      node,\n      option: rawNode,\n      selected: isSelected\n    }) : node;\n  }\n});","map":{"version":3,"names":["h","inject","defineComponent","Transition","useMemo","render","mergeEventHandlers","CheckmarkIcon","NBaseIcon","internalSelectionMenuInjectionKey","renderCheckMark","show","clsPrefix","name","default","class","props","type","String","required","tmNode","Object","setup","valueRef","pendingTmNodeRef","multipleRef","valueSetRef","renderLabelRef","renderOptionRef","labelFieldRef","valueFieldRef","showCheckmarkRef","nodePropsRef","handleOptionClick","handleOptionMouseEnter","isPendingRef","value","pendingTmNode","key","handleClick","e","disabled","handleMouseEnter","handleMouseMove","isPending","multiple","isGrouped","parent","rawNode","showCheckmark","nodeProps","isSelected","optionValue","valueSet","has","labelField","renderLabel","renderOption","checkmark","children","attrs","node","assign","style","onClick","onMouseenter","onMousemove","option","selected"],"sources":["/Users/wangjohnson/ai_marketing/frontend/node_modules/naive-ui/es/_internal/select-menu/src/SelectOption.mjs"],"sourcesContent":["import { h, inject, defineComponent, Transition } from 'vue';\nimport { useMemo } from 'vooks';\nimport { render, mergeEventHandlers } from \"../../../_utils/index.mjs\";\nimport { CheckmarkIcon } from \"../../icons/index.mjs\";\nimport { NBaseIcon } from \"../../icon/index.mjs\";\nimport { internalSelectionMenuInjectionKey } from \"./interface.mjs\";\nfunction renderCheckMark(show, clsPrefix) {\n  return h(Transition, {\n    name: \"fade-in-scale-up-transition\"\n  }, {\n    default: () => show ? h(NBaseIcon, {\n      clsPrefix: clsPrefix,\n      class: `${clsPrefix}-base-select-option__check`\n    }, {\n      default: () => h(CheckmarkIcon)\n    }) : null\n  });\n}\nexport default defineComponent({\n  name: 'NBaseSelectOption',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    tmNode: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const {\n      valueRef,\n      pendingTmNodeRef,\n      multipleRef,\n      valueSetRef,\n      renderLabelRef,\n      renderOptionRef,\n      labelFieldRef,\n      valueFieldRef,\n      showCheckmarkRef,\n      nodePropsRef,\n      handleOptionClick,\n      handleOptionMouseEnter\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    } = inject(internalSelectionMenuInjectionKey);\n    const isPendingRef = useMemo(() => {\n      const {\n        value: pendingTmNode\n      } = pendingTmNodeRef;\n      if (!pendingTmNode) return false;\n      return props.tmNode.key === pendingTmNode.key;\n    });\n    function handleClick(e) {\n      const {\n        tmNode\n      } = props;\n      if (tmNode.disabled) return;\n      handleOptionClick(e, tmNode);\n    }\n    function handleMouseEnter(e) {\n      const {\n        tmNode\n      } = props;\n      if (tmNode.disabled) return;\n      handleOptionMouseEnter(e, tmNode);\n    }\n    function handleMouseMove(e) {\n      const {\n        tmNode\n      } = props;\n      const {\n        value: isPending\n      } = isPendingRef;\n      if (tmNode.disabled || isPending) return;\n      handleOptionMouseEnter(e, tmNode);\n    }\n    return {\n      multiple: multipleRef,\n      isGrouped: useMemo(() => {\n        const {\n          tmNode\n        } = props;\n        const {\n          parent\n        } = tmNode;\n        return parent && parent.rawNode.type === 'group';\n      }),\n      showCheckmark: showCheckmarkRef,\n      nodeProps: nodePropsRef,\n      isPending: isPendingRef,\n      isSelected: useMemo(() => {\n        const {\n          value\n        } = valueRef;\n        const {\n          value: multiple\n        } = multipleRef;\n        if (value === null) return false;\n        const optionValue = props.tmNode.rawNode[valueFieldRef.value];\n        if (multiple) {\n          const {\n            value: valueSet\n          } = valueSetRef;\n          return valueSet.has(optionValue);\n        } else {\n          return value === optionValue;\n        }\n      }),\n      labelField: labelFieldRef,\n      renderLabel: renderLabelRef,\n      renderOption: renderOptionRef,\n      handleMouseMove,\n      handleMouseEnter,\n      handleClick\n    };\n  },\n  render() {\n    const {\n      clsPrefix,\n      tmNode: {\n        rawNode\n      },\n      isSelected,\n      isPending,\n      isGrouped,\n      showCheckmark,\n      nodeProps,\n      renderOption,\n      renderLabel,\n      handleClick,\n      handleMouseEnter,\n      handleMouseMove\n    } = this;\n    const checkmark = renderCheckMark(isSelected, clsPrefix);\n    const children = renderLabel ? [renderLabel(rawNode, isSelected), showCheckmark && checkmark] : [render(rawNode[this.labelField], rawNode, isSelected), showCheckmark && checkmark];\n    const attrs = nodeProps === null || nodeProps === void 0 ? void 0 : nodeProps(rawNode);\n    const node = h(\"div\", Object.assign({}, attrs, {\n      class: [`${clsPrefix}-base-select-option`, rawNode.class, attrs === null || attrs === void 0 ? void 0 : attrs.class, {\n        [`${clsPrefix}-base-select-option--disabled`]: rawNode.disabled,\n        [`${clsPrefix}-base-select-option--selected`]: isSelected,\n        [`${clsPrefix}-base-select-option--grouped`]: isGrouped,\n        [`${clsPrefix}-base-select-option--pending`]: isPending,\n        [`${clsPrefix}-base-select-option--show-checkmark`]: showCheckmark\n      }],\n      style: [(attrs === null || attrs === void 0 ? void 0 : attrs.style) || '', rawNode.style || ''],\n      onClick: mergeEventHandlers([handleClick, attrs === null || attrs === void 0 ? void 0 : attrs.onClick]),\n      onMouseenter: mergeEventHandlers([handleMouseEnter, attrs === null || attrs === void 0 ? void 0 : attrs.onMouseenter]),\n      onMousemove: mergeEventHandlers([handleMouseMove, attrs === null || attrs === void 0 ? void 0 : attrs.onMousemove])\n    }), h(\"div\", {\n      class: `${clsPrefix}-base-select-option__content`\n    }, children));\n    return rawNode.render ? rawNode.render({\n      node,\n      option: rawNode,\n      selected: isSelected\n    }) : renderOption ? renderOption({\n      node,\n      option: rawNode,\n      selected: isSelected\n    }) : node;\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}