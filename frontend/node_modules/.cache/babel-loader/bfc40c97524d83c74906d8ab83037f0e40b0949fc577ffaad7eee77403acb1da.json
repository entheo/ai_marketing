{"ast":null,"code":"import { defineComponent, h, inject, ref, onBeforeUnmount } from 'vue';\nimport { off, on } from 'evtd';\nimport { dataTableInjectionKey } from \"../interface.mjs\";\nexport default defineComponent({\n  name: 'ColumnResizeButton',\n  props: {\n    onResizeStart: Function,\n    onResize: Function,\n    onResizeEnd: Function\n  },\n  setup(props) {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const {\n      mergedClsPrefixRef\n    } = inject(dataTableInjectionKey);\n    const activeRef = ref(false);\n    let startX = 0;\n    function getMouseX(e) {\n      return e.clientX;\n    }\n    function handleMousedown(e) {\n      var _a;\n      e.preventDefault();\n      const alreadyStarted = activeRef.value;\n      startX = getMouseX(e);\n      activeRef.value = true;\n      if (!alreadyStarted) {\n        on('mousemove', window, handleMousemove);\n        on('mouseup', window, handleMouseup);\n        (_a = props.onResizeStart) === null || _a === void 0 ? void 0 : _a.call(props);\n      }\n    }\n    function handleMousemove(e) {\n      var _a;\n      (_a = props.onResize) === null || _a === void 0 ? void 0 : _a.call(props, getMouseX(e) - startX);\n    }\n    function handleMouseup() {\n      var _a;\n      activeRef.value = false;\n      (_a = props.onResizeEnd) === null || _a === void 0 ? void 0 : _a.call(props);\n      off('mousemove', window, handleMousemove);\n      off('mouseup', window, handleMouseup);\n    }\n    onBeforeUnmount(() => {\n      off('mousemove', window, handleMousemove);\n      off('mouseup', window, handleMouseup);\n    });\n    return {\n      mergedClsPrefix: mergedClsPrefixRef,\n      active: activeRef,\n      handleMousedown\n    };\n  },\n  render() {\n    const {\n      mergedClsPrefix\n    } = this;\n    return h(\"span\", {\n      \"data-data-table-resizable\": true,\n      class: [`${mergedClsPrefix}-data-table-resize-button`, this.active && `${mergedClsPrefix}-data-table-resize-button--active`],\n      onMousedown: this.handleMousedown\n    });\n  }\n});","map":{"version":3,"names":["defineComponent","h","inject","ref","onBeforeUnmount","off","on","dataTableInjectionKey","name","props","onResizeStart","Function","onResize","onResizeEnd","setup","mergedClsPrefixRef","activeRef","startX","getMouseX","e","clientX","handleMousedown","_a","preventDefault","alreadyStarted","value","window","handleMousemove","handleMouseup","call","mergedClsPrefix","active","render","class","onMousedown"],"sources":["/Users/wangjohnson/ai_marketing/frontend/node_modules/naive-ui/es/data-table/src/HeaderButton/ResizeButton.mjs"],"sourcesContent":["import { defineComponent, h, inject, ref, onBeforeUnmount } from 'vue';\nimport { off, on } from 'evtd';\nimport { dataTableInjectionKey } from \"../interface.mjs\";\nexport default defineComponent({\n  name: 'ColumnResizeButton',\n  props: {\n    onResizeStart: Function,\n    onResize: Function,\n    onResizeEnd: Function\n  },\n  setup(props) {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const {\n      mergedClsPrefixRef\n    } = inject(dataTableInjectionKey);\n    const activeRef = ref(false);\n    let startX = 0;\n    function getMouseX(e) {\n      return e.clientX;\n    }\n    function handleMousedown(e) {\n      var _a;\n      e.preventDefault();\n      const alreadyStarted = activeRef.value;\n      startX = getMouseX(e);\n      activeRef.value = true;\n      if (!alreadyStarted) {\n        on('mousemove', window, handleMousemove);\n        on('mouseup', window, handleMouseup);\n        (_a = props.onResizeStart) === null || _a === void 0 ? void 0 : _a.call(props);\n      }\n    }\n    function handleMousemove(e) {\n      var _a;\n      (_a = props.onResize) === null || _a === void 0 ? void 0 : _a.call(props, getMouseX(e) - startX);\n    }\n    function handleMouseup() {\n      var _a;\n      activeRef.value = false;\n      (_a = props.onResizeEnd) === null || _a === void 0 ? void 0 : _a.call(props);\n      off('mousemove', window, handleMousemove);\n      off('mouseup', window, handleMouseup);\n    }\n    onBeforeUnmount(() => {\n      off('mousemove', window, handleMousemove);\n      off('mouseup', window, handleMouseup);\n    });\n    return {\n      mergedClsPrefix: mergedClsPrefixRef,\n      active: activeRef,\n      handleMousedown\n    };\n  },\n  render() {\n    const {\n      mergedClsPrefix\n    } = this;\n    return h(\"span\", {\n      \"data-data-table-resizable\": true,\n      class: [`${mergedClsPrefix}-data-table-resize-button`, this.active && `${mergedClsPrefix}-data-table-resize-button--active`],\n      onMousedown: this.handleMousedown\n    });\n  }\n});"],"mappings":"AAAA,SAASA,eAAe,EAAEC,CAAC,EAAEC,MAAM,EAAEC,GAAG,EAAEC,eAAe,QAAQ,KAAK;AACtE,SAASC,GAAG,EAAEC,EAAE,QAAQ,MAAM;AAC9B,SAASC,qBAAqB,QAAQ,kBAAkB;AACxD,eAAeP,eAAe,CAAC;EAC7BQ,IAAI,EAAE,oBAAoB;EAC1BC,KAAK,EAAE;IACLC,aAAa,EAAEC,QAAQ;IACvBC,QAAQ,EAAED,QAAQ;IAClBE,WAAW,EAAEF;EACf,CAAC;EACDG,KAAKA,CAACL,KAAK,EAAE;IACX;IACA,MAAM;MACJM;IACF,CAAC,GAAGb,MAAM,CAACK,qBAAqB,CAAC;IACjC,MAAMS,SAAS,GAAGb,GAAG,CAAC,KAAK,CAAC;IAC5B,IAAIc,MAAM,GAAG,CAAC;IACd,SAASC,SAASA,CAACC,CAAC,EAAE;MACpB,OAAOA,CAAC,CAACC,OAAO;IAClB;IACA,SAASC,eAAeA,CAACF,CAAC,EAAE;MAC1B,IAAIG,EAAE;MACNH,CAAC,CAACI,cAAc,CAAC,CAAC;MAClB,MAAMC,cAAc,GAAGR,SAAS,CAACS,KAAK;MACtCR,MAAM,GAAGC,SAAS,CAACC,CAAC,CAAC;MACrBH,SAAS,CAACS,KAAK,GAAG,IAAI;MACtB,IAAI,CAACD,cAAc,EAAE;QACnBlB,EAAE,CAAC,WAAW,EAAEoB,MAAM,EAAEC,eAAe,CAAC;QACxCrB,EAAE,CAAC,SAAS,EAAEoB,MAAM,EAAEE,aAAa,CAAC;QACpC,CAACN,EAAE,GAAGb,KAAK,CAACC,aAAa,MAAM,IAAI,IAAIY,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACO,IAAI,CAACpB,KAAK,CAAC;MAChF;IACF;IACA,SAASkB,eAAeA,CAACR,CAAC,EAAE;MAC1B,IAAIG,EAAE;MACN,CAACA,EAAE,GAAGb,KAAK,CAACG,QAAQ,MAAM,IAAI,IAAIU,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACO,IAAI,CAACpB,KAAK,EAAES,SAAS,CAACC,CAAC,CAAC,GAAGF,MAAM,CAAC;IAClG;IACA,SAASW,aAAaA,CAAA,EAAG;MACvB,IAAIN,EAAE;MACNN,SAAS,CAACS,KAAK,GAAG,KAAK;MACvB,CAACH,EAAE,GAAGb,KAAK,CAACI,WAAW,MAAM,IAAI,IAAIS,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACO,IAAI,CAACpB,KAAK,CAAC;MAC5EJ,GAAG,CAAC,WAAW,EAAEqB,MAAM,EAAEC,eAAe,CAAC;MACzCtB,GAAG,CAAC,SAAS,EAAEqB,MAAM,EAAEE,aAAa,CAAC;IACvC;IACAxB,eAAe,CAAC,MAAM;MACpBC,GAAG,CAAC,WAAW,EAAEqB,MAAM,EAAEC,eAAe,CAAC;MACzCtB,GAAG,CAAC,SAAS,EAAEqB,MAAM,EAAEE,aAAa,CAAC;IACvC,CAAC,CAAC;IACF,OAAO;MACLE,eAAe,EAAEf,kBAAkB;MACnCgB,MAAM,EAAEf,SAAS;MACjBK;IACF,CAAC;EACH,CAAC;EACDW,MAAMA,CAAA,EAAG;IACP,MAAM;MACJF;IACF,CAAC,GAAG,IAAI;IACR,OAAO7B,CAAC,CAAC,MAAM,EAAE;MACf,2BAA2B,EAAE,IAAI;MACjCgC,KAAK,EAAE,CAAE,GAAEH,eAAgB,2BAA0B,EAAE,IAAI,CAACC,MAAM,IAAK,GAAED,eAAgB,mCAAkC,CAAC;MAC5HI,WAAW,EAAE,IAAI,CAACb;IACpB,CAAC,CAAC;EACJ;AACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}