{"ast":null,"code":"import { NCard, NButton } from 'naive-ui';\nimport { onBeforeMount } from 'vue';\n//import axios from 'axios';\nimport { ref } from 'vue';\nimport CreateCampaignForm from './CreateCampaignForm.vue';\n\n/*\nconst getCsrfToken = () => {\n  let csrfToken = null;\n  if (document.cookie && document.cookie !== '') {\n    const cookies = document.cookie.split(';');\n    for (let i = 0; i < cookies.length; i++) {\n      const cookie = cookies[i].trim();\n      if (cookie.startsWith('csrftoken=')) {\n          csrfToken = decodeURIComponent(cookie.substring('csrftoken='.length));\n          break;\n      }   \n    }   \n  }   \n  return csrfToken;\n};\nconst csrfToken = ref(getCsrfToken());\n*/\n\nexport default {\n  __name: 'CampaignPage',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n\n    //import { NDatePicker, NButton, NForm, NCard, NInput, NH5, NSelect, NDrawer} from 'naive-ui';\n    const campaignForm = ref(null);\n    const submitCampaignForm = () => {\n      campaignForm.value.createCampaign();\n    };\n    const handleCampaignInfo = message => {\n      console.log(message);\n      /*\n               axios.post('http://localhost:8005/api/response/', formData)\n                 .then(resp => {\n                   // 处理你后端返回的response\n                   console.log(resp);\n                   message.value = resp.data.message;\n                 })\n                 .catch(err => {\n                   console.log(err);\n                 });\n                 \n          */\n    };\n\n    /*\n      const userName = ref('');\n      const fetchUserInfo = async() => {\n          const token = localStorage.getItem('token');\n          console.log(token);\n          try {\n            const resp =  await axios.get('/account/auth/',{\n                headers: {\n                    'Authorization': `Bearer ${token}` // 设置请求头\n                    }});\n            console.log('验证结果:')\n            console.log(resp.data);\n            userName.value = resp.data.username;\n            has_brands.value = resp.data.created_brands.length;\n            //localStorage.setItem('username',resp.data.username);\n              } catch (error) {\n            console.error('Failed to fetch user info:', error);\n          }\n        };\n      */\n\n    onBeforeMount(async () => {\n      // fetchUserInfo();\n    });\n    const __returned__ = {\n      campaignForm,\n      submitCampaignForm,\n      handleCampaignInfo,\n      get NCard() {\n        return NCard;\n      },\n      get NButton() {\n        return NButton;\n      },\n      onBeforeMount,\n      ref,\n      CreateCampaignForm\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["NCard","NButton","onBeforeMount","ref","CreateCampaignForm","campaignForm","submitCampaignForm","value","createCampaign","handleCampaignInfo","message","console","log"],"sources":["/Users/wangjohnson/ai_marketing/frontend/src/components/CampaignPage.vue"],"sourcesContent":["<template>\n<div class=\"page-container\" style=\"height: 100vh; overflow: hidden;text-align:left\">\n    \n    <n-card>\n     <create-campaign-form @createCampaignInfo=\"handleCampaignInfo\" ref=\"campaignForm\"/> \n     <n-button @click=\"submitCampaignForm\" type=\"info\">提交</n-button>\n     </n-card>\n</div>\n\n\n\n</template>\n<script setup>\n  //import { NDatePicker, NButton, NForm, NCard, NInput, NH5, NSelect, NDrawer} from 'naive-ui';\n  import {NCard,NButton} from 'naive-ui';\n  import {onBeforeMount} from 'vue'; \n  //import axios from 'axios';\n  import { ref } from 'vue';   \n  import CreateCampaignForm from './CreateCampaignForm.vue';\n\n  /*\n  const getCsrfToken = () => {\n    let csrfToken = null;\n    if (document.cookie && document.cookie !== '') {\n      const cookies = document.cookie.split(';');\n      for (let i = 0; i < cookies.length; i++) {\n        const cookie = cookies[i].trim();\n        if (cookie.startsWith('csrftoken=')) {\n            csrfToken = decodeURIComponent(cookie.substring('csrftoken='.length));\n            break;\n        }   \n      }   \n    }   \n    return csrfToken;\n  };\n  const csrfToken = ref(getCsrfToken());\n  */\n\n  const campaignForm = ref(null);\n  const submitCampaignForm = () => {\n      campaignForm.value.createCampaign();\n      }\n\n  const handleCampaignInfo = (message) => {\n      console.log(message);\n      /*\n               axios.post('http://localhost:8005/api/response/', formData)\n                 .then(resp => {\n                   // 处理你后端返回的response\n                   console.log(resp);\n                   message.value = resp.data.message;\n                 })\n                 .catch(err => {\n                   console.log(err);\n                 });\n                 \n          */ };\n\n/*\n  const userName = ref('');\n  const fetchUserInfo = async() => {\n      const token = localStorage.getItem('token');\n      console.log(token);\n      try {\n        const resp =  await axios.get('/account/auth/',{\n            headers: {\n                'Authorization': `Bearer ${token}` // 设置请求头\n                }});\n        console.log('验证结果:')\n        console.log(resp.data);\n        userName.value = resp.data.username;\n        has_brands.value = resp.data.created_brands.length;\n        //localStorage.setItem('username',resp.data.username);\n          } catch (error) {\n        console.error('Failed to fetch user info:', error);\n      }\n    };\n  */\n    \nonBeforeMount(async()=>{\n   // fetchUserInfo();\n    })\n</script>\n\n<style>\n.tricks {\n    font-size:0.8em;\n}\n</style>\n"],"mappings":"AAcE,SAAQA,KAAK,EAACC,OAAO,QAAO,UAAU;AACtC,SAAQC,aAAa,QAAO,KAAK;AACjC;AACA,SAASC,GAAG,QAAQ,KAAK;AACzB,OAAOC,kBAAkB,MAAM,0BAA0B;;AAEzD;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;IAvBE;IAyBA,MAAMC,YAAY,GAAGF,GAAG,CAAC,IAAI,CAAC;IAC9B,MAAMG,kBAAkB,GAAGA,CAAA,KAAM;MAC7BD,YAAY,CAACE,KAAK,CAACC,cAAc,CAAC,CAAC;IACnC,CAAC;IAEL,MAAMC,kBAAkB,GAAIC,OAAO,IAAK;MACpCC,OAAO,CAACC,GAAG,CAACF,OAAO,CAAC;MACpB;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAAa,CAAC;;IAEd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEAR,aAAa,CAAC,YAAS;MACpB;IAAA,CACE,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}