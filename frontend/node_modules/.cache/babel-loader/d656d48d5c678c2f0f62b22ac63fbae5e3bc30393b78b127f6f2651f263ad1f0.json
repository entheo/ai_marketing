{"ast":null,"code":"import { h, defineComponent, ref, computed, inject } from 'vue';\nimport { FilterIcon } from \"../../../_internal/icons/index.mjs\";\nimport { NBaseIcon } from \"../../../_internal/index.mjs\";\nimport { NPopover } from \"../../../popover/index.mjs\";\nimport RenderFilter from \"./RenderFilter.mjs\";\nimport NDataTableFilterMenu from \"./FilterMenu.mjs\";\nimport { dataTableInjectionKey } from \"../interface.mjs\";\nimport { useConfig } from \"../../../_mixins/index.mjs\";\nfunction createFilterState(currentFilterState, columnKey, mergedFilterValue) {\n  const nextFilterState = Object.assign({}, currentFilterState);\n  nextFilterState[columnKey] = mergedFilterValue;\n  return nextFilterState;\n}\nexport default defineComponent({\n  name: 'DataTableFilterButton',\n  props: {\n    column: {\n      type: Object,\n      required: true\n    },\n    options: {\n      type: Array,\n      default: () => []\n    }\n  },\n  setup(props) {\n    const {\n      mergedComponentPropsRef\n    } = useConfig();\n    const {\n      mergedThemeRef,\n      mergedClsPrefixRef,\n      mergedFilterStateRef,\n      filterMenuCssVarsRef,\n      paginationBehaviorOnFilterRef,\n      doUpdatePage,\n      doUpdateFilters\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    } = inject(dataTableInjectionKey);\n    const showPopoverRef = ref(false);\n    const filterStateRef = mergedFilterStateRef;\n    const filterMultipleRef = computed(() => {\n      return props.column.filterMultiple !== false;\n    });\n    const mergedFilterValueRef = computed(() => {\n      const filterValue = filterStateRef.value[props.column.key];\n      if (filterValue === undefined) {\n        const {\n          value: multiple\n        } = filterMultipleRef;\n        if (multiple) return [];else return null;\n      }\n      return filterValue;\n    });\n    const activeRef = computed(() => {\n      const {\n        value: filterValue\n      } = mergedFilterValueRef;\n      if (Array.isArray(filterValue)) {\n        return filterValue.length > 0;\n      }\n      return filterValue !== null;\n    });\n    const mergedRenderFilterRef = computed(() => {\n      var _a, _b;\n      return ((_b = (_a = mergedComponentPropsRef === null || mergedComponentPropsRef === void 0 ? void 0 : mergedComponentPropsRef.value) === null || _a === void 0 ? void 0 : _a.DataTable) === null || _b === void 0 ? void 0 : _b.renderFilter) || props.column.renderFilter;\n    });\n    function handleFilterChange(mergedFilterValue) {\n      const nextFilterState = createFilterState(filterStateRef.value, props.column.key, mergedFilterValue);\n      doUpdateFilters(nextFilterState, props.column);\n      if (paginationBehaviorOnFilterRef.value === 'first') {\n        doUpdatePage(1);\n      }\n    }\n    function handleFilterMenuCancel() {\n      showPopoverRef.value = false;\n    }\n    function handleFilterMenuConfirm() {\n      showPopoverRef.value = false;\n    }\n    return {\n      mergedTheme: mergedThemeRef,\n      mergedClsPrefix: mergedClsPrefixRef,\n      active: activeRef,\n      showPopover: showPopoverRef,\n      mergedRenderFilter: mergedRenderFilterRef,\n      filterMultiple: filterMultipleRef,\n      mergedFilterValue: mergedFilterValueRef,\n      filterMenuCssVars: filterMenuCssVarsRef,\n      handleFilterChange,\n      handleFilterMenuConfirm,\n      handleFilterMenuCancel\n    };\n  },\n  render() {\n    const {\n      mergedTheme,\n      mergedClsPrefix,\n      handleFilterMenuCancel\n    } = this;\n    return h(NPopover, {\n      show: this.showPopover,\n      onUpdateShow: v => this.showPopover = v,\n      trigger: \"click\",\n      theme: mergedTheme.peers.Popover,\n      themeOverrides: mergedTheme.peerOverrides.Popover,\n      placement: \"bottom\",\n      style: {\n        padding: 0\n      }\n    }, {\n      trigger: () => {\n        const {\n          mergedRenderFilter\n        } = this;\n        if (mergedRenderFilter) {\n          return h(RenderFilter, {\n            \"data-data-table-filter\": true,\n            render: mergedRenderFilter,\n            active: this.active,\n            show: this.showPopover\n          });\n        }\n        const {\n          renderFilterIcon\n        } = this.column;\n        return h(\"div\", {\n          \"data-data-table-filter\": true,\n          class: [`${mergedClsPrefix}-data-table-filter`, {\n            [`${mergedClsPrefix}-data-table-filter--active`]: this.active,\n            [`${mergedClsPrefix}-data-table-filter--show`]: this.showPopover\n          }]\n        }, renderFilterIcon ? renderFilterIcon({\n          active: this.active,\n          show: this.showPopover\n        }) : h(NBaseIcon, {\n          clsPrefix: mergedClsPrefix\n        }, {\n          default: () => h(FilterIcon, null)\n        }));\n      },\n      default: () => {\n        const {\n          renderFilterMenu\n        } = this.column;\n        return renderFilterMenu ? renderFilterMenu({\n          hide: handleFilterMenuCancel\n        }) : h(NDataTableFilterMenu, {\n          style: this.filterMenuCssVars,\n          radioGroupName: String(this.column.key),\n          multiple: this.filterMultiple,\n          value: this.mergedFilterValue,\n          options: this.options,\n          column: this.column,\n          onChange: this.handleFilterChange,\n          onClear: this.handleFilterMenuCancel,\n          onConfirm: this.handleFilterMenuConfirm\n        });\n      }\n    });\n  }\n});","map":{"version":3,"names":["h","defineComponent","ref","computed","inject","FilterIcon","NBaseIcon","NPopover","RenderFilter","NDataTableFilterMenu","dataTableInjectionKey","useConfig","createFilterState","currentFilterState","columnKey","mergedFilterValue","nextFilterState","Object","assign","name","props","column","type","required","options","Array","default","setup","mergedComponentPropsRef","mergedThemeRef","mergedClsPrefixRef","mergedFilterStateRef","filterMenuCssVarsRef","paginationBehaviorOnFilterRef","doUpdatePage","doUpdateFilters","showPopoverRef","filterStateRef","filterMultipleRef","filterMultiple","mergedFilterValueRef","filterValue","value","key","undefined","multiple","activeRef","isArray","length","mergedRenderFilterRef","_a","_b","DataTable","renderFilter","handleFilterChange","handleFilterMenuCancel","handleFilterMenuConfirm","mergedTheme","mergedClsPrefix","active","showPopover","mergedRenderFilter","filterMenuCssVars","render","show","onUpdateShow","v","trigger","theme","peers","Popover","themeOverrides","peerOverrides","placement","style","padding","renderFilterIcon","class","clsPrefix","renderFilterMenu","hide","radioGroupName","String","onChange","onClear","onConfirm"],"sources":["/Users/wangjohnson/ai_marketing/frontend/node_modules/naive-ui/es/data-table/src/HeaderButton/FilterButton.mjs"],"sourcesContent":["import { h, defineComponent, ref, computed, inject } from 'vue';\nimport { FilterIcon } from \"../../../_internal/icons/index.mjs\";\nimport { NBaseIcon } from \"../../../_internal/index.mjs\";\nimport { NPopover } from \"../../../popover/index.mjs\";\nimport RenderFilter from \"./RenderFilter.mjs\";\nimport NDataTableFilterMenu from \"./FilterMenu.mjs\";\nimport { dataTableInjectionKey } from \"../interface.mjs\";\nimport { useConfig } from \"../../../_mixins/index.mjs\";\nfunction createFilterState(currentFilterState, columnKey, mergedFilterValue) {\n  const nextFilterState = Object.assign({}, currentFilterState);\n  nextFilterState[columnKey] = mergedFilterValue;\n  return nextFilterState;\n}\nexport default defineComponent({\n  name: 'DataTableFilterButton',\n  props: {\n    column: {\n      type: Object,\n      required: true\n    },\n    options: {\n      type: Array,\n      default: () => []\n    }\n  },\n  setup(props) {\n    const {\n      mergedComponentPropsRef\n    } = useConfig();\n    const {\n      mergedThemeRef,\n      mergedClsPrefixRef,\n      mergedFilterStateRef,\n      filterMenuCssVarsRef,\n      paginationBehaviorOnFilterRef,\n      doUpdatePage,\n      doUpdateFilters\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    } = inject(dataTableInjectionKey);\n    const showPopoverRef = ref(false);\n    const filterStateRef = mergedFilterStateRef;\n    const filterMultipleRef = computed(() => {\n      return props.column.filterMultiple !== false;\n    });\n    const mergedFilterValueRef = computed(() => {\n      const filterValue = filterStateRef.value[props.column.key];\n      if (filterValue === undefined) {\n        const {\n          value: multiple\n        } = filterMultipleRef;\n        if (multiple) return [];else return null;\n      }\n      return filterValue;\n    });\n    const activeRef = computed(() => {\n      const {\n        value: filterValue\n      } = mergedFilterValueRef;\n      if (Array.isArray(filterValue)) {\n        return filterValue.length > 0;\n      }\n      return filterValue !== null;\n    });\n    const mergedRenderFilterRef = computed(() => {\n      var _a, _b;\n      return ((_b = (_a = mergedComponentPropsRef === null || mergedComponentPropsRef === void 0 ? void 0 : mergedComponentPropsRef.value) === null || _a === void 0 ? void 0 : _a.DataTable) === null || _b === void 0 ? void 0 : _b.renderFilter) || props.column.renderFilter;\n    });\n    function handleFilterChange(mergedFilterValue) {\n      const nextFilterState = createFilterState(filterStateRef.value, props.column.key, mergedFilterValue);\n      doUpdateFilters(nextFilterState, props.column);\n      if (paginationBehaviorOnFilterRef.value === 'first') {\n        doUpdatePage(1);\n      }\n    }\n    function handleFilterMenuCancel() {\n      showPopoverRef.value = false;\n    }\n    function handleFilterMenuConfirm() {\n      showPopoverRef.value = false;\n    }\n    return {\n      mergedTheme: mergedThemeRef,\n      mergedClsPrefix: mergedClsPrefixRef,\n      active: activeRef,\n      showPopover: showPopoverRef,\n      mergedRenderFilter: mergedRenderFilterRef,\n      filterMultiple: filterMultipleRef,\n      mergedFilterValue: mergedFilterValueRef,\n      filterMenuCssVars: filterMenuCssVarsRef,\n      handleFilterChange,\n      handleFilterMenuConfirm,\n      handleFilterMenuCancel\n    };\n  },\n  render() {\n    const {\n      mergedTheme,\n      mergedClsPrefix,\n      handleFilterMenuCancel\n    } = this;\n    return h(NPopover, {\n      show: this.showPopover,\n      onUpdateShow: v => this.showPopover = v,\n      trigger: \"click\",\n      theme: mergedTheme.peers.Popover,\n      themeOverrides: mergedTheme.peerOverrides.Popover,\n      placement: \"bottom\",\n      style: {\n        padding: 0\n      }\n    }, {\n      trigger: () => {\n        const {\n          mergedRenderFilter\n        } = this;\n        if (mergedRenderFilter) {\n          return h(RenderFilter, {\n            \"data-data-table-filter\": true,\n            render: mergedRenderFilter,\n            active: this.active,\n            show: this.showPopover\n          });\n        }\n        const {\n          renderFilterIcon\n        } = this.column;\n        return h(\"div\", {\n          \"data-data-table-filter\": true,\n          class: [`${mergedClsPrefix}-data-table-filter`, {\n            [`${mergedClsPrefix}-data-table-filter--active`]: this.active,\n            [`${mergedClsPrefix}-data-table-filter--show`]: this.showPopover\n          }]\n        }, renderFilterIcon ? renderFilterIcon({\n          active: this.active,\n          show: this.showPopover\n        }) : h(NBaseIcon, {\n          clsPrefix: mergedClsPrefix\n        }, {\n          default: () => h(FilterIcon, null)\n        }));\n      },\n      default: () => {\n        const {\n          renderFilterMenu\n        } = this.column;\n        return renderFilterMenu ? renderFilterMenu({\n          hide: handleFilterMenuCancel\n        }) : h(NDataTableFilterMenu, {\n          style: this.filterMenuCssVars,\n          radioGroupName: String(this.column.key),\n          multiple: this.filterMultiple,\n          value: this.mergedFilterValue,\n          options: this.options,\n          column: this.column,\n          onChange: this.handleFilterChange,\n          onClear: this.handleFilterMenuCancel,\n          onConfirm: this.handleFilterMenuConfirm\n        });\n      }\n    });\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}