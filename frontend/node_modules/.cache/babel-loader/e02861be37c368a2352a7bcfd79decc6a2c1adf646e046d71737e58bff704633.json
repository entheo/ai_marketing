{"ast":null,"code":"import { createStore } from 'vuex';\nimport axios from 'axios';\nexport default createStore({\n  // State\n  state: {\n    status: '',\n    token: localStorage.getItem('token') || '',\n    user: {}\n  },\n  // Mutations\n  mutations: {\n    auth_success(state, {\n      token,\n      user\n    }) {\n      state.status = 'success';\n      state.token = token;\n      state.user = user;\n    },\n    logout(state) {\n      state.status = '';\n      state.token = '';\n    },\n    set_temp_campaign_data(state, data) {\n      temp_campaign_data = data;\n    }\n  },\n  // Actions\n  actions: {\n    logIn({\n      commit\n    }, user) {\n      return new Promise((resolve, reject) => {\n        console.log(user);\n        axios({\n          url: 'http://localhost:8005/account/login/',\n          data: user,\n          method: 'POST'\n        }).then(resp => {\n          console.log(resp);\n          const token = resp.data.token.access;\n          const user = resp.data.username;\n          localStorage.setItem('token', token);\n          axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n          commit('auth_success', {\n            token,\n            user\n          });\n          resolve(resp);\n        }).catch(err => {\n          localStorage.removeItem('token');\n          reject(err);\n        });\n      });\n    },\n    logout({\n      commit\n    }) {\n      return new Promise(resolve => {\n        commit('logout');\n        localStorage.removeItem('token');\n        delete axios.defaults.headers.common['Authorization'];\n        resolve();\n      });\n    }\n  },\n  getters: {\n    isLoggedIn: state => !!state.token,\n    authStatus: state => state.status\n  }\n});","map":{"version":3,"names":["createStore","axios","state","status","token","localStorage","getItem","user","mutations","auth_success","logout","set_temp_campaign_data","data","temp_campaign_data","actions","logIn","commit","Promise","resolve","reject","console","log","url","method","then","resp","access","username","setItem","defaults","headers","common","catch","err","removeItem","getters","isLoggedIn","authStatus"],"sources":["/Users/wangjohnson/ai_marketing/frontend/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex'\nimport axios from 'axios';\n\nexport default createStore({\n  \n  // State\n  state: {\n    status: '',\n    token: localStorage.getItem('token') || '',\n    user: {}\n  },\n\n  // Mutations\n  mutations: {\n    auth_success(state, { token, user }){\n      state.status = 'success'\n      state.token = token\n      state.user = user\n    },\n    logout(state){\n      state.status = ''\n      state.token = ''\n    },\n    set_temp_campaign_data(state,data){\n        temp_campaign_data=data\n        },\n  },\n\n  // Actions\n  actions: {\n    logIn({ commit }, user) {\n      return new Promise((resolve, reject) => {\n        console.log(user)\n        axios({ url: 'http://localhost:8005/account/login/', data: user, method: 'POST' })\n        .then(resp => {\n          console.log(resp)\n          const token = resp.data.token.access\n          const user = resp.data.username\n          localStorage.setItem('token', token)\n          axios.defaults.headers.common['Authorization'] = `Bearer ${token}`\n          commit('auth_success', { token, user })\n          resolve(resp)\n        })\n        .catch(err => {\n          localStorage.removeItem('token')\n          reject(err)\n        })\n      })\n    },\n    logout({ commit }){\n      return new Promise((resolve) => {\n        commit('logout')\n        localStorage.removeItem('token')\n        delete axios.defaults.headers.common['Authorization']\n        resolve()\n      })\n    }\n  },\n  getters: {\n    isLoggedIn: state => !!state.token,\n    authStatus: state => state.status\n  }\n});\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,MAAM;AAClC,OAAOC,KAAK,MAAM,OAAO;AAEzB,eAAeD,WAAW,CAAC;EAEzB;EACAE,KAAK,EAAE;IACLC,MAAM,EAAE,EAAE;IACVC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE;IAC1CC,IAAI,EAAE,CAAC;EACT,CAAC;EAED;EACAC,SAAS,EAAE;IACTC,YAAYA,CAACP,KAAK,EAAE;MAAEE,KAAK;MAAEG;IAAK,CAAC,EAAC;MAClCL,KAAK,CAACC,MAAM,GAAG,SAAS;MACxBD,KAAK,CAACE,KAAK,GAAGA,KAAK;MACnBF,KAAK,CAACK,IAAI,GAAGA,IAAI;IACnB,CAAC;IACDG,MAAMA,CAACR,KAAK,EAAC;MACXA,KAAK,CAACC,MAAM,GAAG,EAAE;MACjBD,KAAK,CAACE,KAAK,GAAG,EAAE;IAClB,CAAC;IACDO,sBAAsBA,CAACT,KAAK,EAACU,IAAI,EAAC;MAC9BC,kBAAkB,GAACD,IAAI;IACvB;EACN,CAAC;EAED;EACAE,OAAO,EAAE;IACPC,KAAKA,CAAC;MAAEC;IAAO,CAAC,EAAET,IAAI,EAAE;MACtB,OAAO,IAAIU,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACtCC,OAAO,CAACC,GAAG,CAACd,IAAI,CAAC;QACjBN,KAAK,CAAC;UAAEqB,GAAG,EAAE,sCAAsC;UAAEV,IAAI,EAAEL,IAAI;UAAEgB,MAAM,EAAE;QAAO,CAAC,CAAC,CACjFC,IAAI,CAACC,IAAI,IAAI;UACZL,OAAO,CAACC,GAAG,CAACI,IAAI,CAAC;UACjB,MAAMrB,KAAK,GAAGqB,IAAI,CAACb,IAAI,CAACR,KAAK,CAACsB,MAAM;UACpC,MAAMnB,IAAI,GAAGkB,IAAI,CAACb,IAAI,CAACe,QAAQ;UAC/BtB,YAAY,CAACuB,OAAO,CAAC,OAAO,EAAExB,KAAK,CAAC;UACpCH,KAAK,CAAC4B,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAI,UAAS3B,KAAM,EAAC;UAClEY,MAAM,CAAC,cAAc,EAAE;YAAEZ,KAAK;YAAEG;UAAK,CAAC,CAAC;UACvCW,OAAO,CAACO,IAAI,CAAC;QACf,CAAC,CAAC,CACDO,KAAK,CAACC,GAAG,IAAI;UACZ5B,YAAY,CAAC6B,UAAU,CAAC,OAAO,CAAC;UAChCf,MAAM,CAACc,GAAG,CAAC;QACb,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC;IACDvB,MAAMA,CAAC;MAAEM;IAAO,CAAC,EAAC;MAChB,OAAO,IAAIC,OAAO,CAAEC,OAAO,IAAK;QAC9BF,MAAM,CAAC,QAAQ,CAAC;QAChBX,YAAY,CAAC6B,UAAU,CAAC,OAAO,CAAC;QAChC,OAAOjC,KAAK,CAAC4B,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC;QACrDb,OAAO,CAAC,CAAC;MACX,CAAC,CAAC;IACJ;EACF,CAAC;EACDiB,OAAO,EAAE;IACPC,UAAU,EAAElC,KAAK,IAAI,CAAC,CAACA,KAAK,CAACE,KAAK;IAClCiC,UAAU,EAAEnC,KAAK,IAAIA,KAAK,CAACC;EAC7B;AACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}