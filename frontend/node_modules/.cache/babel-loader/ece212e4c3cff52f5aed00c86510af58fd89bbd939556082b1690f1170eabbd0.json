{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { h, ref, defineComponent, inject, computed, watchEffect } from 'vue';\nimport { formatLength } from \"../../_utils/index.mjs\";\nimport TableHeader from \"./TableParts/Header.mjs\";\nimport TableBody from \"./TableParts/Body.mjs\";\nimport { dataTableInjectionKey } from \"./interface.mjs\";\nexport default defineComponent({\n  name: 'MainTable',\n  setup() {\n    const {\n      mergedClsPrefixRef,\n      rightFixedColumnsRef,\n      leftFixedColumnsRef,\n      bodyWidthRef,\n      maxHeightRef,\n      minHeightRef,\n      flexHeightRef,\n      syncScrollState\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    } = inject(dataTableInjectionKey);\n    const headerInstRef = ref(null);\n    const bodyInstRef = ref(null);\n    const selfElRef = ref(null);\n    const fixedStateInitializedRef = ref(!(leftFixedColumnsRef.value.length || rightFixedColumnsRef.value.length));\n    const bodyStyleRef = computed(() => {\n      return {\n        maxHeight: formatLength(maxHeightRef.value),\n        minHeight: formatLength(minHeightRef.value)\n      };\n    });\n    function handleBodyResize(entry) {\n      bodyWidthRef.value = entry.contentRect.width;\n      syncScrollState();\n      if (!fixedStateInitializedRef.value) {\n        fixedStateInitializedRef.value = true;\n      }\n    }\n    function getHeaderElement() {\n      const {\n        value\n      } = headerInstRef;\n      if (value) {\n        return value.$el;\n      }\n      return null;\n    }\n    function getBodyElement() {\n      const {\n        value\n      } = bodyInstRef;\n      if (value) {\n        return value.getScrollContainer();\n      }\n      return null;\n    }\n    const exposedMethods = {\n      getBodyElement,\n      getHeaderElement,\n      scrollTo(arg0, arg1) {\n        var _a;\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        (_a = bodyInstRef.value) === null || _a === void 0 ? void 0 : _a.scrollTo(arg0, arg1);\n      }\n    };\n    watchEffect(() => {\n      const {\n        value: selfEl\n      } = selfElRef;\n      if (!selfEl) return;\n      const transitionDisabledClass = `${mergedClsPrefixRef.value}-data-table-base-table--transition-disabled`;\n      if (fixedStateInitializedRef.value) {\n        setTimeout(() => {\n          selfEl.classList.remove(transitionDisabledClass);\n        }, 0);\n      } else {\n        selfEl.classList.add(transitionDisabledClass);\n      }\n    });\n    return Object.assign({\n      maxHeight: maxHeightRef,\n      mergedClsPrefix: mergedClsPrefixRef,\n      selfElRef,\n      headerInstRef,\n      bodyInstRef,\n      bodyStyle: bodyStyleRef,\n      flexHeight: flexHeightRef,\n      handleBodyResize\n    }, exposedMethods);\n  },\n  render() {\n    const {\n      mergedClsPrefix,\n      maxHeight,\n      flexHeight\n    } = this;\n    const headerInBody = maxHeight === undefined && !flexHeight;\n    return h(\"div\", {\n      class: `${mergedClsPrefix}-data-table-base-table`,\n      ref: \"selfElRef\"\n    }, headerInBody ? null : h(TableHeader, {\n      ref: \"headerInstRef\"\n    }), h(TableBody, {\n      ref: \"bodyInstRef\",\n      bodyStyle: this.bodyStyle,\n      showHeader: headerInBody,\n      flexHeight: flexHeight,\n      onResize: this.handleBodyResize\n    }));\n  }\n});","map":{"version":3,"names":["h","ref","defineComponent","inject","computed","watchEffect","formatLength","TableHeader","TableBody","dataTableInjectionKey","name","setup","mergedClsPrefixRef","rightFixedColumnsRef","leftFixedColumnsRef","bodyWidthRef","maxHeightRef","minHeightRef","flexHeightRef","syncScrollState","headerInstRef","bodyInstRef","selfElRef","fixedStateInitializedRef","value","length","bodyStyleRef","maxHeight","minHeight","handleBodyResize","entry","contentRect","width","getHeaderElement","$el","getBodyElement","getScrollContainer","exposedMethods","scrollTo","arg0","arg1","_a","selfEl","transitionDisabledClass","setTimeout","classList","remove","add","Object","assign","mergedClsPrefix","bodyStyle","flexHeight","render","headerInBody","undefined","class","showHeader","onResize"],"sources":["/Users/wangjohnson/ai_marketing/frontend/node_modules/naive-ui/es/data-table/src/MainTable.mjs"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { h, ref, defineComponent, inject, computed, watchEffect } from 'vue';\nimport { formatLength } from \"../../_utils/index.mjs\";\nimport TableHeader from \"./TableParts/Header.mjs\";\nimport TableBody from \"./TableParts/Body.mjs\";\nimport { dataTableInjectionKey } from \"./interface.mjs\";\nexport default defineComponent({\n  name: 'MainTable',\n  setup() {\n    const {\n      mergedClsPrefixRef,\n      rightFixedColumnsRef,\n      leftFixedColumnsRef,\n      bodyWidthRef,\n      maxHeightRef,\n      minHeightRef,\n      flexHeightRef,\n      syncScrollState\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    } = inject(dataTableInjectionKey);\n    const headerInstRef = ref(null);\n    const bodyInstRef = ref(null);\n    const selfElRef = ref(null);\n    const fixedStateInitializedRef = ref(!(leftFixedColumnsRef.value.length || rightFixedColumnsRef.value.length));\n    const bodyStyleRef = computed(() => {\n      return {\n        maxHeight: formatLength(maxHeightRef.value),\n        minHeight: formatLength(minHeightRef.value)\n      };\n    });\n    function handleBodyResize(entry) {\n      bodyWidthRef.value = entry.contentRect.width;\n      syncScrollState();\n      if (!fixedStateInitializedRef.value) {\n        fixedStateInitializedRef.value = true;\n      }\n    }\n    function getHeaderElement() {\n      const {\n        value\n      } = headerInstRef;\n      if (value) {\n        return value.$el;\n      }\n      return null;\n    }\n    function getBodyElement() {\n      const {\n        value\n      } = bodyInstRef;\n      if (value) {\n        return value.getScrollContainer();\n      }\n      return null;\n    }\n    const exposedMethods = {\n      getBodyElement,\n      getHeaderElement,\n      scrollTo(arg0, arg1) {\n        var _a;\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        (_a = bodyInstRef.value) === null || _a === void 0 ? void 0 : _a.scrollTo(arg0, arg1);\n      }\n    };\n    watchEffect(() => {\n      const {\n        value: selfEl\n      } = selfElRef;\n      if (!selfEl) return;\n      const transitionDisabledClass = `${mergedClsPrefixRef.value}-data-table-base-table--transition-disabled`;\n      if (fixedStateInitializedRef.value) {\n        setTimeout(() => {\n          selfEl.classList.remove(transitionDisabledClass);\n        }, 0);\n      } else {\n        selfEl.classList.add(transitionDisabledClass);\n      }\n    });\n    return Object.assign({\n      maxHeight: maxHeightRef,\n      mergedClsPrefix: mergedClsPrefixRef,\n      selfElRef,\n      headerInstRef,\n      bodyInstRef,\n      bodyStyle: bodyStyleRef,\n      flexHeight: flexHeightRef,\n      handleBodyResize\n    }, exposedMethods);\n  },\n  render() {\n    const {\n      mergedClsPrefix,\n      maxHeight,\n      flexHeight\n    } = this;\n    const headerInBody = maxHeight === undefined && !flexHeight;\n    return h(\"div\", {\n      class: `${mergedClsPrefix}-data-table-base-table`,\n      ref: \"selfElRef\"\n    }, headerInBody ? null : h(TableHeader, {\n      ref: \"headerInstRef\"\n    }), h(TableBody, {\n      ref: \"bodyInstRef\",\n      bodyStyle: this.bodyStyle,\n      showHeader: headerInBody,\n      flexHeight: flexHeight,\n      onResize: this.handleBodyResize\n    }));\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}