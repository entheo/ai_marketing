{"ast":null,"code":"import { defineComponent, h, ref, provide, getCurrentInstance, toRef } from 'vue';\nimport { createId } from 'seemly';\nimport { createInjectionKey } from \"../../_utils/index.mjs\";\nimport { useConfig } from \"../../_mixins/index.mjs\";\nimport NImagePreview from \"./ImagePreview.mjs\";\nimport { imagePreviewSharedProps } from \"./interface.mjs\";\nexport const imageGroupInjectionKey = createInjectionKey('n-image-group');\nexport const imageGroupProps = imagePreviewSharedProps;\nexport default defineComponent({\n  name: 'ImageGroup',\n  props: imageGroupProps,\n  setup(props) {\n    let currentSrc;\n    const {\n      mergedClsPrefixRef\n    } = useConfig(props);\n    const groupId = `c${createId()}`;\n    const vm = getCurrentInstance();\n    const setPreviewSrc = src => {\n      var _a;\n      currentSrc = src;\n      (_a = previewInstRef.value) === null || _a === void 0 ? void 0 : _a.setPreviewSrc(src);\n    };\n    function go(step) {\n      var _a, _b;\n      if (!(vm === null || vm === void 0 ? void 0 : vm.proxy)) return;\n      const container = vm.proxy.$el.parentElement;\n      // use dom api since we can't get the correct order before all children are rendered\n      const imgs = container.querySelectorAll(`[data-group-id=${groupId}]:not([data-error=true])`);\n      if (!imgs.length) return;\n      const index = Array.from(imgs).findIndex(img => img.dataset.previewSrc === currentSrc);\n      if (~index) {\n        setPreviewSrc(imgs[(index + step + imgs.length) % imgs.length].dataset.previewSrc);\n      } else {\n        setPreviewSrc(imgs[0].dataset.previewSrc);\n      }\n      step === 1 ? (_a = props.onPreviewNext) === null || _a === void 0 ? void 0 : _a.call(props) : (_b = props.onPreviewPrev) === null || _b === void 0 ? void 0 : _b.call(props);\n    }\n    provide(imageGroupInjectionKey, {\n      mergedClsPrefixRef,\n      setPreviewSrc,\n      setThumbnailEl: el => {\n        var _a;\n        (_a = previewInstRef.value) === null || _a === void 0 ? void 0 : _a.setThumbnailEl(el);\n      },\n      toggleShow: () => {\n        var _a;\n        (_a = previewInstRef.value) === null || _a === void 0 ? void 0 : _a.toggleShow();\n      },\n      groupId,\n      renderToolbarRef: toRef(props, 'renderToolbar')\n    });\n    const previewInstRef = ref(null);\n    return {\n      mergedClsPrefix: mergedClsPrefixRef,\n      previewInstRef,\n      next: () => {\n        go(1);\n      },\n      prev: () => {\n        go(-1);\n      }\n    };\n  },\n  render() {\n    return h(NImagePreview, {\n      theme: this.theme,\n      themeOverrides: this.themeOverrides,\n      clsPrefix: this.mergedClsPrefix,\n      ref: \"previewInstRef\",\n      onPrev: this.prev,\n      onNext: this.next,\n      showToolbar: this.showToolbar,\n      showToolbarTooltip: this.showToolbarTooltip,\n      renderToolbar: this.renderToolbar\n    }, this.$slots);\n  }\n});","map":{"version":3,"names":["defineComponent","h","ref","provide","getCurrentInstance","toRef","createId","createInjectionKey","useConfig","NImagePreview","imagePreviewSharedProps","imageGroupInjectionKey","imageGroupProps","name","props","setup","currentSrc","mergedClsPrefixRef","groupId","vm","setPreviewSrc","src","_a","previewInstRef","value","go","step","_b","proxy","container","$el","parentElement","imgs","querySelectorAll","length","index","Array","from","findIndex","img","dataset","previewSrc","onPreviewNext","call","onPreviewPrev","setThumbnailEl","el","toggleShow","renderToolbarRef","mergedClsPrefix","next","prev","render","theme","themeOverrides","clsPrefix","onPrev","onNext","showToolbar","showToolbarTooltip","renderToolbar","$slots"],"sources":["/Users/wangjohnson/ai_marketing/frontend/node_modules/naive-ui/es/image/src/ImageGroup.mjs"],"sourcesContent":["import { defineComponent, h, ref, provide, getCurrentInstance, toRef } from 'vue';\nimport { createId } from 'seemly';\nimport { createInjectionKey } from \"../../_utils/index.mjs\";\nimport { useConfig } from \"../../_mixins/index.mjs\";\nimport NImagePreview from \"./ImagePreview.mjs\";\nimport { imagePreviewSharedProps } from \"./interface.mjs\";\nexport const imageGroupInjectionKey = createInjectionKey('n-image-group');\nexport const imageGroupProps = imagePreviewSharedProps;\nexport default defineComponent({\n  name: 'ImageGroup',\n  props: imageGroupProps,\n  setup(props) {\n    let currentSrc;\n    const {\n      mergedClsPrefixRef\n    } = useConfig(props);\n    const groupId = `c${createId()}`;\n    const vm = getCurrentInstance();\n    const setPreviewSrc = src => {\n      var _a;\n      currentSrc = src;\n      (_a = previewInstRef.value) === null || _a === void 0 ? void 0 : _a.setPreviewSrc(src);\n    };\n    function go(step) {\n      var _a, _b;\n      if (!(vm === null || vm === void 0 ? void 0 : vm.proxy)) return;\n      const container = vm.proxy.$el.parentElement;\n      // use dom api since we can't get the correct order before all children are rendered\n      const imgs = container.querySelectorAll(`[data-group-id=${groupId}]:not([data-error=true])`);\n      if (!imgs.length) return;\n      const index = Array.from(imgs).findIndex(img => img.dataset.previewSrc === currentSrc);\n      if (~index) {\n        setPreviewSrc(imgs[(index + step + imgs.length) % imgs.length].dataset.previewSrc);\n      } else {\n        setPreviewSrc(imgs[0].dataset.previewSrc);\n      }\n      step === 1 ? (_a = props.onPreviewNext) === null || _a === void 0 ? void 0 : _a.call(props) : (_b = props.onPreviewPrev) === null || _b === void 0 ? void 0 : _b.call(props);\n    }\n    provide(imageGroupInjectionKey, {\n      mergedClsPrefixRef,\n      setPreviewSrc,\n      setThumbnailEl: el => {\n        var _a;\n        (_a = previewInstRef.value) === null || _a === void 0 ? void 0 : _a.setThumbnailEl(el);\n      },\n      toggleShow: () => {\n        var _a;\n        (_a = previewInstRef.value) === null || _a === void 0 ? void 0 : _a.toggleShow();\n      },\n      groupId,\n      renderToolbarRef: toRef(props, 'renderToolbar')\n    });\n    const previewInstRef = ref(null);\n    return {\n      mergedClsPrefix: mergedClsPrefixRef,\n      previewInstRef,\n      next: () => {\n        go(1);\n      },\n      prev: () => {\n        go(-1);\n      }\n    };\n  },\n  render() {\n    return h(NImagePreview, {\n      theme: this.theme,\n      themeOverrides: this.themeOverrides,\n      clsPrefix: this.mergedClsPrefix,\n      ref: \"previewInstRef\",\n      onPrev: this.prev,\n      onNext: this.next,\n      showToolbar: this.showToolbar,\n      showToolbarTooltip: this.showToolbarTooltip,\n      renderToolbar: this.renderToolbar\n    }, this.$slots);\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}